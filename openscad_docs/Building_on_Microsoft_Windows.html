<html><head><title>Building on Microsoft Windows</title><link href="./styles/style.css" rel="stylesheet"/></head><body class="mw-body" style="height:auto"><h1 class="firstHeading" id="firstHeading">Building on Microsoft Windows</h1><div id="bodyContent"><p>This page is currently under development - the goal is to describe how to set up a functional development environment for OpenSCAD on Windows.
</p>
<div aria-labelledby="mw-toc-heading" class="toc" id="toc" role="navigation"><div class="toctitle" dir="ltr" lang="en"><h2 id="mw-toc-heading">Contents</h2></div>
<ul style="list-style-image:none">
<li><a href="#Downloads"><span class="tocnumber">1</span> Downloads</a></li>
<li><a href="#Installation"><span class="tocnumber">2</span> Installation</a>
<ul style="list-style-image:none">
<li><a href="#MSYS2"><span class="tocnumber">2.1</span> MSYS2</a></li>
<li><a href="#Updating_MSYS2"><span class="tocnumber">2.2</span> Updating MSYS2</a></li>
<li><a href="#OpenSCAD"><span class="tocnumber">2.3</span> OpenSCAD</a></li>
<li><a href="#Compiling"><span class="tocnumber">2.4</span> Compiling</a></li>
<li><a href="#Modify_.bashrc"><span class="tocnumber">2.5</span> Modify .bashrc</a>
<ul style="list-style-image:none">
<li><a href="#Commandline"><span class="tocnumber">2.5.1</span> Commandline</a></li>
<li><a href="#QtCreator"><span class="tocnumber">2.5.2</span> QtCreator</a></li>
</ul>
</li>
<li><a href="#Building_Debug_Version"><span class="tocnumber">2.6</span> Building Debug Version</a></li>
<li><a href="#OpenGL_(Optional)"><span class="tocnumber">2.7</span> OpenGL (Optional)</a></li>
</ul>
</li>
</ul>
</div>

<h2>Downloads</h2>
<ul style="list-style-image:none"><li>MSYS2 (<a class="external text" href="https://msys2.github.io/" rel="nofollow">Download</a>)</li></ul>
<p>Download the "msys2 installer" matching your Windows system (32bit or 64bit). The following description follows the 64bit installation, so if you have a 32bit Windows, some of the package names need to be changed for the 32bit versions of the packages (usually that's i686 instead of x86_64).
</p>
<h2>Installation</h2>
<h3>MSYS2</h3>
<p>Start by installing MYSYS2 following the documentation on the download page.
</p><p>After installation, a bash window appears. The following steps are done from inside this MSYS console window.
</p><p>Install packages with needed dependencies and the QtCreator IDE:
</p>
<pre>pacman -Sy
pacman -S mingw-w64-x86_64-qt-creator
pacman -S mingw-w64-x86_64-gdb
pacman -S mingw-w64-x86_64-boost
pacman -S mingw-w64-x86_64-cgal
pacman -S mingw-w64-x86_64-eigen3
pacman -S mingw-w64-x86_64-glew
pacman -S mingw-w64-x86_64-qscintilla
pacman -S mingw-w64-x86_64-opencsg
pacman -S mingw-w64-x86_64-libzip
pacman -S mingw-w64-x86_64-pkg-config
pacman -S bison
pacman -S flex
pacman -S git
</pre>
<p>or for those who have trouble copy and pasting:
</p>
<pre>pacman -Sy;
a="mingw-w64-x86_64-";  pacman -S ${a}qt-creator ${a}gdb ${a}boost ${a}cgal \
  ${a}eigen3 ${a}glew ${a}qscintilla ${a}opencsg ${a}libzip ${a}pkg-config \
  bison flex git   
</pre>                             
<p>If you want to start the MSYS2 environment later, use the MinGW-32 (for 32bit Systems) or MinGW-64 links in the start menu to open the console window.
</p><p>Note that MSYS2 also provides a precompiled OpenSCAD package. This can be installed using
</p>
<pre>pacman -S mingw-w64-x86_64-openscad
</pre>
<h3>Updating MSYS2</h3>
<p>Update the packages to the latest version in the MSYS2 repository, follow the steps in the <a class="external text" href="http://sourceforge.net/p/msys2/wiki/MSYS2%20installation/#iii-updating-packages" rel="nofollow">MSYS2 wiki</a>. It's important to update the core packages first.
</p>
<h3>OpenSCAD</h3>
<p>Get the OpenSCAD sourcecode using <a class="external text" href="http://msysgit.github.io/" rel="nofollow">GIT</a>:
</p>
<pre>git clone git://github.com/openscad/openscad.git
</pre>
<h3>Compiling</h3>
<h3>Modify .bashrc</h3>
<p>For some reason msys2 has qmake install in /mingw64/bin (cross compile issue maybe?), which is not in the path.
</p><p>Grab a text editor such as nano and open .bashrc.
</p>
<pre>pacman -S nano
nano ~/.bashrc
</pre>
<p>Append the following line to the end, then save and exit.
</p>
<pre>export PATH=/mingw64/bin:$PATH
</pre>
<p>Note you can git a list of editor with:
</p>
<pre>pacman -Ss editor 
</pre>
<p>If you don't do this, you  get 'command qmake not found' when you try to execute <i>qmake</i> as shown below.
</p>
<h4>Commandline</h4>
<p>Currently it isn't possible to use the debug build with the library provided by MSYS2, because linking release QScintilla and debug Qt causes OpenSCAD to crash. See "Building Debug Version" for how to manually build a debug version of QScintilla.
</p><p>Change to the folder the OpenSCAD repository is cloned to and run qmake to create the Makefiles and compile using make.
</p>
<pre>qmake openscad.pro CONFIG-=debug
mingw32-make.exe
</pre>
<p>The resource lookup does not yet work with the file layout created with that build. The easiest way is to move the compiled openscad.exe to the root folder of the OpenSCAD source code.
</p>
<pre>mv release/openscad.exe .
</pre>
<p>To accentually run the executable, you can then use:
</p>
<pre>./openscad.exe
</pre>
<h4>QtCreator</h4>
<pre>qtcreator &amp;
</pre>
<p>To compile and run OpenSCAD, just open the main project file openscad.pro, located in the top folder of the cloned github project.
</p><p>The Build-Type must be changed to "Release".
</p><p>Press Ctrl+B to build.
</p><p>In some cases the build fails when generating the parser code using flex and bison. In that case disabling the "Shadow Build" (see Project tab / General Settings) can help.
</p>
<h3>Building Debug Version</h3>
<p>Currently the QScintilla package provides only a release version of the library. Using this with a debug build of OpenSCAD is not possible (the resulting binary crashs with an assertion error inside Qt).
</p><p>To create a working debug version of OpenSCAD, a debug version of QScintilla must be built manually.
</p>
<ul style="list-style-image:none"><li>Download QScintilla source code from <a class="external free" href="http://www.riverbankcomputing.com/software/qscintilla/download" rel="nofollow">http://www.riverbankcomputing.com/software/qscintilla/download</a></li></ul>
<ul style="list-style-image:none"><li>Extract the archive, change to the subfolder Qt4Qt5 in the QScintilla source tree and edit the qscintilla.pro project file. Rename the build target so the DLL gets a "d" suffix</li></ul>
<pre>- TARGET = qscintilla2
+ TARGET = qscintilla2d
</pre>
<ul style="list-style-image:none"><li>Change the release config option to debug (also in qscintilla.pro)</li></ul>
<pre>- CONFIG += qt warn_off release thread exceptions
+ CONFIG += qt warn_off debug thread exceptions
</pre>
<ul style="list-style-image:none"><li>Build the debug DLL</li></ul>
<pre>$ qmake
$ mingw32-make
</pre>
<ul style="list-style-image:none"><li>Copy the debug library into the default MSYS2 folders</li></ul>
<pre>$ cp debug/libqscintilla2d.dll.a /mingw64/lib/
$ cp debug/qscintilla2d.dll /mingw64/bin/
</pre>
<h3>OpenGL (Optional)</h3>
<p>OpenSCAD needs at least OpenGL version 2.0 to be able to correctly
render the preview using OpenCSG. It's possible to run with older
versions (e.g. the default provided by Windows, which is 1.4) but
the display might differ from the expected output.
</p><p>For systems that can't provide the needed OpenGL version (e.g. when
running on a VM) it's still possible to get the a more recent
OpenGL driver using the Mesa software renderer.
</p>
<pre>$ pacman -S mingw-w64-x86_64-mesa
</pre>
<p>After installing the mesa driver (default location is C:\msys64\mingw64\bin,
the driver itself is opengl32.dll), it can be even activated by
copying it into the same folder as the OpenSCAD.exe.
</p><p>It's possible to enable it for the whole system by copying it to the
Windows system32 folder, replacing the old system driver.
(Warning: Do that only if you have a backup and enough knowledge how
to restore files in a broken Windows installation!)
</p>




</div><footer class="mw-body" style="font-size:13px;color:darkgray;text-align:center;margin-bottom:-1px">
	From the WikiBooks article <a href="https://en.wikibooks.org/wiki/OpenSCAD_User_Manual/Building_on_Microsoft_Windows" style="color:black">Building on Microsoft Windows</a> 
	(provided under <a href="https://creativecommons.org/licenses/by-sa/3.0/" style="color:black">
	CC-BY-SA-3.0</a>)</footer></body></html>