<html><head><title>The OpenSCAD Language</title><link href="./styles/style.css" rel="stylesheet"/></head><body class="mw-body" style="height:auto"><h1 class="firstHeading" id="firstHeading">The OpenSCAD Language</h1><div id="bodyContent"><p><br/>

</p><p><br/>
</p>
<div aria-labelledby="mw-toc-heading" class="toc" id="toc" role="navigation"><div class="toctitle" dir="ltr" lang="en"><h2 id="mw-toc-heading">Contents</h2></div>
<ul style="list-style-image:none">
<li><a href="#Chapter_1_--_General"><span class="tocnumber">1</span> Chapter 1 -- General</a>
<ul style="list-style-image:none">
<li><a href="#Introduction"><span class="tocnumber">1.1</span> Introduction</a></li>
<li><a href="#Comments"><span class="tocnumber">1.2</span> Comments</a></li>
<li><a href="#Values_and_Data_Types"><span class="tocnumber">1.3</span> Values and Data Types</a>
<ul style="list-style-image:none">
<li><a href="#Numbers"><span class="tocnumber">1.3.1</span> Numbers</a></li>
<li><a href="#Boolean_Values"><span class="tocnumber">1.3.2</span> Boolean Values</a></li>
<li><a href="#Strings"><span class="tocnumber">1.3.3</span> Strings</a></li>
<li><a href="#Ranges"><span class="tocnumber">1.3.4</span> Ranges</a></li>
<li><a href="#The_Undefined_Value"><span class="tocnumber">1.3.5</span> The Undefined Value</a></li>
</ul>
</li>
<li><a href="#Variables"><span class="tocnumber">1.4</span> Variables</a>
<ul style="list-style-image:none">
<li><a href="#Undefined_variable"><span class="tocnumber">1.4.1</span> Undefined variable</a></li>
<li><a href="#Scope_of_variables"><span class="tocnumber">1.4.2</span> Scope of variables</a></li>
<li><a href="#Variables_are_set_at_compile-time,_not_run-time"><span class="tocnumber">1.4.3</span> Variables are set at compile-time, not run-time</a></li>
<li><a href="#Special_Variables"><span class="tocnumber">1.4.4</span> Special Variables</a></li>
</ul>
</li>
<li><a href="#Vectors"><span class="tocnumber">1.5</span> Vectors</a>
<ul style="list-style-image:none">
<li><a href="#Indexing_elements_within_vectors"><span class="tocnumber">1.5.1</span> Indexing elements within vectors</a></li>
<li><a href="#Dot_notation_indexing"><span class="tocnumber">1.5.2</span> Dot notation indexing</a></li>
<li><a href="#Vector_operators"><span class="tocnumber">1.5.3</span> Vector operators</a>
<ul style="list-style-image:none">
<li><a href="#concat"><span class="tocnumber">1.5.3.1</span> concat</a></li>
<li><a href="#len"><span class="tocnumber">1.5.3.2</span> len</a></li>
</ul>
</li>
<li><a href="#Matrix"><span class="tocnumber">1.5.4</span> Matrix</a></li>
</ul>
</li>
<li><a href="#Getting_input"><span class="tocnumber">1.6</span> Getting input</a></li>
</ul>
</li>
<li><a href="#Chapter_2_--_3D_Objects"><span class="tocnumber">2</span> Chapter 2 -- 3D Objects</a>
<ul style="list-style-image:none">
<li><a href="#Primitive_Solids"><span class="tocnumber">2.1</span> Primitive Solids</a>
<ul style="list-style-image:none">
<li><a href="#cube"><span class="tocnumber">2.1.1</span> cube</a></li>
<li><a href="#sphere"><span class="tocnumber">2.1.2</span> sphere</a></li>
<li><a href="#cylinder"><span class="tocnumber">2.1.3</span> cylinder</a></li>
<li><a href="#polyhedron"><span class="tocnumber">2.1.4</span> polyhedron</a>
<ul style="list-style-image:none">
<li><a href="#Debugging_polyhedra"><span class="tocnumber">2.1.4.1</span> Debugging polyhedra</a></li>
<li><a href="#Mis-ordered_faces"><span class="tocnumber">2.1.4.2</span> Mis-ordered faces</a></li>
<li><a href="#Point_repetitions_in_a_polyhedron_point_list"><span class="tocnumber">2.1.4.3</span> Point repetitions in a polyhedron point list</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#3D_to_2D_Projection"><span class="tocnumber">2.2</span> 3D to 2D Projection</a></li>
</ul>
</li>
<li><a href="#Chapter_3_--_2D_Objects"><span class="tocnumber">3</span> Chapter 3 -- 2D Objects</a>
<ul style="list-style-image:none">
<li><a href="#square"><span class="tocnumber">3.1</span> square</a></li>
<li><a href="#circle"><span class="tocnumber">3.2</span> circle</a>
<ul style="list-style-image:none">
<li><a href="#ellipse"><span class="tocnumber">3.2.1</span> ellipse</a></li>
<li><a href="#regular_polygon"><span class="tocnumber">3.2.2</span> regular polygon</a></li>
</ul>
</li>
<li><a href="#polygon"><span class="tocnumber">3.3</span> polygon</a></li>
<li><a href="#import_dxf"><span class="tocnumber">3.4</span> import_dxf</a></li>
<li><a href="#Text"><span class="tocnumber">3.5</span> Text</a>
<ul style="list-style-image:none">
<li><a href="#Using_Fonts_&amp;_Styles"><span class="tocnumber">3.5.1</span> Using Fonts &amp; Styles</a></li>
<li><a href="#Alignment"><span class="tocnumber">3.5.2</span> Alignment</a>
<ul style="list-style-image:none">
<li><a href="#Vertical_alignment"><span class="tocnumber">3.5.2.1</span> Vertical alignment</a></li>
<li><a href="#Horizontal_alignment"><span class="tocnumber">3.5.2.2</span> Horizontal alignment</a></li>
</ul>
</li>
<li><a href="#3D_text"><span class="tocnumber">3.5.3</span> 3D text</a></li>
</ul>
</li>
<li><a href="#2D_to_3D_Extrusion"><span class="tocnumber">3.6</span> 2D to 3D Extrusion</a>
<ul style="list-style-image:none">
<li><a href="#Linear_Extrude"><span class="tocnumber">3.6.1</span> Linear Extrude</a>
<ul style="list-style-image:none">
<li><a href="#Usage"><span class="tocnumber">3.6.1.1</span> Usage</a></li>
<li><a href="#Twist"><span class="tocnumber">3.6.1.2</span> Twist</a></li>
<li><a href="#Center"><span class="tocnumber">3.6.1.3</span> Center</a></li>
<li><a href="#Mesh_Refinement"><span class="tocnumber">3.6.1.4</span> Mesh Refinement</a></li>
<li><a href="#Scale"><span class="tocnumber">3.6.1.5</span> Scale</a></li>
</ul>
</li>
<li><a href="#Rotate_Extrude"><span class="tocnumber">3.6.2</span> Rotate Extrude</a></li>
<li><a href="#Parameters"><span class="tocnumber">3.6.3</span> Parameters</a>
<ul style="list-style-image:none">
<li><a href="#Usage_2"><span class="tocnumber">3.6.3.1</span> Usage</a></li>
<li><a href="#Examples"><span class="tocnumber">3.6.3.2</span> Examples</a></li>
<li><a href="#Mesh_Refinement_2"><span class="tocnumber">3.6.3.3</span> Mesh Refinement</a></li>
<li><a href="#Extruding_a_Polygon"><span class="tocnumber">3.6.3.4</span> Extruding a Polygon</a></li>
</ul>
</li>
<li><a href="#Description_of_extrude_parameters"><span class="tocnumber">3.6.4</span> Description of extrude parameters</a>
<ul style="list-style-image:none">
<li><a href="#Extrude_parameters_for_all_extrusion_modes"><span class="tocnumber">3.6.4.1</span> Extrude parameters for all extrusion modes</a></li>
<li><a href="#Extrude_parameters_for_linear_extrusion_only"><span class="tocnumber">3.6.4.2</span> Extrude parameters for linear extrusion only</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#Chapter_4_--_Transform"><span class="tocnumber">4</span> Chapter 4 -- Transform</a>
<ul style="list-style-image:none">
<li><a href="#Basic_concept"><span class="tocnumber">4.1</span> Basic concept</a></li>
<li><a href="#Advanced_concept"><span class="tocnumber">4.2</span> Advanced concept</a></li>
<li><a href="#scale_2"><span class="tocnumber">4.3</span> scale</a></li>
<li><a href="#resize"><span class="tocnumber">4.4</span> resize</a></li>
<li><a href="#rotate"><span class="tocnumber">4.5</span> rotate</a>
<ul style="list-style-image:none">
<li><a href="#Rotation_rule_help"><span class="tocnumber">4.5.1</span> Rotation rule help</a></li>
</ul>
</li>
<li><a href="#translate"><span class="tocnumber">4.6</span> translate</a></li>
<li><a href="#mirror"><span class="tocnumber">4.7</span> mirror</a>
<ul style="list-style-image:none">
<li><a href="#Function_signature:"><span class="tocnumber">4.7.1</span> Function signature:</a></li>
<li><a href="#Examples_2"><span class="tocnumber">4.7.2</span> Examples</a></li>
</ul>
</li>
<li><a href="#multmatrix"><span class="tocnumber">4.8</span> multmatrix</a>
<ul style="list-style-image:none">
<li><a href="#More?"><span class="tocnumber">4.8.1</span> More?</a></li>
</ul>
</li>
<li><a href="#color"><span class="tocnumber">4.9</span> color</a>
<ul style="list-style-image:none">
<li><a href="#Function_signature:_2"><span class="tocnumber">4.9.1</span> Function signature:</a></li>
<li><a href="#Example"><span class="tocnumber">4.9.2</span> Example</a></li>
<li><a href="#Example_2"><span class="tocnumber">4.9.3</span> Example 2</a></li>
</ul>
</li>
<li><a href="#offset"><span class="tocnumber">4.10</span> offset</a></li>
<li><a href="#minkowski"><span class="tocnumber">4.11</span> minkowski</a></li>
<li><a href="#hull"><span class="tocnumber">4.12</span> hull</a></li>
<li><a href="#Combining_transformations"><span class="tocnumber">4.13</span> Combining transformations</a></li>
</ul>
</li>
<li><a href="#Chapter_5_--_Boolean_combination"><span class="tocnumber">5</span> Chapter 5 -- Boolean combination</a>
<ul style="list-style-image:none">
<li><a href="#boolean_overview"><span class="tocnumber">5.1</span> boolean overview</a>
<ul style="list-style-image:none">
<li><a href="#2D_examples"><span class="tocnumber">5.1.1</span> 2D examples</a></li>
<li><a href="#3D_examples"><span class="tocnumber">5.1.2</span> 3D examples</a></li>
</ul>
</li>
<li><a href="#union"><span class="tocnumber">5.2</span> union</a></li>
<li><a href="#difference"><span class="tocnumber">5.3</span> difference</a>
<ul style="list-style-image:none">
<li><a href="#difference_with_multiple_children"><span class="tocnumber">5.3.1</span> difference with multiple children</a></li>
</ul>
</li>
<li><a href="#intersection"><span class="tocnumber">5.4</span> intersection</a></li>
<li><a href="#render"><span class="tocnumber">5.5</span> render</a></li>
</ul>
</li>
<li><a href="#Chapter_6_--_Other_Functions_and_Operators"><span class="tocnumber">6</span> Chapter 6 -- Other Functions and Operators</a>
<ul style="list-style-image:none">
<li><a href="#Conditional_and_Iterator_Functions"><span class="tocnumber">6.1</span> Conditional and Iterator Functions</a>
<ul style="list-style-image:none">
<li><a href="#For_loop"><span class="tocnumber">6.1.1</span> For loop</a></li>
<li><a href="#Intersection_For_Loop"><span class="tocnumber">6.1.2</span> Intersection For Loop</a></li>
<li><a href="#If_Statement"><span class="tocnumber">6.1.3</span> If Statement</a>
<ul style="list-style-image:none">
<li><a href="#else_if"><span class="tocnumber">6.1.3.1</span> else if</a></li>
</ul>
</li>
<li><a href="#Conditional_?_:"><span class="tocnumber">6.1.4</span> Conditional ? :</a>
<ul style="list-style-image:none">
<li><a href="#Recursive_function_calls"><span class="tocnumber">6.1.4.1</span> Recursive function calls</a></li>
<li><a href="#Formatting_complex_usage"><span class="tocnumber">6.1.4.2</span> Formatting complex usage</a></li>
</ul>
</li>
<li><a href="#Assign_Statement"><span class="tocnumber">6.1.5</span> Assign Statement</a></li>
<li><a href="#Let_Statement"><span class="tocnumber">6.1.6</span> Let Statement</a></li>
</ul>
</li>
<li><a href="#Mathematical_Operators"><span class="tocnumber">6.2</span> Mathematical Operators</a>
<ul style="list-style-image:none">
<li><a href="#Scalar_Arithmetical_Operators"><span class="tocnumber">6.2.1</span> Scalar Arithmetical Operators</a></li>
<li><a href="#Relational_Operators"><span class="tocnumber">6.2.2</span> Relational Operators</a></li>
<li><a href="#Logical_Operators"><span class="tocnumber">6.2.3</span> Logical Operators</a></li>
<li><a href="#Conditional_Operator"><span class="tocnumber">6.2.4</span> Conditional Operator</a></li>
<li><a href="#Vector-Number_Operators"><span class="tocnumber">6.2.5</span> Vector-Number Operators</a></li>
<li><a href="#Vector_Operators_2"><span class="tocnumber">6.2.6</span> Vector Operators</a></li>
<li><a href="#Vector_Dot-Product_Operator"><span class="tocnumber">6.2.7</span> Vector Dot-Product Operator</a></li>
<li><a href="#Matrix_Multiplication"><span class="tocnumber">6.2.8</span> Matrix Multiplication</a></li>
</ul>
</li>
<li><a href="#Mathematical_Functions"><span class="tocnumber">6.3</span> Mathematical Functions</a></li>
<li><a href="#Trigonometric_Functions"><span class="tocnumber">6.4</span> Trigonometric Functions</a>
<ul style="list-style-image:none">
<li><a href="#cos"><span class="tocnumber">6.4.1</span> cos</a></li>
<li><a href="#sin"><span class="tocnumber">6.4.2</span> sin</a></li>
<li><a href="#tan"><span class="tocnumber">6.4.3</span> tan</a></li>
<li><a href="#acos"><span class="tocnumber">6.4.4</span> acos</a></li>
<li><a href="#asin"><span class="tocnumber">6.4.5</span> asin</a></li>
<li><a href="#atan"><span class="tocnumber">6.4.6</span> atan</a></li>
<li><a href="#atan2"><span class="tocnumber">6.4.7</span> atan2</a></li>
</ul>
</li>
<li><a href="#Other_Mathematical_Functions"><span class="tocnumber">6.5</span> Other Mathematical Functions</a>
<ul style="list-style-image:none">
<li><a href="#abs"><span class="tocnumber">6.5.1</span> abs</a></li>
<li><a href="#ceil"><span class="tocnumber">6.5.2</span> ceil</a></li>
<li><a href="#concat_2"><span class="tocnumber">6.5.3</span> concat</a></li>
<li><a href="#cross"><span class="tocnumber">6.5.4</span> cross</a></li>
<li><a href="#exp"><span class="tocnumber">6.5.5</span> exp</a></li>
<li><a href="#floor"><span class="tocnumber">6.5.6</span> floor</a></li>
<li><a href="#ln"><span class="tocnumber">6.5.7</span> ln</a></li>
<li><a href="#len_2"><span class="tocnumber">6.5.8</span> len</a></li>
<li><a href="#let"><span class="tocnumber">6.5.9</span> let</a></li>
<li><a href="#log"><span class="tocnumber">6.5.10</span> log</a></li>
<li><a href="#lookup"><span class="tocnumber">6.5.11</span> lookup</a></li>
<li><a href="#max"><span class="tocnumber">6.5.12</span> max</a></li>
<li><a href="#min"><span class="tocnumber">6.5.13</span> min</a></li>
<li><a href="#norm"><span class="tocnumber">6.5.14</span> norm</a></li>
<li><a href="#pow"><span class="tocnumber">6.5.15</span> pow</a></li>
<li><a href="#rands"><span class="tocnumber">6.5.16</span> rands</a></li>
<li><a href="#round"><span class="tocnumber">6.5.17</span> round</a></li>
<li><a href="#sign"><span class="tocnumber">6.5.18</span> sign</a></li>
<li><a href="#sqrt"><span class="tocnumber">6.5.19</span> sqrt</a></li>
</ul>
</li>
<li><a href="#Infinities_and_NaNs"><span class="tocnumber">6.6</span> Infinities and NaNs</a></li>
<li><a href="#String_Functions"><span class="tocnumber">6.7</span> String Functions</a>
<ul style="list-style-image:none">
<li><a href="#str"><span class="tocnumber">6.7.1</span> str</a></li>
<li><a href="#chr"><span class="tocnumber">6.7.2</span> chr</a></li>
<li><a href="#ord"><span class="tocnumber">6.7.3</span> ord</a></li>
<li><a href="#Also_See_search()"><span class="tocnumber">6.7.4</span> Also See search()</a></li>
</ul>
</li>
<li><a href="#List_Comprehensions"><span class="tocnumber">6.8</span> List Comprehensions</a>
<ul style="list-style-image:none">
<li><a href="#Basic_Syntax"><span class="tocnumber">6.8.1</span> Basic Syntax</a>
<ul style="list-style-image:none">
<li><a href="#multiple_generator_expressions"><span class="tocnumber">6.8.1.1</span> multiple generator expressions</a></li>
<li><a href="#for"><span class="tocnumber">6.8.1.2</span> for</a></li>
<li><a href="#each"><span class="tocnumber">6.8.1.3</span> each</a></li>
<li><a href="#if"><span class="tocnumber">6.8.1.4</span> if</a></li>
<li><a href="#if/else"><span class="tocnumber">6.8.1.5</span> if/else</a></li>
<li><a href="#let_2"><span class="tocnumber">6.8.1.6</span> let</a></li>
</ul>
</li>
<li><a href="#Nested_loops"><span class="tocnumber">6.8.2</span> Nested loops</a></li>
<li><a href="#Advanced_Examples"><span class="tocnumber">6.8.3</span> Advanced Examples</a>
<ul style="list-style-image:none">
<li><a href="#Generating_vertices_for_a_polygon"><span class="tocnumber">6.8.3.1</span> Generating vertices for a polygon</a></li>
<li><a href="#Flattening_a_nested_vector"><span class="tocnumber">6.8.3.2</span> Flattening a nested vector</a></li>
<li><a href="#Sorting_a_vector"><span class="tocnumber">6.8.3.3</span> Sorting a vector</a></li>
<li><a href="#Selecting_elements_of_a_vector"><span class="tocnumber">6.8.3.4</span> Selecting elements of a vector</a></li>
<li><a href="#Concatenating_two_vectors"><span class="tocnumber">6.8.3.5</span> Concatenating two vectors</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#Other_Language_Features"><span class="tocnumber">6.9</span> Other Language Features</a>
<ul style="list-style-image:none">
<li><a href="#Special_variables_2"><span class="tocnumber">6.9.1</span> Special variables</a>
<ul style="list-style-image:none">
<li><a href="#$fa,_$fs_and_$fn"><span class="tocnumber">6.9.1.1</span> $fa, $fs and $fn</a></li>
<li><a href="#$t"><span class="tocnumber">6.9.1.2</span> $t</a></li>
<li><a href="#$vpr,_$vpt,_$vpf_and_$vpd"><span class="tocnumber">6.9.1.3</span> $vpr, $vpt, $vpf and $vpd</a></li>
<li><a href="#$preview"><span class="tocnumber">6.9.1.4</span> $preview</a></li>
</ul>
</li>
<li><a href="#Echo_Statements"><span class="tocnumber">6.9.2</span> Echo Statements</a>
<ul style="list-style-image:none">
<li><a href="#Rounding_examples"><span class="tocnumber">6.9.2.1</span> Rounding examples</a></li>
<li><a href="#Small_and_large_Numbers"><span class="tocnumber">6.9.2.2</span> Small and large Numbers</a></li>
<li><a href="#HTML"><span class="tocnumber">6.9.2.3</span> HTML</a></li>
</ul>
</li>
<li><a href="#Echo_Function"><span class="tocnumber">6.9.3</span> Echo Function</a></li>
<li><a href="#Render_2"><span class="tocnumber">6.9.4</span> Render</a></li>
<li><a href="#Surface"><span class="tocnumber">6.9.5</span> Surface</a>
<ul style="list-style-image:none">
<li><a href="#Text_file_format"><span class="tocnumber">6.9.5.1</span> Text file format</a></li>
<li><a href="#Images"><span class="tocnumber">6.9.5.2</span> Images</a></li>
<li><a href="#Examples_3"><span class="tocnumber">6.9.5.3</span> Examples</a></li>
</ul>
</li>
<li><a href="#Search"><span class="tocnumber">6.9.6</span> Search</a>
<ul style="list-style-image:none">
<li><a href="#Search_Usage"><span class="tocnumber">6.9.6.1</span> Search Usage</a></li>
<li><a href="#Search_Arguments"><span class="tocnumber">6.9.6.2</span> Search Arguments</a></li>
<li><a href="#Search_Usage_Examples"><span class="tocnumber">6.9.6.3</span> Search Usage Examples</a>
<ul style="list-style-image:none">
<li><a href="#Index_values_return_as_list"><span class="tocnumber">6.9.6.3.1</span> Index values return as list</a></li>
<li><a href="#Search_on_different_column;_return_Index_values"><span class="tocnumber">6.9.6.3.2</span> Search on different column; return Index values</a></li>
<li><a href="#Search_on_list_of_values"><span class="tocnumber">6.9.6.3.3</span> Search on list of values</a></li>
<li><a href="#Search_on_list_of_strings"><span class="tocnumber">6.9.6.3.4</span> Search on list of strings</a></li>
<li><a href="#Getting_the_right_results"><span class="tocnumber">6.9.6.3.5</span> Getting the right results</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#OpenSCAD_Version"><span class="tocnumber">6.9.7</span> OpenSCAD Version</a></li>
<li><a href="#parent_module(n)_and_$parent_modules"><span class="tocnumber">6.9.8</span> parent_module(n) and $parent_modules</a></li>
<li><a href="#assert"><span class="tocnumber">6.9.9</span> assert</a>
<ul style="list-style-image:none">
<li><a href="#Example_3"><span class="tocnumber">6.9.9.1</span> Example</a></li>
<li><a href="#Checking_parameters"><span class="tocnumber">6.9.9.2</span> Checking parameters</a></li>
<li><a href="#Adding_message"><span class="tocnumber">6.9.9.3</span> Adding message</a></li>
<li><a href="#Using_assertions_in_function"><span class="tocnumber">6.9.9.4</span> Using assertions in function</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#Chapter_7_--_User-Defined_Functions_and_Modules"><span class="tocnumber">7</span> Chapter 7 -- User-Defined Functions and Modules</a>
<ul style="list-style-image:none">
<li><a href="#Introduction_2"><span class="tocnumber">7.1</span> Introduction</a></li>
<li><a href="#Scope"><span class="tocnumber">7.2</span> Scope</a></li>
<li><a href="#Functions"><span class="tocnumber">7.3</span> Functions</a>
<ul style="list-style-image:none">
<li><a href="#Recursive_functions"><span class="tocnumber">7.3.1</span> Recursive functions</a></li>
</ul>
</li>
<li><a href="#Function_Literals"><span class="tocnumber">7.4</span> Function Literals</a></li>
<li><a href="#Modules"><span class="tocnumber">7.5</span> Modules</a>
<ul style="list-style-image:none">
<li><a href="#Object_modules"><span class="tocnumber">7.5.1</span> Object modules</a></li>
<li><a href="#Operator_Modules"><span class="tocnumber">7.5.2</span> Operator Modules</a></li>
<li><a href="#Children"><span class="tocnumber">7.5.3</span> Children</a></li>
<li><a href="#Further_Module_Examples"><span class="tocnumber">7.5.4</span> Further Module Examples</a></li>
<li><a href="#Recursive_Modules"><span class="tocnumber">7.5.5</span> Recursive Modules</a></li>
</ul>
</li>
<li><a href="#Overwriting_built-in_modules"><span class="tocnumber">7.6</span> Overwriting built-in modules</a></li>
<li><a href="#Overwriting_built-in_functions"><span class="tocnumber">7.7</span> Overwriting built-in functions</a></li>
</ul>
</li>
<li><a href="#Chapter_8_--_Debugging_aids"><span class="tocnumber">8</span> Chapter 8 -- Debugging aids</a>
<ul style="list-style-image:none">
<li><a href="#Advanced_concept_2"><span class="tocnumber">8.1</span> Advanced concept</a></li>
<li><a href="#Background_Modifier"><span class="tocnumber">8.2</span> Background Modifier</a></li>
<li><a href="#Debug_Modifier"><span class="tocnumber">8.3</span> Debug Modifier</a></li>
<li><a href="#Root_Modifier"><span class="tocnumber">8.4</span> Root Modifier</a></li>
<li><a href="#Disable_Modifier"><span class="tocnumber">8.5</span> Disable Modifier</a></li>
<li><a href="#Echo_Statements_2"><span class="tocnumber">8.6</span> Echo Statements</a></li>
</ul>
</li>
<li><a href="#Chapter_9_--_External_libraries_and_code_files"><span class="tocnumber">9</span> Chapter 9 -- External libraries and code files</a>
<ul style="list-style-image:none">
<li><a href="#Use_and_Include"><span class="tocnumber">9.1</span> Use and Include</a>
<ul style="list-style-image:none">
<li><a href="#Directory_separators"><span class="tocnumber">9.1.1</span> Directory separators</a></li>
<li><a href="#Variables_2"><span class="tocnumber">9.1.2</span> Variables</a>
<ul style="list-style-image:none">
<li><a href="#Scope_of_variables_2"><span class="tocnumber">9.1.2.1</span> Scope of variables</a></li>
<li><a href="#Overwriting_variables"><span class="tocnumber">9.1.2.2</span> Overwriting variables</a></li>
</ul>
</li>
<li><a href='#Example_"Ring-Library"'><span class="tocnumber">9.1.3</span> Example "Ring-Library"</a></li>
<li><a href="#Nested_Include_and_Use"><span class="tocnumber">9.1.4</span> Nested Include and Use</a></li>
</ul>
</li>
<li><a href="#import"><span class="tocnumber">9.2</span> import</a>
<ul style="list-style-image:none">
<li><a href="#Parameters_2"><span class="tocnumber">9.2.1</span> Parameters</a>
<ul style="list-style-image:none">
<li><a href="#Convexity"><span class="tocnumber">9.2.1.1</span> Convexity</a></li>
<li><a href="#Notes"><span class="tocnumber">9.2.1.2</span> Notes</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#import_dxf_2"><span class="tocnumber">9.3</span> import_dxf</a></li>
<li><a href="#import_stl"><span class="tocnumber">9.4</span> import_stl</a></li>
<li><a href="#surface_2"><span class="tocnumber">9.5</span> surface</a>
<ul style="list-style-image:none">
<li><a href="#Parameters_3"><span class="tocnumber">9.5.1</span> Parameters</a></li>
<li><a href="#Text_file_format_2"><span class="tocnumber">9.5.2</span> Text file format</a></li>
<li><a href="#Images_2"><span class="tocnumber">9.5.3</span> Images</a></li>
<li><a href="#Examples_4"><span class="tocnumber">9.5.4</span> Examples</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>

<p style="page-break-after:always;"></p>
<p><br/>
</p>
<h1>Chapter 1 -- General</h1>
<p><big>OpenSCAD User Manual/The OpenSCAD Language</big>
</p>

<h3>Introduction</h3>
<hr/>
<p>OpenSCAD is a <a class="extiw" href="https://en.wikipedia.org/wiki/2D_computer_graphics" title="w:2D computer graphics">2D</a>/<a class="extiw" href="https://en.wikipedia.org/wiki/3D_computer_graphics_software" title="w:3D computer graphics software">3D</a> and <a class="extiw" href="https://en.wikipedia.org/wiki/Solid_modeling" title="w:Solid modeling">solid modeling</a> program which is based on a <a class="extiw" href="https://en.wikipedia.org/wiki/Functional_programming" title="w:Functional programming">Functional programming</a> <a class="extiw" href="https://en.wikipedia.org/wiki/Procedural_modeling" title="w:Procedural modeling">language</a> used to create <a class="extiw" href="https://en.wikipedia.org/wiki/Polygonal_modeling" title="w:Polygonal modeling">models</a> that are  previewed on the screen, and rendered into 3D <a class="extiw" href="https://en.wikipedia.org/wiki/Polygon_mesh" title="w:Polygon mesh">mesh</a> which allows the model to be exported in a variety of 2D/3D file formats.
</p><p>A script in the OpenSCAD language is used to create 2D or 3D models. This script is a free format list of action statements.
</p>
<pre> object();
 variable = value;
 operator()   action();
 operator() { action();    action(); }
 operator()   operator() { action(); action(); }
 operator() { operator()   action();
              operator() { action(); action(); } }
</pre>
<dl><dd><b>Objects</b></dd></dl>
<p>Objects are the building blocks for models, created by 2D and 3D primitives. Objects end in a semicolon ';'.
</p>
<dl><dd><b>Actions</b></dd></dl>
<p>Action statements include creating objects using primitives and assigning values to variables. Action statements also end in a semicolon ';'.
</p>
<dl><dd><b>Operators</b></dd></dl>
<p>Operators, or transformations, modify the location, color and other properties of objects. Operators use braces '{}' when their scope covers more than one action. More than one operator may be used for the same action or group of actions. Multiple operators are processed Right to Left, that is, the operator closest to the action is processed first. Operators do not end in semicolons ';', but the individual actions they contain do. 
</p>
<pre> Examples
  
   cube(5);
   x = 4+y;
   rotate(40) square(5,10);
   translate([10,5]) { circle(5); square(4); }
   rotate(60) color("red") { circle(5); square(4); }
   color("blue") { translate([5,3,0]) sphere(5); rotate([45,0,45]) { cylinder(10); cube([5,6,7]); } }
</pre>
<h3>Comments</h3>
<hr/>
<p>Comments are a way of leaving notes within the script, or code, (either to yourself or to future programmers) describing how the code works, or what it does. Comments are not evaluated by the compiler, and should not be used to describe self-evident code. 
</p><p>OpenSCAD uses C++-style comments:
</p>
<pre>// This is a comment
  
myvar = 10; // The rest of the line is a comment
  
/*
   Multi-line comments
   can span multiple lines.
*/
</pre>
<h3>Values and Data Types</h3>
<hr/>
<p>A value in OpenSCAD is either a Number (like 42), a Boolean (like true), a String (like "foo"), a Range (like [0: 1: 10]), a Vector (like [1,2,3]), or the Undefined value (undef). Values can be stored in variables, passed as function arguments, and returned as function results.
</p><p>[OpenSCAD is a dynamically typed language with a fixed set of data types. There are no type names, and no user defined types. Functions are not values. In fact, variables and functions occupy disjoint namespaces.]
</p>
<h4>Numbers</h4>
<p>Numbers are the most important type of value in OpenSCAD, and they are written in the familiar decimal notation used in other languages. Eg, -1, 42, 0.5, 2.99792458e+8. [OpenSCAD does not support octal or hexadecimal notation for numbers.]
</p><p>In additional to decimal numerals, the following names for special numbers are defined:
</p>
<ul style="list-style-image:none"><li>PI</li></ul>
<p>OpenSCAD has only a single kind of number, which is a 64 bit IEEE floating point number. [OpenSCAD does not distinguish integers and floating point numbers as two different types, nor does it support complex numbers.] Because OpenSCAD uses the IEEE floating point standard, there are a few deviations from the behaviour of numbers in mathematics:
</p>
<ul style="list-style-image:none"><li>We use binary floating point. A fractional number is not represented exactly unless the denominator is a power of 2. For example, 0.2 (2/10) does not have an exact internal representation, but 0.25 (1/4) and 0.125 (1/8) are represented exactly.</li>
<li>The largest representable number is about 1e308. If a numeric result is too large, then the result can be infinity (printed as inf by echo).</li>
<li>The smallest representable number is about -1e308. If a numeric result is too small, then the result can be -infinity (printed as -inf by echo).</li>
<li>If a numeric result is invalid, then the result can be Not A Number (printed as nan by echo).</li>
<li>If a non-zero numeric result is too close to zero to be representable, then the result is -0 if the result is negative, otherwise it is 0. Zero (0) and negative zero (-0) are treated as two distinct numbers by some of the math operations, and are printed differently by 'echo', although they compare as equal.</li></ul>
<p>The constants 'inf' and 'nan' are not supported as numeric constants by OpenSCAD, even though you can compute numbers that are printed this way by 'echo'. You can define variables with these values by using:
</p>
<pre>inf = 1e200 * 1e200;
nan = 0 / 0;
echo(inf,nan);
</pre>
<p>The value 'nan' is the only OpenSCAD value that is not equal to any other value, including itself. Although you can test if a variable 'x' has the undefined value using 'x == undef', you can't use 'x == 0/0' to test if x is Not A Number. Instead, you must use 'x != x' to test if x is nan.
</p>
<h4>Boolean Values</h4>
<p>Booleans are truth values. There are two Boolean values, namely <code>true</code> and <code>false</code>. 
A Boolean is passed as the argument to conditional statement 'if()'. conditional operator '? :', 
and logical operators '!' (not), '&amp;&amp;' (and), and '||' (or).  In all of these contexts, you can actually 
pass any quantity. Most values are converted to 'true' in a Boolean context, the values that count as 'false' are:
</p>
<ul style="list-style-image:none"><li>false</li>
<li>0 and -0</li>
<li>""</li>
<li>[]</li>
<li>undef</li></ul>
<p>Note that <code>"false"</code> (the string), <code>[0]</code> (a numeric vector), 
<code>[ [] ]</code> (a vector containing an empty vector), <code>[false]</code> 
(a vector containing the Boolean value false) and 0/0 (Not A Number) all count as true.
</p>
<h4>Strings</h4>
<p>A string is a sequence of zero or more unicode characters. String values are used to specify file names when importing a file, and to display text for debugging purposes when using echo(). Strings can also be used with the <a href="Text.html" title="OpenSCAD User Manual/Text">new <b>text()</b> primitive</a> added in <b>2015.03</b>.
</p><p>A string literal is written as a sequence of characters enclosed in quotation marks <code>"</code>, like this: <code>""</code> (an empty string), or <code>"this is a string"</code>.
</p><p>To include a <code>"</code> character in a string literal, use <code>\"</code>. To include a <code>\</code> character in a string literal, use <code>\\</code>. The following escape sequences beginning with <code>\</code> can be used within string literals:
</p>
<ul style="list-style-image:none"><li>\" → "</li>
<li>\\ → \</li>
<li>\t → tab</li>
<li>\n → newline</li>
<li>\r → carriage return</li>
<li>\u03a9 → Ω - see <b>text()</b> for further information on unicode characters</li></ul>
<p>Note: This behavior is new since OpenSCAD-2011.04. You can upgrade old files using the following sed command: <tt>sed 's/\\/\\\\/g' non-escaped.scad &gt; escaped.scad</tt>
</p>
<pre> <b>Example:</b>
  
 echo("The quick brown fox \tjumps \"over\" the lazy dog.\rThe quick brown fox.\nThe \\lazy\\ dog.");
  
 <b>result</b><br/>
   ECHO: "The quick brown fox     jumps "over" the lazy dog.
   The quick brown fox.
   The \lazy\ dog."
  
 <b>old result</b>
   ECHO: "The quick brown fox \tjumps \"over\" the lazy dog.
   The quick brown fox.\nThe \\lazy\\ dog."
</pre>
<h4>Ranges</h4>
<p>Ranges are used by <a href="Conditional_and_Iterator_Functions.html#For_Loop" title="OpenSCAD User Manual/Conditional and Iterator Functions"> for() loops</a> and <a href="User-Defined_Functions_and_Modules.html#Children" title="OpenSCAD User Manual/User-Defined Functions and Modules">children()</a>. They have 2 varieties:
</p>
<dl><dd>[&lt;<i>start</i>&gt;:&lt;<i>end</i>&gt;]</dd>
<dd>[&lt;<i>start</i>&gt;:&lt;<i>increment</i>&gt;:&lt;<i>end</i>&gt;]</dd></dl>
<p>Although enclosed in square brackets [] , they are not vectors. They use colons : for separators rather than commas.
</p>
<pre>r1 = [0:10];
r2 = [0.5:2.5:20];
echo(r1); // ECHO: [0: 1: 10]
echo(r2); // ECHO: [0.5: 2.5: 20]
</pre>
<p>You should avoid step values that cannot be represented exactly as binary floating point numbers. Integers are okay, as are fractional values whose denominator is a power of two. For example, 0.25 (1/4) and 0.125 (1/8) are safe, but 0.2 (2/10) should be avoided. The problem with these step values is that your range may have too many or too few elements, due to inexact arithmetic.
</p><p>A missing &lt;<i>increment</i>&gt; defaults to 1. A range in the form  [&lt;<i>start</i>&gt;:&lt;<i>end</i>&gt;] with &lt;<i>start</i>&gt; greater than &lt;<i>end</i>&gt; generates a warning and is equivalent to [&lt;<i>end</i>&gt;: 1: &lt;<i>start</i>&gt;]. A range in the form  [&lt;<i>start</i>&gt;:1:&lt;<i>end</i>&gt;] with &lt;<i>start</i>&gt; greater than &lt;<i>end</i>&gt; does not generate a warning and is equivalent to []. The &lt;<i>increment</i>&gt; in a range may be negative (for versions after 2014).
</p>
<h4>The Undefined Value</h4>
<p>The undefined value is a special value written as <b>undef</b>. It's the initial value of a variable that hasn't been assigned a value, and it is often returned as a result by functions or operations that are passed illegal arguments. Finally, <code>undef</code> can be used as a null value, equivalent to <code>null</code> or <code>NULL</code> in other programming languages.
</p><p>All arithmetic expressions containing <code>undef</code> values evaluate as <code>undef</code>. In logical expressions, <code>undef</code> is equivalent to <code>false</code>. Relational operator expressions with <code>undef</code> evaluate as <code>false</code> except for <code>undef==undef</code> which is <code>true</code>.
</p><p>Note that numeric operations may also return 'nan' (not-a-number) to indicate an illegal argument. For example, <code>0/false</code> is <code>undef</code>, but <code>0/0</code> is 'nan'. Relational operators like &lt; and &gt; return <code>false</code> if passed illegal arguments. Although <code>undef</code> is a language value, 'nan' is not.
</p>
<h3>Variables</h3>
<hr/>
<p>OpenSCAD variables are created by a statement with a name or <a class="extiw" href="https://en.wikipedia.org/wiki/Identifier_(computer_programming)" title="w:Identifier (computer programming)">identifier</a>, assignment via an expression and a semicolon. The role of arrays, found in many imperative languages, is handled in OpenSCAD via vectors.
</p>
<pre>var = 25;
xx = 1.25 * cos(50);
y = 2*xx+var;
logic = true;
MyString = "This is a string";
a_vector = [1,2,3];
rr = a_vector[2];      // member of vector
range1 = [-1.5:0.5:3]; // for() loop range
xx = [0:5];            // alternate for() loop range
</pre>
<p>OpenSCAD is a <a class="extiw" href="https://en.wikipedia.org/wiki/Functional_programming" title="w:Functional programming"> Functional</a> programming language, as such <a class="extiw" href="https://en.wikipedia.org/wiki/Variable_(computer_science))" title="w:Variable (computer science))">variables</a> are bound to expressions and keep a single value during their entire lifetime due to the requirements of <a class="extiw" href="https://en.wikipedia.org/wiki/Referential_transparency_(computer_science)" title="w:Referential transparency (computer science)">referential transparency</a>. In <a class="extiw" href="https://en.wikipedia.org/wiki/Imperative_programming" title="w:Imperative programming">imperative languages</a>, such as C, the same behavior is seen as constants, which are typically contrasted with normal variables. 
</p><p>In other words OpenSCAD variables are more like constants, but with an important difference. If variables are assigned a value multiple times, only the last assigned value is used in all places in the code. See further discussion at <a href="#Variables_are_set_at_compile-time,_not_run-time">Variables are set at compile-time, not run-time</a>.  This behavior is due to the need to supply variable input on the <a href="Using_OpenSCAD_in_a_command_line_environment.html" title="OpenSCAD User Manual/Using OpenSCAD in a command line environment">command line</a>, via the use of <i>-D variable=value</i> option. OpenSCAD currently places that assignment at the end of the source code, and thus must allow a variable's value to be changed for this purpose.
</p><p>Values cannot be modified during run time; all variables are effectively constants that do not change. Each variable retains its last assigned value at compile time, in line with <a class="extiw" href="https://en.wikipedia.org/wiki/Functional_programming" title="w:Functional programming">Functional</a> programming languages. Unlike <a class="extiw" href="https://en.wikipedia.org/wiki/Imperative_programming" title="w:Imperative programming">Imperative</a> languages, such as C, OpenSCAD is not an iterative language, and as such the concept of <i>x = x + 1</i> is not valid. Understanding this concept leads to understanding the beauty of OpenSCAD.
</p>
<dl><dd><b>Before version 2015.03</b></dd></dl>
<p>It was not possible to do assignments at any place except the file top-level and module top-level. Inside an <i>if/else</i>  or <i>for</i>  loop, assign() was needed.
</p>
<dl><dd><b>Since version 2015.03</b></dd></dl>
<p>Variables can now be assigned in any scope. Note that assignments are only valid within the scope in which they are defined - you are still not allowed to leak values to an outer scope. See <a href="#Scope_of_variables">Scope of variables</a> for more details.
</p>
<pre>a=0;
if (a==0) 
  {
 a=1; //  before 2015.03 this line would generate a Compile Error
      //  since 2015.03  no longer an error, but the value a=1 is confined to within the braces {}
  }
</pre>
<h4>Undefined variable</h4>
<p>A non assigned variable has the special value <b>undef</b>.
It could be tested in conditional expression, and returned by a function.
</p>
<pre> <b>Example</b>
  
 echo("Variable a is ", a);                // Variable a is undef
 if (a==undef) {
   echo("Variable a is tested undefined"); // Variable a is tested undefined
 }
</pre>
<h4>Scope of variables</h4>
<p>When operators such as translate() and color() need to encompass more than one action ( actions end in ;), braces {} are needed to group the actions, creating a new, inner scope.
When there is only one semicolon, braces are usually optional.
</p><p>Each pair of braces creates a new scope inside the scope where they were used. <b>Since 2015.03</b>, new variables can be created within this new scope. New values can be given to variables which were created in an outer scope . 
These variables and their values are also available to further inner scopes created within this scope, but are <b>not available</b> to any thing outside this scope. Variables still have only the last value assigned within a scope.
</p>
<pre>                       // scope 1
 a = 6;                // create a
 echo(a,b);            //                6, undef
 translate([5,0,0]){   // scope 1.1
   a= 10;
   b= 16;              // create b
   echo(a,b);          //              100, 16   a=10; was overridden by later a=100;
   color("blue") {     // scope 1.1.1
     echo(a,b);        //              100, 20
     cube();
     b=20;
   }                   // back to 1.1
   echo(a,b);          //              100, 16
   a=100;              // override a in 1.1
 }                     // back to 1   
 echo(a,b);            //                6, undef
 color("red"){         // scope 1.2
   cube();
   echo(a,b);          //                6, undef
 }                     // back to 1
 echo(a,b);            //                6, undef
  
 //In this example, scopes 1 and 1.1 are outer scopes to 1.1.1 but 1.2 is not.
</pre>
<dl><dd><b>Anonymous scopes</b> are not considered scopes:</dd></dl>
<pre> {
   angle = 45;
 }
 rotate(angle) square(10);
</pre>
<p>For() loops are not an exception to the rule about variables having only one value within a scope. A copy of loop contents is created for each pass. Each pass is given its own scope, allowing any variables to have unique values for that pass. No, you still can't do a=a+1;
</p>
<h4>Variables are set at compile-time, not run-time</h4>
<p>Because OpenSCAD calculates its variable values at compile-time, not run-time, the last variable assignment, within a scope apply everywhere  in that scope, or inner scopes thereof. It may be helpful to think of them as override-able constants rather than as variables. 
</p>
<pre>// The value of 'a' reflects only the last set value
   a = 0;
   echo(a);  // 5
   a = 3;
   echo(a);  // 5
   a = 5;
</pre>
<p>While this appears to be counter-intuitive, it allows you to do some interesting things: for instance, if you set up your shared library files to have default values defined as variables at their root level, when you include that file in your own code, you can 're-define' or override those constants by simply assigning a new value to them. So changing constant values gives you more flexibility. If constants would never change, of course, you always can be sure having the value you see in any constant definition. Not so here, if you see a constant value definition at any other place this value could be different. Very flexible.
</p>
<h4>Special Variables</h4>
<p>Special variables provide an alternate means of passing arguments to modules and functions.
All variables starting with a '$' are special variables, similar to special variables in lisp.
As such they are more dynamic than regular variables.
(for more details see <a href="Other_Language_Features.html#Special_variables" title="OpenSCAD User Manual/Other Language Features">Other Language Features</a>)
</p>
<h3>Vectors</h3>
<hr/>
<p>A vector or list is a sequence of zero or more OpenSCAD values. Vectors are a collection of numeric or boolean values, variables, vectors, strings or any combination thereof. They can also be expressions which evaluate to one of these. Vectors handle the role of arrays found in many imperative languages.
The information here also applies to lists and tables which use vectors for their data.
</p><p>A vector has square brackets, [] enclosing zero or more items (elements or members), separated by commas. A vector can contain vectors, which contain vectors, etc.
</p><p><br/>
</p>
<dl><dd><b>examples</b></dd></dl>
<pre>   [1,2,3]
   [a,5,b]
   []
   [5.643]
   ["a","b","string"]
   [[1,r],[x,y,z,4,5]]
   [3, 5, [6,7], [[8,9],[10,[11,12],13], c, "string"]
   [4/3, 6*1.5, cos(60)]
</pre>
<p>use in OpenSCAD:
</p>
<pre>  cube( [width,depth,height] );           // optional spaces shown for clarity
  translate( [x,y,z] )
  polygon( [ [x<sub>0</sub>,y<sub>0</sub>],  [x<sub>1</sub>,y<sub>1</sub>],  [x<sub>2</sub>,y<sub>2</sub>] ] );
</pre>
<dl><dd><b>creation</b></dd></dl>
<p>Vectors are created by writing the list of elements, separated by commas, and enclosed in square brackets. Variables are replaced by their values.
</p>
<pre>  cube([10,15,20]);
  a1 = [1,2,3];
  a2 = [4,5];
  a3 = [6,7,8,9];
  b  = [a1,a2,a3];    // [ [1,2,3], [4,5], [6,7,8,9] ]  note increased nesting depth
</pre>
<h5>Indexing elements within vectors</h5>
<hr/>
<p>Elements within vectors are numbered from 0 to n-1 where n is the length returned by <a href="#len">len()</a>.
Address elements within vectors with the following notation:
</p>
<pre>e[5]           // element no 5 (sixth) at   1st nesting level
e[5][2]        // element 2 of element 5    2nd nesting level
e[5][2][0]     // element 0 of 2 of 5       3rd nesting level
e[5][2][0][1]  // element 1 of 0 of 2 of 5  4th nesting level
</pre>
<div id="example1"> example elements with lengths from len()</div>
<pre>e = [ [1], [], [3,4,5], "string", "x", [[10,11],[12,13,14],[[15,16],[17]]] ];  // length 6

address       length  element
e[0]          1       [1]
e[1]          0       []
e[5]          3       [ [10,11], [12,13,14], [[15,16],[17]] ]
e[5][1]       3       [ 12, 13, 14 ]
e[5][2]       2       [ [15,16], [17] ]
e[5][2][0]    2       [ 15, 16 ]
e[5][2][0][1] undef   16
    
e[3]          6       "string"
e[3 ][2]      1       "r"
  
s = [2,0,5]; a = 2;
s[a]          undef   5
e[s[a]]       3       [ [10,11], [12,13,14], [[15,16],[17]] ]
</pre>
<p><br/>
</p>
<h5>Dot notation indexing</h5>
<hr/>
<p>The first three elements of a vector can be accessed with an alternate dot notation:
</p>
<pre>e.x    //equivalent to e[0]
e.y    //equivalent to e[1]
e.z    //equivalent to e[2]
</pre>
<h5>Vector operators</h5>
<hr/>
<h6>concat</h6>
<p><span style="font-weight: bold; font-style: normal;">[<span style="color: #A00000;">Note:</span> <span style="font-weight: normal; font-style: italic;">Requires version <span style="font-weight: bold;">2015.03</span></span>]</span>
</p><p>concat() combines the elements of 2 or more vectors into a single vector. No change in nesting level is made.
</p>
<pre> vector1 = [1,2,3]; vector2 = [4]; vector3 = [5,6];
 new_vector = concat(vector1, vector2, vector3); // [1,2,3,4,5,6]
  
 string_vector = concat("abc","def");                 // ["abc", "def"]
 one_string = str(string_vector[0],string_vector[1]); // "abcdef"
</pre>
<h6>len</h6>
<p>len() is a function which returns the length of vectors or strings. 
Indices of elements are from [0] to [length-1].
</p>
<dl><dd><b>vector</b>
<dl><dd>Returns the number of elements at this level.</dd>
<dd>Single values, which are <b>not</b> vectors, return <b>undef</b>.</dd></dl></dd>
<dd><b>string</b>
<dl><dd>Returns the number of characters in string.</dd></dl></dd></dl>
<pre> a = [1,2,3]; echo(len(a));   //  3
</pre>
<p><a href="#example1">See example elements with lengths</a>
</p>
<h5>Matrix</h5>
<p>A matrix is a vector of vectors.
</p>
<pre>Example which defines a 2D rotation matrix
mr = [
     [cos(angle), -sin(angle)],
     [sin(angle),  cos(angle)]
    ];
</pre>
<h3>Getting input</h3>
<hr/>
<p>Now we have variables, it would be nice to be able to get input into them instead of setting the values from code. There are a few functions to read data from DXF files, or you can set a variable with the -D switch on the command line.
</p><p><b>Getting a point from a drawing</b>
</p><p>Getting a point is useful for reading an origin point in a 2D view in a technical drawing. The function dxf_cross reads the intersection of two lines on a layer you specify and returns the intersection point. This means that the point must be given with two lines in the DXF file, and not a point entity.
</p>
<pre>OriginPoint = dxf_cross(file="drawing.dxf", layer="SCAD.Origin", 
                        origin=[0, 0], scale=1);
</pre>
<p><b>Getting a dimension value</b>
</p><p>You can read dimensions from a technical drawing. This can be useful to read a rotation angle, an extrusion height, or spacing between parts. In the drawing, create a dimension that does not show the dimension value, but an identifier. To read the value, you specify this identifier from your program:
</p>
<pre>TotalWidth = dxf_dim(file="drawing.dxf", name="TotalWidth",
                        layer="SCAD.Origin", origin=[0, 0], scale=1);
</pre>
<p>For a nice example of both functions, see Example009 and the image on the <a class="external text" href="http://www.openscad.org/" rel="nofollow">homepage of OpenSCAD</a>.
</p>
<p style="page-break-after:always;"></p>
<h1>Chapter 2 -- 3D Objects</h1>
<p><big>OpenSCAD User Manual/The OpenSCAD Language</big>
</p>
<h2> <a href="Primitive_Solids.html" title="OpenSCAD User Manual/Primitive Solids">Primitive Solids</a></h2>
<h3>cube</h3>
<hr/>
<p>Creates a cube in the first octant. When center is true, the cube is centered on the origin. Argument names are optional if given in the order shown here.
</p>
<pre>cube(size = [x,y,z], center = true/false);
cube(size =  x ,     center = true/false);
</pre>
<dl><dd><b> parameters</b>:</dd></dl>
<dl><dd><dl><dd><b>size</b>
<dl><dd>single value, cube with all sides this length</dd>
<dd>3 value array [x,y,z], cube with dimensions x, y and z.</dd></dl></dd>
<dd><b>center</b>
<dl><dd><b>false</b> (default), 1st (positive) octant, one corner at (0,0,0)</dd>
<dd><b>true</b>, cube is centered at (0,0,0)</dd></dl></dd></dl></dd></dl>
<pre>default values:  cube();   yields:  cube(size = [1, 1, 1], center = false);
</pre>
<dl><dd><b> examples</b>:</dd></dl>
<p><a class="image" href="./imgs/150px-OpenSCAD_example_Cube.jpg"><img alt="OpenSCAD example Cube.jpg" data-file-height="246" data-file-width="258" decoding="async" height="143" src="./imgs/150px-OpenSCAD_example_Cube.jpg" width="150"/></a>
</p>
<pre>equivalent scripts for this example
 cube(size = 18);
 cube(18);
 cube([18,18,18]);
 .
 cube(18,false);
 cube([18,18,18],false);
 cube([18,18,18],center=false);
 cube(size = [18,18,18], center = false);
 cube(center = false,size = [18,18,18] );
</pre>
<p><a class="image" href="./imgs/150px-OpenSCAD_example_Box.jpg"><img alt="OpenSCAD example Box.jpg" data-file-height="206" data-file-width="246" decoding="async" height="126" src="./imgs/150px-OpenSCAD_example_Box.jpg" width="150"/></a>
</p>
<pre>equivalent scripts for this example
 cube([18,28,8],true);
 box=[18,28,8];cube(box,true);
</pre>
<h3>sphere</h3>
<hr/>
<p>Creates a sphere at the origin of the coordinate system. The r argument name is optional. To use d instead of r, d must be named.
</p><p><b>Parameters</b>
</p>
<dl><dt>r</dt>
<dd>Radius.  This is the radius of the sphere.  The resolution of the sphere is based on the size of the sphere and the $fa, $fs and $fn variables. For more information on these special variables look at: <a href="Other_Language_Features.html" title="OpenSCAD User Manual/Other Language Features">OpenSCAD_User_Manual/Other_Language_Features</a></dd>
<dt>d</dt>
<dd>Diameter.  This is the diameter of the sphere.</dd>
<dt>$fa</dt>
<dd>Fragment angle in degrees</dd>
<dt>$fs</dt>
<dd>Fragment size in mm</dd>
<dt>$fn</dt>
<dd>Resolution</dd></dl>
<pre> default values:  sphere();   yields:   sphere($fn = 0, $fa = 12, $fs = 2, r = 1);
</pre>
<p><b>Usage Examples</b>
</p>
<pre>sphere(r = 1);
sphere(r = 5);
sphere(r = 10);
sphere(d = 2);
sphere(d = 10);
sphere(d = 20);
</pre>
<pre>// this creates a high resolution sphere with a 2mm radius
sphere(2, $fn=100); 
</pre>
<pre>// also creates a 2mm high resolution sphere but this one 
// does not have as many small triangles on the poles of the sphere
sphere(2, $fa=5, $fs=0.1); 
</pre>
<p><a class="image" href="./imgs/OpenSCAD_sphere_in_different_sizes.png" title="Sample OpenSCAD spheres, showing clearly the difference in scale."><img alt="Sample OpenSCAD spheres, showing clearly the difference in scale." data-file-height="506" data-file-width="959" decoding="async" height="506" src="./imgs/OpenSCAD_sphere_in_different_sizes.png" width="959"/></a>
</p>
<h3>cylinder</h3>
<hr/>
<p>Creates a cylinder or cone centered about the z axis. When center is true, it is also centered vertically along the z axis.
</p><p>Parameter names are optional if given in the order shown here. If a parameter is named, all following parameters must also be named.
</p><p>NOTE: If r, d, d1 or d2 are used they must be named.
</p>
<pre>cylinder(h = height, r1 = BottomRadius, r2 = TopRadius, center = true/false);
</pre>
<dl><dd><b>Parameters</b></dd></dl>
<dl><dd><dl><dd><b>h</b> : height of the cylinder or cone</dd>
<dd><b>r </b> : radius of cylinder. r1 = r2 = r.</dd>
<dd><b>r1</b> : radius, bottom of cone.</dd>
<dd><b>r2</b> : radius, top of cone.</dd>
<dd><b>d </b> : diameter of cylinder. r1 = r2 = d / 2. <span style="font-weight: bold; font-style: normal;">[<span style="color: #A00000;">Note:</span> <span style="font-weight: normal; font-style: italic;">Requires version <span style="font-weight: bold;">2014.03</span></span>]</span></dd>
<dd><b>d1</b> : diameter, bottom of cone. r1 = d1 / 2. <span style="font-weight: bold; font-style: normal;">[<span style="color: #A00000;">Note:</span> <span style="font-weight: normal; font-style: italic;">Requires version <span style="font-weight: bold;">2014.03</span></span>]</span></dd>
<dd><b>d2</b> : diameter, top of cone. r2 = d2 / 2. <span style="font-weight: bold; font-style: normal;">[<span style="color: #A00000;">Note:</span> <span style="font-weight: normal; font-style: italic;">Requires version <span style="font-weight: bold;">2014.03</span></span>]</span></dd>
<dd><b>center</b>
<dl><dd><b>false</b> (default), z ranges from 0 to h</dd>
<dd><b>true</b>,  z ranges from -h/2 to +h/2</dd></dl></dd>
<dd><b>$fa</b> : minimum angle (in degrees) of each fragment.</dd>
<dd><b>$fs</b> : minimum circumferential length of each fragment.</dd>
<dd><b>$fn</b> : <b>fixed</b> number of fragments in 360 degrees. Values of 3 or more override $fa and $fs
<dl><dd>$fa, $fs and $fn must be named parameters. <a href="Other_Language_Features.html" title="OpenSCAD User Manual/Other Language Features">click here for more details,</a>.</dd></dl></dd></dl></dd></dl>
<pre>defaults: cylinder();  yields: cylinder($fn = 0, $fa = 12, $fs = 2, h = 1, r1 = 1, r2 = 1, center = false);
</pre>
<p><a class="image" href="./imgs/200px-OpenSCAD_Cone_15x10x20.jpg"><img alt="OpenSCAD Cone 15x10x20.jpg" data-file-height="276" data-file-width="339" decoding="async" height="163" src="./imgs/200px-OpenSCAD_Cone_15x10x20.jpg" width="200"/></a>
</p>
<pre>equivalent scripts
 cylinder(h=15, r1=9.5, r2=19.5, center=false);
 cylinder(  15,    9.5,    19.5, false);
 cylinder(  15,    9.5,    19.5);
 cylinder(  15,    9.5, d2=39  );
 cylinder(  15, d1=19,  d2=39  );
 cylinder(  15, d1=19,  r2=19.5);
</pre>
<p><a class="image" href="./imgs/200px-OpenSCAD_Cone_15x10x0.jpg"><img alt="OpenSCAD Cone 15x10x0.jpg" data-file-height="191" data-file-width="248" decoding="async" height="154" src="./imgs/200px-OpenSCAD_Cone_15x10x0.jpg" width="200"/></a>
</p>
<pre>equivalent scripts
 cylinder(h=15, r1=10, r2=0, center=true);
 cylinder(  15,    10,    0,        true);
 cylinder(h=15, d1=20, d2=0, center=true);
</pre>
<ul class="gallery mw-gallery-traditional" style="list-style-image:none">
		<li class="gallerybox" style="width: 155px"><div style="width: 155px">
			<div class="thumb" style="width: 150px;"><div style="margin:15px auto;"><a class="image" href="./imgs/112px-OpenSCAD_Cylinder_20x10_false.jpg"><img alt="" data-file-height="330" data-file-width="307" decoding="async" height="120" src="./imgs/112px-OpenSCAD_Cylinder_20x10_false.jpg" width="112"/></a></div></div>
			<div class="gallerytext">
<p>center = false
</p>
			</div>
		</div></li>
		<li class="gallerybox" style="width: 155px"><div style="width: 155px">
			<div class="thumb" style="width: 150px;"><div style="margin:15px auto;"><a class="image" href="./imgs/100px-OpenSCAD_Cylinder_20x10_true.jpg"><img alt="" data-file-height="341" data-file-width="284" decoding="async" height="120" src="./imgs/100px-OpenSCAD_Cylinder_20x10_true.jpg" width="100"/></a></div></div>
			<div class="gallerytext">
<p>center = true
</p>
			</div>
		</div></li>
</ul>
<pre>equivalent scripts
 cylinder(h=20, r=10, center=true);
 cylinder(  20,   10, 10,true);
 cylinder(  20, d=20, center=true);
 cylinder(  20,r1=10, d2=20, center=true);
 cylinder(  20,r1=10, d2=2*10, center=true);
</pre>
<dl><dd><b>use of $fn</b></dd></dl>
<p>Larger values of $fn create smoother, more circular, surfaces at the cost of longer rendering time. Some use medium values during development for the faster rendering, then change to a larger value for the final F6 rendering. 
</p><p>However, use of small values can produce some interesting non circular objects. A few examples are show here:
</p>
<ul class="gallery mw-gallery-traditional" style="list-style-image:none">
		<li class="gallerybox" style="width: 155px"><div style="width: 155px">
			<div class="thumb" style="width: 150px;"><div style="margin:31px auto;"><a class="image" href="./imgs/120px-3_sided_fiqure.jpg"><img alt="3 sided fiqure.jpg" data-file-height="309" data-file-width="421" decoding="async" height="88" src="./imgs/120px-3_sided_fiqure.jpg" width="120"/></a></div></div>
			<div class="gallerytext">
			</div>
		</div></li>
		<li class="gallerybox" style="width: 155px"><div style="width: 155px">
			<div class="thumb" style="width: 150px;"><div style="margin:29.5px auto;"><a class="image" href="./imgs/120px-4_sided_pyramid.jpg"><img alt="4 sided pyramid.jpg" data-file-height="264" data-file-width="348" decoding="async" height="91" src="./imgs/120px-4_sided_pyramid.jpg" width="120"/></a></div></div>
			<div class="gallerytext">
			</div>
		</div></li>
		<li class="gallerybox" style="width: 155px"><div style="width: 155px">
			<div class="thumb" style="width: 150px;"><div style="margin:23px auto;"><a class="image" href="./imgs/120px-4_sided_part_pyramid.jpg"><img alt="4 sided part pyramid.jpg" data-file-height="297" data-file-width="343" decoding="async" height="104" src="./imgs/120px-4_sided_part_pyramid.jpg" width="120"/></a></div></div>
			<div class="gallerytext">
			</div>
		</div></li>
</ul>
<pre>scripts for these examples
 cylinder(20,20,20,$fn=3);
 cylinder(20,20,00,$fn=4);
 cylinder(20,20,10,$fn=4);
</pre>
<dl><dd><b>undersized holes</b></dd></dl>
<p>Using cylinder() with difference() to place holes in objects creates undersized holes. This is because circular paths are approximated with polygons inscribed within in a circle. The points of the polygon are on the circle, but straight lines between are inside. To have all of the hole larger than the true circle, the polygon must lie wholly outside of the circle (circumscribed). <a href="undersized_circular_objects.html" title="OpenSCAD User Manual/undersized circular objects">Modules for circumscribed holes</a>
</p>
<ul class="gallery mw-gallery-traditional" style="list-style-image:none">
		<li class="gallerybox" style="width: 155px"><div style="width: 155px">
			<div class="thumb" style="width: 150px;"><div style="margin:18px auto;"><a class="image" href="./imgs/120px-OpenSCAD_Under_size_hole.jpg"><img alt="OpenSCAD Under size hole.jpg" data-file-height="465" data-file-width="488" decoding="async" height="114" src="./imgs/120px-OpenSCAD_Under_size_hole.jpg" width="120"/></a></div></div>
			<div class="gallerytext">
			</div>
		</div></li>
</ul>
<pre>script for this example
 poly_n = 6;
 color("blue") translate([0, 0, 0.02]) linear_extrude(0.1) circle(10, $fn=poly_n);
 color("green") translate([0, 0, 0.01]) linear_extrude(0.1) circle(10, $fn=360);
 color("purple") linear_extrude(0.1) circle(10/cos(180/poly_n), $fn=poly_n);
</pre>
<h3>polyhedron</h3>
<hr/>
<p>A polyhedron is the most general 3D primitive solid. It can be used to create any regular or irregular shape including those with concave as well as convex features. Curved surfaces are approximated by a series of flat surfaces.
</p>
<pre>polyhedron( points = [ [X<sub>0</sub>, Y<sub>0</sub>, Z<sub>0</sub>], [X<sub>1</sub>, Y<sub>1</sub>, Z<sub>1</sub>], ... ], triangles = [ [P<sub>0</sub>, P<sub>1</sub>, P<sub>2</sub>], ... ], convexity = N);   // before 2014.03
polyhedron( points = [ [X<sub>0</sub>, Y<sub>0</sub>, Z<sub>0</sub>], [X<sub>1</sub>, Y<sub>1</sub>, Z<sub>1</sub>], ... ], faces = [ [P<sub>0</sub>, P<sub>1</sub>, P<sub>2</sub>, P<sub>3</sub>, ...], ... ], convexity = N);   // 2014.03 &amp; later
</pre>
<dl><dd><b>Parameters</b>
<dl><dd><b>points</b>
<dl><dd>Vector of 3d points or vertices. Each point is in turn a vector, [x,y,z], of its coordinates.</dd>
<dd>Points may be defined in any order. N points are referenced, in the order defined, as 0 to N-1.</dd></dl></dd></dl></dd></dl>
<dl><dd><dl><dd><b>triangles</b> [<i><span style="font-weight: bold; color: #A00000;">Deprecated:</span> <b>triangles</b> will be removed in future releases. Use <b>faces</b> parameter instead</i>]
<dl><dd>Vector of faces that collectively enclose the solid. Each face is a vector containing the indices (0 based) of 3 points from the points vector.</dd></dl></dd></dl></dd></dl>
<dl><dd><dl><dd><b>faces</b> <span style="font-weight: bold; font-style: normal;">[<span style="color: #A00000;">Note:</span> <span style="font-weight: normal; font-style: italic;">Requires version <span style="font-weight: bold;">2014.03</span></span>]</span>
<dl><dd>Vector of faces that collectively enclose the solid. Each face is a vector containing the indices (0 based) of 3 or more points from the points vector.</dd>
<dd>Faces may be defined in any order. Define enough faces to fully enclose the solid, with no overlap.</dd>
<dd>If points that describe a single face are not on the same plane, the face is automatically split into triangles as needed.</dd></dl></dd></dl></dd></dl>
<dl><dd><dl><dd><b>convexity</b>
<dl><dd>Integer. The convexity parameter specifies the maximum number of faces a ray intersecting the object might penetrate. This parameter is needed only for correct display of the object in OpenCSG preview mode. It has no effect on the polyhedron rendering. For display problems, setting it to 10 should work fine for most cases.</dd></dl></dd></dl></dd></dl>
<pre> default values: polyhedron(); yields: polyhedron(points = undef, faces = undef, convexity = 1);
</pre>
<p><br/>
</p><p>It is arbitrary which point you start with, but all faces must have points ordered in the same direction . OpenSCAD prefers <b>clockwise</b> when looking at each face from outside <b>inward</b>. The back is viewed from the back, the bottom from the bottom, etc. Another way to remember this ordering requirement is to use the right-hand rule. Using your right-hand, stick your thumb up and curl your fingers as if giving the thumbs-up sign, point your thumb into the face, and order the points in the direction your fingers curl.  Try this on the example below.
</p><p><br/>
</p>
<dl><dd><b>Example 1</b> Using polyhedron to generate cube( [ 10, 7, 5 ] );</dd></dl>
<div class="thumb tleft"><div class="thumbinner" style="width:311px;"><a class="image" href="./imgs/Cube_numbers.jpg"><img alt="" class="thumbimage" data-file-height="307" data-file-width="309" decoding="async" height="307" src="./imgs/Cube_numbers.jpg" width="309"/></a>  <div class="thumbcaption">point numbers for cube</div></div></div>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:513px;"><a class="image" href="./imgs/Cube_flat.jpg"><img alt="" class="thumbimage" data-file-height="310" data-file-width="511" decoding="async" height="310" src="./imgs/Cube_flat.jpg" width="511"/></a>  <div class="thumbcaption">unfolded cube faces</div></div></div></div> 
<pre>CubePoints = [
  [  0,  0,  0 ],  //0
  [ 10,  0,  0 ],  //1
  [ 10,  7,  0 ],  //2
  [  0,  7,  0 ],  //3
  [  0,  0,  5 ],  //4
  [ 10,  0,  5 ],  //5
  [ 10,  7,  5 ],  //6
  [  0,  7,  5 ]]; //7
  
CubeFaces = [
  [0,1,2,3],  // bottom
  [4,5,1,0],  // front
  [7,6,5,4],  // top
  [5,6,2,1],  // right
  [6,7,3,2],  // back
  [7,4,0,3]]; // left
  
polyhedron( CubePoints, CubeFaces );
</pre>
<pre>equivalent descriptions of the bottom face
  [0,1,2,3],
  [0,1,2,3,0],
  [1,2,3,0],
  [2,3,0,1],
  [3,0,1,2],
  [0,1,2],[2,3,0],   // 2 triangles with no overlap
  [1,2,3],[3,0,1],
  [1,2,3],[0,1,3],
</pre>
<dl><dd><b>Example 2</b>  A square base pyramid:</dd></dl>
<div class="thumb tnone"><div class="thumbinner" style="width:362px;"><a class="image" href="./imgs/Openscad-polyhedron-squarebasepyramid.png"><img alt="" class="thumbimage" data-file-height="354" data-file-width="360" decoding="async" height="354" src="./imgs/Openscad-polyhedron-squarebasepyramid.png" width="360"/></a>  <div class="thumbcaption">A simple polyhedron, square base pyramid</div></div></div>
<pre>polyhedron(
  points=[ [10,10,0],[10,-10,0],[-10,-10,0],[-10,10,0], // the four points at base
           [0,0,10]  ],                                 // the apex point 
  faces=[ [0,1,4],[1,2,4],[2,3,4],[3,0,4],              // each triangle side
              [1,0,3],[2,1,3] ]                         // two triangles for square base
 );
</pre>
<dl><dd><b>Example 3</b>  A triangular prism:</dd></dl>
<div class="thumb tnone"><div class="thumbinner" style="width:602px;"><a class="image" href="./imgs/600px-Polyhedron_Prism.png"><img alt="" class="thumbimage" data-file-height="660" data-file-width="1847" decoding="async" height="214" src="./imgs/600px-Polyhedron_Prism.png" width="600"/></a>  <div class="thumbcaption">A polyhedron triangular prism</div></div></div>
<pre>   module prism(l, w, h){
       polyhedron(
               points=[[0,0,0], [l,0,0], [l,w,0], [0,w,0], [0,w,h], [l,w,h]],
               faces=[[0,1,2,3],[5,4,3,2],[0,4,5,1],[0,3,4],[5,2,1]]
               );
       
       // preview unfolded (do not include in your function
       z = 0.08;
       separation = 2;
       border = .2;
       translate([0,w+separation,0])
           cube([l,w,z]);
       translate([0,w+separation+w+border,0])
           cube([l,h,z]);
       translate([0,w+separation+w+border+h+border,0])
           cube([l,sqrt(w*w+h*h),z]);
       translate([l+border,w+separation+w+border+h+border,0])
           polyhedron(
                   points=[[0,0,0],[h,0,0],[0,sqrt(w*w+h*h),0], [0,0,z],[h,0,z],[0,sqrt(w*w+h*h),z]],
                   faces=[[0,1,2], [3,5,4], [0,3,4,1], [1,4,5,2], [2,5,3,0]]
                   );
       translate([0-border,w+separation+w+border+h+border,0])
           polyhedron(
                   points=[[0,0,0],[0-h,0,0],[0,sqrt(w*w+h*h),0], [0,0,z],[0-h,0,z],[0,sqrt(w*w+h*h),z]],
                   faces=[[1,0,2],[5,3,4],[0,1,4,3],[1,2,5,4],[2,0,3,5]]
                   );
       }
   
   prism(10, 5, 3);
</pre>
<h4>Debugging polyhedra</h4>
<hr/>
<p>Mistakes in defining polyhedra include not having all faces with the same order, overlap of faces and missing faces or portions of faces. As a general rule, the polyhedron faces should also satisfy manifold conditions:
</p>
<ul style="list-style-image:none"><li>exactly two faces should meet at any polyhedron edge.</li>
<li>if two faces have a vertex in common, they should be in the same cycle face-edge around the vertex.</li></ul>
<p>The first rule eliminates polyhedra like two cubes with a common edge and not watertight models; the second excludes polyhedra like two cubes with a common vertex.
</p><p>When viewed from the outside, the points describing each face must be in the same order . OpenSCAD prefers CW, and provides a mechanism for detecting CCW.
When the thrown together view (F12) is used with F5, CCW faces are shown in pink. Reorder the points for incorrect faces. Rotate the object to view all faces. The pink view can be turned off with F10.
</p><p>OpenSCAD allows, temporarily, commenting out part of the face descriptions so that only the remaining faces are displayed. Use // to comment out the rest of the line. Use /* and */ to start and end a comment block. This can be part of a line or extend over several lines. Viewing only part of the faces can be helpful in determining the right points for an individual face. Note that a solid is not shown, only the faces. If using F12, all faces have one pink side. Commenting some faces helps also to show any internal face.
</p><p><br/>
</p>
<div class="thumb tleft"><div class="thumbinner" style="width:185px;"><a class="image" href="./imgs/Cube_2_face.jpg"><img alt="" class="thumbimage" data-file-height="132" data-file-width="183" decoding="async" height="132" src="./imgs/Cube_2_face.jpg" width="183"/></a>  <div class="thumbcaption">example 1 showing only 2 faces</div></div></div>
<pre>CubeFaces = [
/* [0,1,2,3],  // bottom
   [4,5,1,0],  // front */
   [7,6,5,4],  // top
/* [5,6,2,1],  // right
   [6,7,3,2],  // back */
   [7,4,0,3]]; // left
</pre>
<p><br clear="all"/>
</p><p>After defining a polyhedron, its preview may seem correct. The polyhedron alone may even render fine. However, to be sure it is a valid manifold and that it can generate a valid STL file, union it with any cube and render it (F6). If the polyhedron disappears, it means that it is not correct. Revise the winding order of all faces and the two rules stated above.
</p>
<h4>Mis-ordered faces</h4>
<hr/>
<dl><dd><b>Example 4</b>  a more complex polyhedron with mis-ordered faces</dd></dl>
<p>When you select 'Thrown together' from the view menu and <b>compile</b> the design
(<b>not</b> compile and render!) the preview shows the mis-oriented polygons highlighted. Unfortunately this highlighting is not possible in the OpenCSG preview mode because it would interfere with the way the OpenCSG preview mode is implemented.)
</p><p>Below you can see the code and the picture of such a problematic polyhedron, the bad polygons (faces or compositions of faces) are in pink.
</p>
<pre>// Bad polyhedron
polyhedron
    (points = [
	       [0, -10, 60], [0, 10, 60], [0, 10, 0], [0, -10, 0], [60, -10, 60], [60, 10, 60], 
	       [10, -10, 50], [10, 10, 50], [10, 10, 30], [10, -10, 30], [30, -10, 50], [30, 10, 50]
	       ], 
     faces = [
		  [0,2,3],   [0,1,2],  [0,4,5],  [0,5,1],   [5,4,2],  [2,4,3],
                  [6,8,9],  [6,7,8],  [6,10,11], [6,11,7], [10,8,11],
		  [10,9,8], [0,3,9],  [9,0,6], [10,6, 0],  [0,4,10],
                  [3,9,10], [3,10,4], [1,7,11],  [1,11,5], [1,7,8],  
                  [1,8,2],  [2,8,11], [2,11,5]
		  ]
     );
</pre>
<div class="thumb tnone"><div class="thumbinner" style="width:356px;"><a class="image" href="./imgs/Openscad-bad-polyhedron.png"><img alt="" class="thumbimage" data-file-height="329" data-file-width="354" decoding="async" height="329" src="./imgs/Openscad-bad-polyhedron.png" width="354"/></a>  <div class="thumbcaption">Polyhedron with badly oriented polygons</div></div></div>
<p>A correct polyhedron would be the following:
</p>
<pre>polyhedron
    (points = [
	       [0, -10, 60], [0, 10, 60], [0, 10, 0], [0, -10, 0], [60, -10, 60], [60, 10, 60], 
	       [10, -10, 50], [10, 10, 50], [10, 10, 30], [10, -10, 30], [30, -10, 50], [30, 10, 50]
	       ], 
     faces = [
		  [0,3,2],  [0,2,1],  [4,0,5],  [5,0,1],  [5,2,4],  [4,2,3],
                  [6,8,9],  [6,7,8],  [6,10,11],[6,11,7], [10,8,11],
		  [10,9,8], [3,0,9],  [9,0,6],  [10,6, 0],[0,4,10],
                  [3,9,10], [3,10,4], [1,7,11], [1,11,5], [1,8,7],  
                  [2,8,1],  [8,2,11], [5,11,2]
		  ]
     );
</pre>
<dl><dt>Beginner's tip</dt>
<dd></dd></dl>
<p>If you don't really understand "orientation", try to identify the mis-oriented pink faces and then invert the sequence of the references to the points vectors until you get it right. E.g. in the above example, the third triangle (<i>[0,4,5]</i>) was wrong and we fixed it as <i>[4,0,5]</i>. Remember that a face list is a circular list. In addition, you may select "Show Edges" from the "View Menu", print a screen capture and number both the points and the faces.  In our example, the points are annotated in black and the faces in blue. Turn the object around and make a second copy from the back if needed. This way you can keep track.
</p>
<dl><dt>Clockwise Technique</dt>
<dd></dd></dl>
<p>Orientation is determined by clockwise circular indexing. This means that if you're looking at the triangle (in this case [4,0,5]) from the outside you'll see that the path is clockwise around the center of the face. The winding order [4,0,5] is clockwise and therefore good.  The winding order [0,4,5] is counter-clockwise and therefore bad. Likewise, any other clockwise order of [4,0,5] works: [5,4,0] &amp; [0,5,4] are good too. If you use the clockwise technique, you'll always have your faces outside (outside of OpenSCAD, other programs do use counter-clockwise as the outside though).
</p><p>Think of it as a Left Hand Rule:
</p><p>If you place your left hand on the face with your fingers curled in the direction of the order of the points, your thumb should point outward. If your thumb points inward, you need to reverse the winding order.
</p>
<div class="thumb tnone"><div class="thumbinner" style="width:395px;"><a class="image" href="./imgs/Openscad-bad-polyhedron-annotated.png"><img alt="" class="thumbimage" data-file-height="355" data-file-width="393" decoding="async" height="355" src="./imgs/Openscad-bad-polyhedron-annotated.png" width="393"/></a>  <div class="thumbcaption">Polyhedron with badly oriented polygons</div></div></div>
<p><br/>
Succinct description of a 'Polyhedron'
</p>
<pre>* Points define all of the points/vertices in the shape.
* Faces is a list of flat polygons that connect up the points/vertices. 
</pre>
<p>Each point, in the point list, is defined with a 3-tuple x,y,z position specification. Points in the point list are automatically enumerated starting from zero for use in the faces list (0,1,2,3,... etc).
</p><p>Each face, in the faces list, is defined by selecting 3 or more of the points (using the point order number) out of the point list.
</p><p>e.g. faces=[ [0,1,2] ] defines a triangle from the first point (points are zero referenced) to the second point and then to the third point.
</p><p>When looking at any face from the outside, the face must list all points in a clockwise order.
</p>
<h4>Point repetitions in a polyhedron point list</h4>
<p>The point list of the polyhedron definition may have repetitions. When two or more points have the same coordinates they are considered the same polyhedron vertex. So, the following polyhedron:
</p>
<pre>points = [[ 0, 0, 0], [10, 0, 0], [ 0,10, 0],
          [ 0, 0, 0], [10, 0, 0], [ 0,10, 0],
          [ 0,10, 0], [10, 0, 0], [ 0, 0,10],
          [ 0, 0, 0], [ 0, 0,10], [10, 0, 0],
          [ 0, 0, 0], [ 0,10, 0], [ 0, 0,10]];
polyhedron(points, [[0,1,2], [3,4,5], [6,7,8], [9,10,11], [12,13,14]]);
</pre>
<p>define the same tetrahedron as:
</p>
<pre>points = [[0,0,0], [0,10,0], [10,0,0], [0,0,10]];
polyhedron(points, [[0,2,1], [0,1,3], [1,2,3], [0,3,2]]);
</pre>
<p style="page-break-after:always;"></p>
<h2>3D to 2D Projection</h2>
<p>Using the <code>projection()</code> function, you can create 2d drawings from 3d models, and export them to the dxf format. It works by projecting a 3D model to the (x,y) plane, with z at 0. If <code>cut=true</code>, only points with z=0 are considered (effectively cutting the object), with <code>cut=false</code>(<i>the default</i>), points above and below the plane are considered as well (creating a proper projection).
</p><p><b>Example</b>: Consider example002.scad, that comes with OpenSCAD. 
</p><p><a class="image" href="./imgs/Openscad_projection_example_2x.png"><img alt="Openscad projection example 2x.png" data-file-height="286" data-file-width="482" decoding="async" height="286" src="./imgs/Openscad_projection_example_2x.png" width="482"/></a>
</p><p>Then you can do a 'cut' projection, which gives you the 'slice' of the x-y plane with z=0. 
</p>
<pre>projection(cut = true) example002();
</pre>
<p><a class="image" href="./imgs/Openscad_projection_example_3x.png"><img alt="Openscad projection example 3x.png" data-file-height="286" data-file-width="482" decoding="async" height="286" src="./imgs/Openscad_projection_example_3x.png" width="482"/></a>
</p><p>You can also do an 'ordinary' projection, which gives a sort of 'shadow' of the object onto the xy plane. 
</p>
<pre>projection(cut = false) example002();
</pre>
<p><a class="image" href="./imgs/Openscad_example_projection_8x.png"><img alt="Openscad example projection 8x.png" data-file-height="286" data-file-width="482" decoding="async" height="286" src="./imgs/Openscad_example_projection_8x.png" width="482"/></a>
</p><p><b>Another Example</b>
</p><p>You can also use projection to get a 'side view' of an object. Let's take example002, and move it up, out of the X-Y plane, and rotate it:
</p>
<pre>translate([0,0,25]) rotate([90,0,0]) example002();
</pre>
<p><a class="image" href="./imgs/Openscad_projection_example_4x.png"><img alt="Openscad projection example 4x.png" data-file-height="286" data-file-width="482" decoding="async" height="286" src="./imgs/Openscad_projection_example_4x.png" width="482"/></a>
</p><p>Now we can get a side view with projection()
</p>
<pre>projection() translate([0,0,25]) rotate([90,0,0]) example002();
</pre>
<p><a class="image" href="./imgs/Openscad_projection_example_5x.png"><img alt="Openscad projection example 5x.png" data-file-height="286" data-file-width="482" decoding="async" height="286" src="./imgs/Openscad_projection_example_5x.png" width="482"/></a>
</p><p>Links: 
</p>
<ul style="list-style-image:none"><li><a class="external text" href="http://svn.clifford.at/openscad/trunk/examples/example021.scad" rel="nofollow">example021.scad from Clifford Wolf's site</a>.</li>
<li><a class="external text" href="http://www.gilesbathgate.com/2010/06/extracting-2d-mendel-outlines-using-openscad/" rel="nofollow">More complicated example</a> from Giles Bathgate's blog</li></ul>
<p style="page-break-after:always;"></p>
<h1>Chapter 3 -- 2D Objects</h1>
<p><big>OpenSCAD User Manual/The OpenSCAD Language</big>
</p><p><br/>
All 2D primitives can be transformed with 3D transformations. Usually used as part of a 3D extrusion. Although infinitely thin, they are rendered with a 1 thickness.
</p>
<h2>square</h2>
<p>Creates a square or rectangle in the first quadrant. When center is true the square is centered on the origin. Argument names are optional if given in the order shown here.
</p>
<pre>square(size = [x, y], center = true/false);
square(size =  x    , center = true/false);
</pre>
<dl><dd><b> parameters</b>:</dd></dl>
<dl><dd><dl><dd><b>size</b>
<dl><dd>single value, square with both sides this length</dd>
<dd>2 value array [x,y], rectangle with dimensions x and y</dd></dl></dd>
<dd><b>center</b>
<dl><dd><b>false</b> (default), 1st (positive) quadrant, one corner at (0,0)</dd>
<dd><b>true</b>, square is centered at (0,0)</dd></dl></dd></dl></dd></dl>
<pre>default values:  square();   yields:  square(size = [1, 1], center = false);
</pre>
<dl><dd><b> examples</b>:</dd></dl>
<p><a class="image" href="./imgs/OpenScad_Square_10_x_10.jpg" title="10x10 square"><img alt="10x10 square" data-file-height="95" data-file-width="144" decoding="async" height="99" src="./imgs/OpenScad_Square_10_x_10.jpg" width="150"/></a>
</p>
<pre>equivalent scripts for this example
 square(size = 10);
 square(10);
 square([10,10]);
 .
 square(10,false);
 square([10,10],false);
 square([10,10],center=false);
 square(size = [10, 10], center = false);
 square(center = false,size = [10, 10] );
</pre>
<p><a class="image" href="./imgs/150px-OpenScad_Square_20x10.jpg" title="OpenScad square 20x10"><img alt="OpenScad square 20x10" data-file-height="92" data-file-width="159" decoding="async" height="87" src="./imgs/150px-OpenScad_Square_20x10.jpg" width="150"/></a>
</p>
<pre>equivalent scripts for this example
 square([20,10],true);
 a=[20,10];square(a,true);
</pre>
<h2>circle</h2>
<p>Creates a circle at the origin. All parameters, except r, <b>must</b> be named.
</p>
<pre>circle(r=radius | d=diameter);
</pre>
<dl><dd><b>Parameters</b>
<dl><dd><b>r</b> : circle radius. r name is the only one optional with circle.
<dl><dd>circle resolution is based on size, using $fa or $fs.</dd></dl></dd></dl></dd></dl>
<dl><dd><dl><dd><dl><dd>For a small, high resolution circle you can make a large circle, then scale it down, or you could set $fn or other special variables. Note: These examples exceed the resolution of a 3d printer as well as of the display screen.</dd></dl></dd></dl></dd></dl>
<pre>scale([1/100, 1/100, 1/100]) circle(200); // create a high resolution circle with a radius of 2.
circle(2, $fn=50);                        // Another way.
</pre>
<dl><dd><dl><dd><b>d</b>   : circle diameter (only available in versions later than 2014.03).</dd>
<dd><b>$fa</b> : minimum angle (in degrees) of each fragment.</dd>
<dd><b>$fs</b> : minimum circumferential length of each fragment.</dd>
<dd><b>$fn</b> : <b>fixed</b> number of fragments in 360 degrees. Values of 3 or more override $fa and $fs
<dl><dd>$fa, $fs and $fn must be named. <a href="Other_Language_Features.html" title="OpenSCAD User Manual/Other Language Features">click here for more details,</a>.</dd></dl></dd></dl></dd></dl>
<pre>defaults:  circle(); yields:  circle($fn = 0, $fa = 12, $fs = 2, r = 1);
</pre>
<p><a class="image" href="./imgs/OpenSCAD_Circle_10.jpg" title="circle for user manual description"><img alt="circle for user manual description" data-file-height="104" data-file-width="146" decoding="async" height="104" src="./imgs/OpenSCAD_Circle_10.jpg" width="146"/></a>
</p>
<pre>equivalent scripts for this example
 circle(10);
 circle(r=10);
 circle(d=20);
 circle(d=2+9*2);
</pre>
<h3>ellipse</h3>
<p>An ellipse can be created from a circle by using either scale() or resize() to make the x and y dimensions unequal.
See <a href="Transformations.html" title="OpenSCAD User Manual/Transformations">OpenSCAD User Manual/Transformations</a>
</p><p><a class="image" href="./imgs/OpenScad_Ellipse_from_circle.jpg" title="Ellipse from circle"><img alt="Ellipse from circle" data-file-height="83" data-file-width="194" decoding="async" height="83" src="./imgs/OpenScad_Ellipse_from_circle.jpg" width="194"/></a>
<a class="image" href="./imgs/OpenScad_Ellipse_from_circle_top_view.jpg" title="Ellipse from circle top view"><img alt="Ellipse from circle top view" data-file-height="91" data-file-width="199" decoding="async" height="91" src="./imgs/OpenScad_Ellipse_from_circle_top_view.jpg" width="199"/></a>
</p>
<pre>equivalent scripts for this example
 resize([30,10])circle(d=20);
 scale([1.5,.5])circle(d=20);
</pre>
<h3>regular polygon</h3>
<p>A regular polygon of 3 or more sides can be created by using circle() with $fn set to the number of sides. The following two pieces of code are equivalent.
</p>
<pre> circle(r=1, $fn=4);
</pre>
<pre> module regular_polygon(order = 4, r=1){
     angles=[ for (i = [0:order-1]) i*(360/order) ];
     coords=[ for (th=angles) [r*cos(th), r*sin(th)] ];
     polygon(coords);
 }
 regular_polygon();
</pre>
<p>These result in the following shapes, where the polygon is inscribed within the circle with all sides (and angles) equal. One corner points to the positive x direction. For irregular shapes see the polygon primitive below.
</p><p><a class="image" href="./imgs/300px-OpenSCAD_regular_polygon_using_circle.jpg"><img alt="OpenSCAD regular polygon using circle.jpg" data-file-height="420" data-file-width="624" decoding="async" height="202" src="./imgs/300px-OpenSCAD_regular_polygon_using_circle.jpg" width="300"/></a>
</p>
<pre>script for these examples
 translate([-42,  0]){circle(20,$fn=3);%circle(20,$fn=90);}
 translate([  0,  0]) circle(20,$fn=4);
 translate([ 42,  0]) circle(20,$fn=5);
 translate([-42,-42]) circle(20,$fn=6);
 translate([  0,-42]) circle(20,$fn=8);
 translate([ 42,-42]) circle(20,$fn=12);
</pre>
<pre> color("black"){
     translate([-42,  0,1])text("3",7,,center);
     translate([  0,  0,1])text("4",7,,center);
     translate([ 42,  0,1])text("5",7,,center);
     translate([-42,-42,1])text("6",7,,center);
     translate([  0,-42,1])text("8",7,,center);
     translate([ 42,-42,1])text("12",7,,center);
 }
</pre>
<h2>polygon</h2>
<p>Creates a multiple sided shape from a list of x,y coordinates. A polygon is the most powerful 2D object. It can create anything that circle and squares can, as well as much more. This includes irregular shapes with both concave and convex edges. In addition it can place holes within that shape.
</p>
<pre>polygon(points = [ [x, y], ... ], paths = [ [p1, p2, p3..], ...], convexity = N);
</pre>
<dl><dt>Parameters</dt></dl>
<dl><dd><b>points</b>
<dl><dd>The list of x,y points of the polygon. : A vector of 2 element vectors.</dd>
<dd>Note: points are indexed from 0 to n-1.</dd></dl></dd>
<dd><b>paths</b>
<dl><dd>default
<dl><dd>If no path is specified, all points are used in the order listed.</dd></dl></dd>
<dd>single vector
<dl><dd>The order to traverse the points. Uses indices from 0 to n-1. May be in a different order and use all or part, of the points listed.</dd></dl></dd>
<dd>multiple vectors
<dl><dd>Creates primary and secondary shapes. Secondary shapes are subtracted from the primary shape (like difference). Secondary shapes may be wholly or partially within the primary shape.</dd></dl></dd></dl></dd></dl>
<dl><dd><dl><dd>A closed shape is created by returning from the last point specified to the first.</dd></dl></dd></dl>
<dl><dt>convexity</dt>
<dd>
<dl><dd>Integer number of "inward" curves, ie. expected path crossings of an arbitrary line through the polygon. See below.</dd></dl></dd></dl>
<pre>defaults:   polygon();  yields:  polygon(points = undef, paths = undef, convexity = 1);
</pre>
<dl><dt>Example no holes</dt></dl>
<p><a class="image" href="./imgs/OpenSCAD_Polygon_Example_Rhomboid.jpg"><img alt="OpenSCAD Polygon Example Rhomboid.jpg" data-file-height="216" data-file-width="333" decoding="async" height="216" src="./imgs/OpenSCAD_Polygon_Example_Rhomboid.jpg" width="333"/></a>
</p>
<pre>equivalent scripts for this example
 polygon(points=[[0,0],[100,0],[130,50],[30,50]]);
 polygon([[0,0],[100,0],[130,50],[30,50]], paths=[[0,1,2,3]]);
 polygon([[0,0],[100,0],[130,50],[30,50]],[[3,2,1,0]]);
 polygon([[0,0],[100,0],[130,50],[30,50]],[[1,0,3,2]]);
    
 a=[[0,0],[100,0],[130,50],[30,50]];
 b=[[3,0,1,2]];
 polygon(a);
 polygon(a,b);
 polygon(a,[[2,3,0,1,2]]);
</pre>
<dl><dt>Example one hole</dt></dl>
<p><a class="image" href="./imgs/Openscad-polygon-example1.png"><img alt="Openscad-polygon-example1.png" data-file-height="294" data-file-width="317" decoding="async" height="294" src="./imgs/Openscad-polygon-example1.png" width="317"/></a>
</p>
<pre>equivalent scripts for this example
 polygon(points=[[0,0],[100,0],[0,100],[10,10],[80,10],[10,80]], paths=[[0,1,2],[3,4,5]],convexity=10);

 triangle_points =[[0,0],[100,0],[0,100],[10,10],[80,10],[10,80]];
 triangle_paths =[[0,1,2],[3,4,5]];
 polygon(triangle_points,triangle_paths,10);
</pre>
<pre>The 1st path vector, [0,1,2], selects the points, [0,0],[100,0],[0,100], for the primary shape.
The 2nd path vector, [3,4,5], selects the points, [10,10],[80,10],[10,80], for the secondary shape.
The secondary shape is subtracted from the primary ( think <a href="CSG_Modelling.html#difference" title="OpenSCAD User Manual/CSG Modelling">difference()</a> ).
Since the secondary is wholly within the primary, it leaves a shape with a hole.
</pre>
<dl><dt>Example multi hole</dt></dl>
<p><span style="font-weight: bold; font-style: normal;">[<span style="color: #A00000;">Note:</span> <span style="font-weight: normal; font-style: italic;">Requires version <span style="font-weight: bold;">2015.03</span></span>]</span> (for use of <code>concat()</code>)
</p><p><a class="image" href="./imgs/OpenSCAD_romboid_with_holes.jpg"><img alt="OpenSCAD romboid with holes.jpg" data-file-height="147" data-file-width="329" decoding="async" height="147" src="./imgs/OpenSCAD_romboid_with_holes.jpg" width="329"/></a>
</p>
<pre>      //example polygon with multiple holes
a0 = [[0,0],[100,0],[130,50],[30,50]];     // main
b0 = [1,0,3,2];
a1 = [[20,20],[40,20],[30,30]];            // hole 1
b1 = [4,5,6];
a2 = [[50,20],[60,20],[40,30]];            // hole 2
b2 = [7,8,9];
a3 = [[65,10],[80,10],[80,40],[65,40]];    // hole 3
b3 = [10,11,12,13];
a4 = [[98,10],[115,40],[85,40],[85,10]];   // hole 4
b4 = [14,15,16,17];
a  = concat (a0,a1,a2,a3,a4);
b  = [b0,b1,b2,b3,b4];
polygon(a,b);
      //alternate 
polygon(a,[b0,b1,b2,b3,b4]);
</pre>
<dl><dt>convexity</dt></dl>
<p>The convexity parameter specifies the maximum number of front sides (back sides) a ray intersecting the object might penetrate.
This parameter is needed only for correct display of the object in OpenCSG preview mode and has no effect on the polyhedron rendering.
</p><p><a class="image" href="./imgs/400px-Openscad_convexity.jpg"><img alt="Openscad convexity.jpg" data-file-height="924" data-file-width="1232" decoding="async" height="300" src="./imgs/400px-Openscad_convexity.jpg" width="400"/></a>
</p><p>This image shows a 2D shape with a convexity of 4, as the ray indicated in red crosses the 2D shape a maximum of 4 times. The convexity of a 3D shape would be determined in a similar way. Setting it to 10 should work fine for most cases.
</p>
<h2>import_dxf</h2>
<p>[<i><span style="font-weight: bold; color: #A00000;">Deprecated:</span> <b>import_dxf()</b> will be removed in future releases. Use <a class="external text" href="The_OpenSCAD_Language.html#import">import()</a> instead.</i>]
</p><p>Read a DXF file and create a 2D shape.
</p><p><b>Example</b>
</p>
<pre>linear_extrude(height = 5, center = true, convexity = 10)
		import_dxf(file = "example009.dxf", layer = "plate");
</pre>
<h2><a href="Text.html" title="OpenSCAD User Manual/Text">Text</a></h2>
<p>The <code>text</code> module creates text as a 2D geometric object,
using fonts installed on the local system or provided as separate font file.
</p><p><span style="font-weight: bold; font-style: normal;">[<span style="color: #A00000;">Note:</span> <span style="font-weight: normal; font-style: italic;">Requires version <span style="font-weight: bold;">2015.03</span></span>]</span>
</p><p><b>Parameters</b>
</p>
<dl><dt>text</dt>
<dd>String. The text to generate.</dd></dl>
<dl><dt>size</dt>
<dd>Decimal. The generated text has an ascent (height above the baseline) of approximately the given value. Default is 10. Different fonts can vary somewhat and may not fill the size specified exactly, typically they render slightly smaller.</dd></dl>
<dl><dt>font</dt>
<dd>String. The name of the font that should be used. This is not the name of the font file, but the logical font name (internally handled by the fontconfig library). This can also include a style parameter, see below. A list of installed fonts &amp; styles can be obtained using the font list dialog (Help -&gt; Font List).</dd></dl>
<dl><dt>halign</dt>
<dd>String. The horizontal alignment for the text. Possible values are "left", "center" and "right". Default is "left".</dd></dl>
<dl><dt>valign</dt>
<dd>String. The vertical alignment for the text. Possible values are "top", "center", "baseline" and "bottom". Default is "baseline".</dd></dl>
<dl><dt>spacing</dt>
<dd>Decimal. Factor to increase/decrease the character spacing. The default value of 1 results in the normal spacing for the font, giving a value greater than 1 causes the letters to be spaced further apart.</dd></dl>
<dl><dt>direction</dt>
<dd>String. Direction of the text flow. Possible values are "ltr" (left-to-right), "rtl" (right-to-left), "ttb" (top-to-bottom) and "btt" (bottom-to-top). Default is "ltr".</dd></dl>
<dl><dt>language</dt>
<dd>String. The language of the text. Default is "en".</dd></dl>
<dl><dt>script</dt>
<dd>String. The script of the text. Default is "latin".</dd></dl>
<dl><dt>$fn</dt>
<dd>used for subdividing the curved path segments provided by freetype</dd></dl>
<p><b>Example</b>
</p>
<div class="thumb tright"><div class="thumbinner" style="width:222px;"><a class="image" href="./imgs/220px-OpenSCAD_text_28_29_example.png"><img alt="" class="thumbimage" data-file-height="175" data-file-width="670" decoding="async" height="57" src="./imgs/220px-OpenSCAD_text_28_29_example.png" width="220"/></a>  <div class="thumbcaption">Example 1: Result.</div></div></div>
<pre>text("OpenSCAD");
</pre>
<p><br clear="all"/>
</p><p><br/>
</p>
<dl><dt>Notes</dt></dl>
<p>To allow specification of particular <a class="extiw" href="https://en.wikipedia.org/wiki/Unicode" title="w:Unicode">Unicode</a> characters, you can specify them in a string with the following escape codes;
</p>
<ul style="list-style-image:none"><li><tt>\x<em>03    </em></tt> - hex char-value (only hex values from <tt>01</tt> to <tt>7f</tt> are supported)</li>
<li><tt>\u<em>0123  </em></tt> - Unicode char with 4 hexadecimal digits (note: lowercase <tt>\u</tt>)</li>
<li><tt>\U<em>012345</em></tt> - Unicode char with 6 hexadecimal digits (note: uppercase <tt>\U</tt>)</li></ul>
<p>The null character (NUL) is mapped to the space character (SP).
</p>
<pre> assert(version() == [2019, 5, 0]);
 assert(ord(" ") == 32);
 assert(ord("\x00") == 32);
 assert(ord("\u0000") == 32);
 assert(ord("\U000000") == 32);
</pre>
<p><b>Example</b>
</p>
<pre>t="\u20AC10 \u263A"; // 10 euro and a smilie
</pre>
<h3>Using Fonts &amp; Styles</h3>
<p>Fonts are specified by their logical font name; in addition a style parameter can be added to select a specific font style like "<b>bold</b>" or "<i>italic</i>", such as:
</p>
<pre>font="Liberation Sans:style=Bold Italic"
</pre>
<p>The font list dialog (available under Help &gt; Font List) shows the font name and the font style for each available font. For reference, the dialog also displays the location of the font file.
You can drag a font in the font list, into the editor window to use in the text() statement.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:402px;"><a class="image" href="./imgs/400px-OpenSCAD_font_list_dialog.png"><img alt="" class="thumbimage" data-file-height="530" data-file-width="916" decoding="async" height="231" src="./imgs/400px-OpenSCAD_font_list_dialog.png" width="400"/></a>  <div class="thumbcaption">OpenSCAD font list dialog</div></div></div></div>
<p>OpenSCAD includes the fonts <i>Liberation Mono</i>, <i>Liberation Sans</i>,  and <i>Liberation Serif</i>. Hence, as fonts in general differ by platform type, use of these included fonts is likely to be portable across platforms. 
</p><p>For common/casual text usage, the specification of one of these fonts is <strong>recommended</strong> for this reason. Liberation Sans is the default font to encourage this.
</p><p><br/>
In addition to the installed fonts, it's possible to add project specific font files. Supported font file formats are <a class="extiw" href="https://en.wikipedia.org/wiki/TrueType" title="w:TrueType">TrueType</a> Fonts (*.ttf) and <a class="extiw" href="https://en.wikipedia.org/wiki/OpenType" title="w:OpenType">OpenType</a> Fonts (*.otf). The files need to be registered with use&lt;&gt;.
</p>
<pre> use &lt;ttf/paratype-serif/PTF55F.ttf&gt;
</pre>
<p>After the registration, the font is listed in the font list dialog, so in case logical name of a font is unknown, it can be looked up as it was registered.
</p><p>OpenSCAD uses fontconfig to find and manage fonts, so it's possible to list the system configured fonts on command line using the fontconfig tools in a format similar to the GUI dialog.
</p>
<pre>$ fc-list -f "%-60{{%{family[0]}%{:style[0]=}}}%{file}\n" | sort

...
Liberation Mono:style=Bold Italic /usr/share/fonts/truetype/liberation2/LiberationMono-BoldItalic.ttf
Liberation Mono:style=Bold        /usr/share/fonts/truetype/liberation2/LiberationMono-Bold.ttf
Liberation Mono:style=Italic      /usr/share/fonts/truetype/liberation2/LiberationMono-Italic.ttf
Liberation Mono:style=Regular     /usr/share/fonts/truetype/liberation2/LiberationMono-Regular.ttf
...
</pre>
<p><b>Example</b>
</p>
<div class="thumb tright"><div class="thumbinner" style="width:222px;"><a class="image" href="./imgs/220px-OpenSCAD_text_28_29_font_style_example.png"><img alt="" class="thumbimage" data-file-height="274" data-file-width="703" decoding="async" height="86" src="./imgs/220px-OpenSCAD_text_28_29_font_style_example.png" width="220"/></a>  <div class="thumbcaption">Example 2: Result.</div></div></div>
<pre> square(10);
 
 translate([15, 15]) {
   text("OpenSCAD", font = "Liberation Sans");
 }
 
 translate([15, 0]) {
   text("OpenSCAD", font = "Liberation Sans:style=Bold Italic");
 }
</pre>
<p><br clear="all"/>
</p>
<h3>Alignment</h3>
<h4>Vertical alignment</h4>
<dl><dt>top</dt>
<dd>The text is aligned with the top of the bounding box at the given Y coordinate.</dd></dl>
<dl><dt>center</dt>
<dd>The text is aligned with the center of the bounding box at the given Y coordinate.</dd></dl>
<dl><dt>baseline</dt>
<dd>The text is aligned with the font baseline at the given Y coordinate. This is the default.</dd></dl>
<dl><dt>bottom</dt>
<dd>The text is aligned with the bottom of the bounding box at the given Y coordinate.</dd></dl>
<div class="thumb tright"><div class="thumbinner" style="width:222px;"><a class="image" href="./imgs/220px-OpenSCAD_text_align_vertical.png"><img alt="" class="thumbimage" data-file-height="680" data-file-width="1000" decoding="async" height="150" src="./imgs/220px-OpenSCAD_text_align_vertical.png" width="220"/></a>  <div class="thumbcaption">OpenSCAD vertical text alignment</div></div></div>
<pre> text = "Align";
 font = "Liberation Sans";
 
 valign = [
   [  0, "top"],
   [ 40, "center"],
   [ 75, "baseline"],
   [110, "bottom"]
 ];
 
 for (a = valign) {
   translate([10, 120 - a[0], 0]) {
     color("red") cube([135, 1, 0.1]);
     color("blue") cube([1, 20, 0.1]);
     linear_extrude(height = 0.5) {
       text(text = str(text,"_",a[1]), font = font, size = 20, valign = a[1]);
     }
   }
 }
</pre>
<p><br clear="all"/>
</p>
<h4>Horizontal alignment</h4>
<dl><dt>left</dt>
<dd>The text is aligned with the left side of the bounding box at the given X coordinate. This is the default.</dd></dl>
<dl><dt>center</dt>
<dd>The text is aligned with the center of the bounding box at the given X coordinate.</dd></dl>
<dl><dt>right</dt>
<dd>The text is aligned with the right of the bounding box at the given X coordinate.</dd></dl>
<div class="thumb tright"><div class="thumbinner" style="width:222px;"><a class="image" href="./imgs/220px-OpenSCAD_text_align_horizontal.png"><img alt="" class="thumbimage" data-file-height="480" data-file-width="1000" decoding="async" height="106" src="./imgs/220px-OpenSCAD_text_align_horizontal.png" width="220"/></a>  <div class="thumbcaption">OpenSCAD horizontal text alignment</div></div></div>
<pre> text = "Align";
 font = "Liberation Sans";
 
 halign = [
   [10, "left"],
   [50, "center"],
   [90, "right"]
 ];
 
 for (a = halign) {
   translate([140, a[0], 0]) {
     color("red") cube([115, 2,0.1]);
     color("blue") cube([2, 20,0.1]);
     linear_extrude(height = 0.5) {
       text(text = str(text,"_",a[1]), font = font, size = 20, halign = a[1]);
     }
   }
 }
</pre>
<p><br clear="all"/>
</p>
<h3>3D text</h3>
<p>Text can be changed from a 2 dimensional object into a 3D object by using the <a href="2D_to_3D_Extrusion.html#Linear_Extrude" title="OpenSCAD User Manual/2D to 3D Extrusion">linear_extrude</a> function.
</p>
<pre>//3d Text Example
linear_extrude(4)
    text("Text");
</pre>
<div class="thumb tright"><div class="thumbinner" style="width:222px;"><a class="image" href="./imgs/220px-Openscad_Text_3dText.jpg"><img alt="" class="thumbimage" data-file-height="368" data-file-width="526" decoding="async" height="154" src="./imgs/220px-Openscad_Text_3dText.jpg" width="220"/></a>  <div class="thumbcaption">3D text example</div></div></div>
<h2><a href="2D_to_3D_Extrusion.html" title="OpenSCAD User Manual/2D to 3D Extrusion">2D to 3D Extrusion</a></h2>

<p><a class="extiw" href="https://en.wikipedia.org/wiki/Extrusion" title="w:Extrusion">Extrusion</a> is the process of creating an object with a fixed cross-sectional profile.  OpenSCAD provides two commands to create 3D solids from a 2D shape: linear_extrude() and rotate_extrude(). Linear extrusion is similar to pushing Playdoh through a press with a die of a specific shape. 
</p>
<div class="thumb tright"><div class="thumbinner" style="width:222px;"><a class="image" href="./imgs/220px-Playdoh.jpg"><img alt="" class="thumbimage" data-file-height="791" data-file-width="1000" decoding="async" height="174" src="./imgs/220px-Playdoh.jpg" width="220"/></a>  <div class="thumbcaption">linear_extrude() works like a Playdoh extrusion press</div></div></div>
<p>Rotational extrusion is similar to the process of <a class="extiw" href="https://en.wikipedia.org/wiki/Turning" title="w:Turning">turning</a> or "throwing" a bowl on the <a class="extiw" href="https://en.wikipedia.org/wiki/Potter%27s_wheel" title="w:Potter's wheel">Potter's wheel</a>.
</p>
<div class="thumb tright"><div class="thumbinner" style="width:222px;"><a class="image" href="./imgs/220px-Potter_in_Rabka_04.JPG"><img alt="" class="thumbimage" data-file-height="2448" data-file-width="3264" decoding="async" height="165" src="./imgs/220px-Potter_in_Rabka_04.JPG" width="220"/></a>  <div class="thumbcaption">rotate_extrude() emulates throwing a vessel</div></div></div>
<p>Both extrusion methods work on a (possibly disjointed) 2D shape which exists on the X-Y plane. While transformations that operates on both 2D shapes and 3D solids can move a shape off the X-Y plane, when the extrusion is performed the end result is not very intuitive.  What actually happens is that any information in the third coordinate (the Z coordinate) is ignored for any 2D shape, this process amounts to an implicit <a href="3D_to_2D_Projection.html" title="OpenSCAD User Manual/3D to 2D Projection">projection()</a> performed on any 2D shape before the extrusion is executed.  It is recommended to perform extrusion on shapes that remains strictly on the X-Y plane.
</p>
<h3>Linear Extrude</h3>
<p>Linear Extrusion is a operation that takes a 2D object as input and generates a 3D object as a result. 
</p><p>In OpenSCAD Extrusion is always performed on the projection (shadow) of the 2d object xy plane and along the <b>Z</b> axis; so if you rotate or apply other transformations to the 2d object before extrusion, its shadow shape is what is extruded.
</p><p>Although the extrusion is linear along the <b>Z</b> axis, a twist parameter is available that causes the object to be rotated around the <b>Z</b> axis as it is extruding upward. This can be used to rotate the object at it's center, as if it is a spiral pillar, or produce a helical extrusion around the <b>Z</b> axis, like a pig's tail.
</p><p>A scale parameter is also included so that the object can be expanded or contracted over the extent of the extrusion, allowing extrusions to be flared inward or outward.
</p>
<h4>Usage</h4>
<pre>linear_extrude(height = 5, center = true, convexity = 10, twist = -fanrot, slices = 20, scale = 1.0, $fn = 16) {...}
</pre>
<p>You must use parameter names due to a backward compatibility issue.
</p><p><code>height</code> must be positive.
</p><p><code>$fn</code> is optional and specifies the resolution of the linear_extrude (higher number brings more "smoothness", but more computation time is needed).
</p><p>If the extrusion fails for a non-trivial 2D shape, try setting the convexity parameter (the default is not 10, but 10 is a "good" value to try). See explanation further down.
</p>
<h4>Twist</h4>
<p>Twist is the number of degrees of through which the shape is extruded. Setting the parameter twist = 360 extrudes through one revolution. The twist direction follows the left hand rule.
</p><p><a class="image" href="./imgs/400px-Openscad_linext_01.jpg" title="twist = 0"><img alt="twist = 0" data-file-height="924" data-file-width="1232" decoding="async" height="300" src="./imgs/400px-Openscad_linext_01.jpg" width="400"/></a>
</p><p><b>0° of Twist</b>
</p>
<pre>linear_extrude(height = 10, center = true, convexity = 10, twist = 0)
translate([2, 0, 0])
circle(r = 1);
</pre>
<p><a class="image" href="./imgs/400px-Openscad_linext_02.jpg" title="twist = -100"><img alt="twist = -100" data-file-height="924" data-file-width="1232" decoding="async" height="300" src="./imgs/400px-Openscad_linext_02.jpg" width="400"/></a>
</p><p><b>-100° of Twist</b>
</p>
<pre>linear_extrude(height = 10, center = true, convexity = 10, twist = -100)
translate([2, 0, 0])
circle(r = 1);
</pre>
<p><a class="image" href="./imgs/400px-Openscad_linext_03.jpg" title="twist = 100"><img alt="twist = 100" data-file-height="924" data-file-width="1232" decoding="async" height="300" src="./imgs/400px-Openscad_linext_03.jpg" width="400"/></a>
</p><p><b>100° of Twist</b>
</p>
<pre>linear_extrude(height = 10, center = true, convexity = 10, twist = 100)
translate([2, 0, 0])
circle(r = 1);
</pre>
<p><a class="image" href="./imgs/400px-Openscad_linext_04.jpg" title="twist = -500"><img alt="twist = -500" data-file-height="924" data-file-width="1232" decoding="async" height="300" src="./imgs/400px-Openscad_linext_04.jpg" width="400"/></a>
</p><p><b>-500° of Twist</b>
</p>
<pre>linear_extrude(height = 10, center = true, convexity = 10, twist = -500)
translate([2, 0, 0])
circle(r = 1);
</pre>
<h4>Center</h4>
<p>It is similar to the parameter center of cylinders. If <code>center</code> is false the linear extrusion Z range is from 0 to height; if it is true, the range is from -height/2 to height/2.
</p><p><br/>
<a class="image" href="./imgs/400px-Openscad_linext_04.jpg" title="center = true"><img alt="center = true" data-file-height="924" data-file-width="1232" decoding="async" height="300" src="./imgs/400px-Openscad_linext_04.jpg" width="400"/></a>
</p><p><b>center = true</b>
</p>
<pre>linear_extrude(height = 10, center = true, convexity = 10, twist = -500)
translate([2, 0, 0])
circle(r = 1);
</pre>
<p><br/>
<a class="image" href="./imgs/400px-Openscad_linext_05.jpg" title="center = false"><img alt="center = false" data-file-height="924" data-file-width="1232" decoding="async" height="300" src="./imgs/400px-Openscad_linext_05.jpg" width="400"/></a>
</p><p><b>center = false</b>
</p>
<pre>linear_extrude(height = 10, center = false, convexity = 10, twist = -500)
translate([2, 0, 0])
circle(r = 1);
</pre>
<h4>Mesh Refinement</h4>
<p>The slices parameter defines the number of intermediate points along the Z axis of the extrusion. Its default increases with the value of twist. Explicitly setting slices may improve the output refinement.
</p><p><a class="image" href="./imgs/400px-Openscad_linext_06.jpg" title="slices = 100"><img alt="slices = 100" data-file-height="924" data-file-width="1232" decoding="async" height="300" src="./imgs/400px-Openscad_linext_06.jpg" width="400"/></a>
</p>
<pre>linear_extrude(height = 10, center = false, convexity = 10, twist = 360, slices = 100)
translate([2, 0, 0])
circle(r = 1);
</pre>
<p>The <a href="Other_Language_Features.html" title="OpenSCAD User Manual/Other Language Features">special variables</a> $fn, $fs and $fa can also be used to improve the output. If slices is not defined, its value is taken from the defined $fn value.
</p><p><a class="image" href="./imgs/400px-Openscad_linext_07.jpg" title="$fn = 100"><img alt="$fn = 100" data-file-height="924" data-file-width="1232" decoding="async" height="300" src="./imgs/400px-Openscad_linext_07.jpg" width="400"/></a>
</p>
<pre>linear_extrude(height = 10, center = false, convexity = 10, twist = 360, $fn = 100)
translate([2, 0, 0])
circle(r = 1);
</pre>
<h4>Scale</h4>
<p>Scales the 2D shape by this value over the height of the extrusion. Scale can be a scalar or a vector:
</p>
<pre> linear_extrude(height = 10, center = true, convexity = 10, scale=3)
 translate([2, 0, 0])
 circle(r = 1);
</pre>
<p><a class="image" href="./imgs/400px-Openscad_linext_09.png" title="OpenScad linear_extrude scale example"><img alt="OpenScad linear_extrude scale example" data-file-height="500" data-file-width="769" decoding="async" height="260" src="./imgs/400px-Openscad_linext_09.png" width="400"/></a>
</p>
<pre> linear_extrude(height = 10, center = true, convexity = 10, scale=[1,5], $fn=100)
 translate([2, 0, 0])
 circle(r = 1);
</pre>
<p><a class="image" href="./imgs/400px-OpenScad_linear_extrude_scale_example2.png" title="OpenScad linear_extrude scale example2"><img alt="OpenScad linear_extrude scale example2" data-file-height="627" data-file-width="646" decoding="async" height="388" src="./imgs/400px-OpenScad_linear_extrude_scale_example2.png" width="400"/></a>
</p><p>Note that if scale is a vector, the resulting side walls may be nonplanar.  Use <code>twist=0</code> and the <code>slices</code> parameter to avoid <a class="external text" href="https://github.com/openscad/openscad/issues/1341" rel="nofollow">asymmetry</a>.
</p>
<pre> linear_extrude(height=10, scale=[1,0.1], slices=20, twist=0)
 polygon(points=[[0,0],[20,10],[20,-10]]);
</pre>
<h3>Rotate Extrude</h3>
<p>Rotational extrusion spins a 2D shape around the Z-axis to form a solid which has rotational symmetry.  One way to think of this operation is to imagine a Potter's wheel placed on the X-Y plane with its axis of rotation pointing up towards +Z.  Then place the to-be-made object on this virtual Potter's wheel (possibly extending down below the X-Y plane towards -Z). The to-be-made object is the cross-section of the object on the X-Y plane (keeping only the right half, X &gt;= 0).  That is the 2D shape that will be fed to rotate_extrude() as the child in order to generate this solid.  Note that the object started on the X-Y plane but is tilted up (rotated +90 degrees about the X-axis) to extrude. 
</p><p>Since a 2D shape is rendered by OpenSCAD on the X-Y plane, an alternative way to think of this operation is as follows: spins a 2D shape around the Y-axis to form a solid.  The resultant solid is placed so that its axis of rotation lies along the Z-axis.  
</p><p>Just like the linear_extrude, the extrusion is always performed on the projection of the 2D polygon to the XY plane. 
Transformations like rotate, translate, etc. applied to the 2D polygon before extrusion modify the projection of the 2D polygon to the XY plane and therefore also modify the appearance of the final 3D object.
</p>
<ul style="list-style-image:none"><li>A translation in Z of the 2D polygon has no effect on the result (as also the projection is not affected).</li>
<li>A translation in X increases the diameter of the final object.</li>
<li>A translation in Y results in a shift of the final object in Z direction.</li>
<li>A rotation about the X or Y axis distorts the cross section of the final object, as also the projection to the XY plane is distorted.</li></ul>
<p>Don't get confused, as OpenSCAD renders 2D polygons with a certain height in the Z direction, so the 2D object (with its height) appears to have a bigger projection to the XY plane. 
But for the projection to the XY plane and also for the later extrusion only the base polygon without height is used. 
</p><p>It can not be used to produce a helix or screw threads.
</p><p>The 2D shape <b>must</b> lie completely on either the right (recommended) or the left side of the Y-axis.  More precisely speaking, <b>every</b> vertex of the shape must have either x &gt;= 0 or x &lt;= 0.  If the shape spans the X axis a warning appears in the console windows and the rotate_extrude() is ignored. If the 2D shape touches the Y axis, i.e. at x=0, it <b>must</b> be a line that touches, not a point, as a point results in a zero thickness 3D object, which is invalid and results in a CGAL error. For OpenSCAD versions prior to 2016.xxxx, if the shape is in the negative axis the resulting faces are oriented inside-out, which may cause undesired effects.
</p>
<h3>Parameters</h3>
<h4>Usage</h4>
<pre>rotate_extrude(angle = 360, convexity = 2) {...}
</pre>
<div class="thumb tright"><div class="thumbinner" style="width:222px;"><a class="image" href="./imgs/220px-Right-hand_grip_rule.svg.png"><img alt="" class="thumbimage" data-file-height="350" data-file-width="350" decoding="async" height="220" src="./imgs/220px-Right-hand_grip_rule.svg.png" width="220"/></a>  <div class="thumbcaption">Right-hand grip rule</div></div></div>
<p>You must use parameter names due to a backward compatibility issue.
</p>
<dl><dd><b>convexity</b> : If the extrusion fails for a non-trival 2D shape, try setting the convexity parameter (the default is not 10, but 10 is a "good" value to try). See explanation further down.</dd>
<dd><b>angle</b>  <span style="font-weight: bold; font-style: normal;">[<span style="color: #A00000;">Note:</span> <span style="font-weight: normal; font-style: italic;">Requires version <span style="font-weight: bold;">2019.05</span></span>]</span> : Defaults to 360. Specifies the number of degrees to sweep, starting at the positive X axis.  The direction of the sweep follows the <a class="extiw" href="https://en.wikipedia.org/wiki/right-hand_rule" title="wikipedia:right-hand rule"> Right Hand Rule</a>, hence a negative angle sweeps clockwise.</dd>
<dd><b>$fa</b> : minimum angle (in degrees) of each fragment.</dd>
<dd><b>$fs</b> : minimum circumferential length of each fragment.</dd>
<dd><b>$fn</b> : <b>fixed</b> number of fragments in 360 degrees. Values of 3 or more override $fa and $fs
<dl><dd>$fa, $fs and $fn must be named parameters. <a href="Other_Language_Features.html" title="OpenSCAD User Manual/Other Language Features">click here for more details,</a>.</dd></dl></dd></dl>
<h4>Examples</h4>
<div class="floatleft"><a class="image" href="./imgs/400px-Rotate_extrude_wiki_2D.jpg"><img alt="Rotate extrude wiki 2D.jpg" data-file-height="563" data-file-width="745" decoding="async" height="302" src="./imgs/400px-Rotate_extrude_wiki_2D.jpg" width="400"/></a></div><p><big><big>→</big></big><a class="image" href="./imgs/400px-Openscad_rotext_01.jpg"><img alt="Openscad rotext 01.jpg" data-file-height="924" data-file-width="1232" decoding="async" height="300" src="./imgs/400px-Openscad_rotext_01.jpg" width="400"/></a>
</p><p>A simple torus can be constructed using a rotational extrude.
</p>
<pre>rotate_extrude(convexity = 10)
translate([2, 0, 0])
circle(r = 1);
</pre>
<h4>Mesh Refinement</h4>
<div class="floatleft"><a class="image" href="./imgs/380px-Rotate_extrude_wiki_2D_C.jpg"><img alt="Rotate extrude wiki 2D C.jpg" data-file-height="557" data-file-width="687" decoding="async" height="308" src="./imgs/380px-Rotate_extrude_wiki_2D_C.jpg" width="380"/></a></div><p><big><big>→</big></big><a class="image" href="./imgs/400px-Openscad_rotext_02.jpg"><img alt="Openscad rotext 02.jpg" data-file-height="924" data-file-width="1232" decoding="async" height="300" src="./imgs/400px-Openscad_rotext_02.jpg" width="400"/></a>
</p><p>Increasing the number of fragments composing the 2D shape improves the quality of the mesh, but takes longer to render.
</p>
<pre>rotate_extrude(convexity = 10)
translate([2, 0, 0])
circle(r = 1, $fn = 100);
</pre>
<div class="floatleft"><a class="image" href="./imgs/380px-Rotate_extrude_wiki_2D_C.jpg"><img alt="Rotate extrude wiki 2D C.jpg" data-file-height="557" data-file-width="687" decoding="async" height="308" src="./imgs/380px-Rotate_extrude_wiki_2D_C.jpg" width="380"/></a></div><p><big><big>→</big></big><a class="image" href="./imgs/400px-Openscad_rotext_03.jpg"><img alt="Openscad rotext 03.jpg" data-file-height="924" data-file-width="1232" decoding="async" height="300" src="./imgs/400px-Openscad_rotext_03.jpg" width="400"/></a>
</p><p>The number of fragments used by the extrusion can also be increased.
</p>
<pre>rotate_extrude(convexity = 10, $fn = 100)
translate([2, 0, 0])
circle(r = 1, $fn = 100);
</pre>
<p>Using the parameter angle (with OpenSCAD versions 2016.xx), a hook can be modeled .
</p>
<div class="thumb tright"><div class="thumbinner" style="width:222px;"><a class="image" href="./imgs/220px-Hook.png"><img alt="" class="thumbimage" data-file-height="496" data-file-width="809" decoding="async" height="135" src="./imgs/220px-Hook.png" width="220"/></a>  <div class="thumbcaption">OpenSCAD - a hook</div></div></div>
<pre>translate([0,60,0])
   rotate_extrude(angle=270, convexity=10)
       translate([40, 0]) circle(10);
rotate_extrude(angle=90, convexity=10)
   translate([20, 0]) circle(10);
translate([20,0,0]) 
   rotate([90,0,0]) cylinder(r=10,h=80);
</pre>
<h4>Extruding a Polygon</h4>
<p>Extrusion can also be performed on polygons with points chosen by the user. 
</p><p>Here is a simple polygon and its 200 step rotational extrusion. (Note it has been rotated 90 degrees to show how the rotation appears; the <code>rotate_extrude()</code> needs it flat).
</p>
<pre>rotate([90,0,0])        polygon( points=[[0,0],[2,1],[1,2],[1,3],[3,4],[0,5]] );
</pre>
<pre>rotate_extrude($fn=200) polygon( points=[[0,0],[2,1],[1,2],[1,3],[3,4],[0,5]] );
</pre>
<div class="floatleft"><a class="image" href="./imgs/300px-Rotate_extrude_wiki_2D_B.jpg"><img alt="Rotate extrude wiki 2D B.jpg" data-file-height="454" data-file-width="571" decoding="async" height="239" src="./imgs/300px-Rotate_extrude_wiki_2D_B.jpg" width="300"/></a></div><p><big><big><big>→</big></big></big><a class="image" href="./imgs/300px-Openscad_polygon_extrusion_1.png"><img alt="Openscad polygon extrusion 1.png" data-file-height="418" data-file-width="499" decoding="async" height="251" src="./imgs/300px-Openscad_polygon_extrusion_1.png" width="300"/></a><big><big><big>→</big></big></big><a class="image" href="./imgs/300px-Openscad_polygon_extrusion_2.png"><img alt="Openscad polygon extrusion 2.png" data-file-height="415" data-file-width="503" decoding="async" height="248" src="./imgs/300px-Openscad_polygon_extrusion_2.png" width="300"/></a>
</p><p>For more information on polygons, please see: <a href="2D_Primitives.html#polygon" title="OpenSCAD User Manual/2D Primitives">2D Primitives: Polygon</a>.
</p>
<h3>Description of extrude parameters</h3>
<h4>Extrude parameters for all extrusion modes</h4>
<table border="1">

<tbody><tr>
<td>convexity
</td>
<td>Integer. The convexity parameter specifies the maximum number of front sides (or back sides) a ray intersecting the object might penetrate.
<p>This parameter is only needed for correctly displaying the object in OpenCSG preview mode and has no effect on the polyhedron rendering.
</p>
</td></tr></tbody></table>
<p><br/>
<a class="image" href="./imgs/400px-Openscad_convexity.jpg"><img alt="Openscad convexity.jpg" data-file-height="924" data-file-width="1232" decoding="async" height="300" src="./imgs/400px-Openscad_convexity.jpg" width="400"/></a>
</p><p>This image shows a 2D shape with a convexity of 2, as the ray indicated in red crosses the 2D shape a maximum of 4 times (2 front sides and 2 back sides). The convexity of a 3D shape would be determined in a similar way. Setting it to 10 should work fine for most cases. Just setting high numbers in general may result in slower preview rendering.
</p>
<h4>Extrude parameters for linear extrusion only</h4>
<table border="1">

<tbody><tr>
<td>height
</td>
<td>The extrusion height
</td></tr>
<tr>
<td>center
</td>
<td>If true, the solid is centered after extrusion
</td></tr>
<tr>
<td>twist
</td>
<td>The extrusion twist in degrees
</td></tr>
<tr>
<td>slices
</td>
<td>Similar to special variable $fn without being passed down to the child 2D shape.
</td></tr>
<tr>
<td>scale
</td>
<td>Scales the 2D shape by this value over the height of the extrusion.
</td></tr></tbody></table>
<h1>Chapter 4 -- Transform</h1>
<p><big>OpenSCAD User Manual/The OpenSCAD Language</big>
</p>
<h3>Basic concept</h3>
<p>Transformation affect the child nodes and as the name implies transforms them in various ways such as moving/rotating or scaling the child. Cascading transformations are used to apply a variety of transforms to a final child. Cascading is achieved by nesting statements i.e.
</p>
<pre>rotate([45,45,45])
  translate([10,20,30])
    cube(10);
</pre>
<p>Transformations can be applied to a group of child nodes by using '{' and '}' to enclose the subtree e.g.
</p>
<pre>translate([0,0,-5])
{
    cube(10);
    cylinder(r=5,h=10);
}
</pre>
<p>Transformations are written before the object they affect.
</p><p>Imagine commands like translate, mirror and scale as verbs.
Commands like color are like adjectives that describe the object.
</p><p>Notice that there is no semicolon following transformation command.
</p>
<h3>Advanced concept</h3>
<p>As OpenSCAD uses different libraries to implement capabilities this can introduce some inconsistencies to the F5 preview behaviour of transformations. Traditional transforms (translate, rotate, scale, mirror &amp; multimatrix) are performed using OpenGL in preview, while other more advanced transforms, such as resize, perform a CGAL operation, behaving like a CSG operation affecting the underlying object, not just transforming it. In particular this can affect the display of modifier characters, specifically "#" and "%", where the highlight may not display intuitively, such as highlighting the pre-resized object, but highlighting the post-scaled object.
</p>

<h3>scale</h3>
<p>Scales its child elements using the specified vector. The argument name is optional.
</p>
<pre>Usage Example:
scale(v = [x, y, z]) { ... }
</pre>
<pre>cube(10);
translate([15,0,0]) scale([0.5,1,2]) cube(10);
</pre>
<p><a class="image" href="./imgs/OpenSCAD_scale_28_29_example.JPG" title="Image showing result of scale() transformation in OpenSCAD"><img alt="Image showing result of scale() transformation in OpenSCAD" data-file-height="378" data-file-width="359" decoding="async" height="378" src="./imgs/OpenSCAD_scale_28_29_example.JPG" width="359"/></a>
</p>
<h3>resize</h3>
<p>Modifies the size of the child object to match the given x,y, and z. 
</p><p>resize() is a CGAL operation, and like others such as render() operates with full geometry, so even in preview this takes time to process.
</p><p><br/>
<big>Usage Example:</big>
</p>
<pre>// resize the sphere to extend 30 in x, 60 in y, and 10 in the z directions.
resize(newsize=[30,60,10]) sphere(r=10);
</pre>
<p><a class="image" href="./imgs/400px-OpenSCAD_Resize_example_elipse.JPG" title="OpenSCAD Resize example ellipse"><img alt="OpenSCAD Resize example ellipse" data-file-height="520" data-file-width="604" decoding="async" height="344" src="./imgs/400px-OpenSCAD_Resize_example_elipse.JPG" width="400"/></a>
</p><p>If x,y, or z is 0 then that dimension is left as-is. 
</p>
<pre>// resize the 1x1x1 cube to 2x2x1
resize([2,2,0]) cube();
</pre>
<p>If the 'auto' parameter is set to true, it auto-scales any 0-dimensions to match. For example.
</p>
<pre>// resize the 1x2x0.5 cube to 7x14x3.5
resize([7,0,0], auto=true) cube([1,2,0.5]);
</pre>
<p>The 'auto' parameter can also be used if you only wish to auto-scale a single dimension, and leave the other as-is.
</p>
<pre>// resize to 10x8x1. Note that the z dimension is left alone.
resize([10,0,0], auto=[true,true,false]) cube([5,4,1]);
</pre>
<h3>rotate</h3>
<p>Rotates its child 'a' degrees about the axis of the coordinate system or around an arbitrary axis.
The argument names are optional if the arguments are given in the same order as specified.
</p>
<pre>//Usage:
rotate(a = deg_a, v = [x, y, z]) { ... }  
// or
rotate(deg_a, [x, y, z]) { ... }
rotate(a = [deg_x, deg_y, deg_z]) { ... }
rotate([deg_x, deg_y, deg_z]) { ... }
</pre>
<p>The 'a' argument (deg_a) can be an array, as expressed in the later usage above; when deg_a is an array, the 'v' argument is ignored. Where 'a' specifies <i>multiple axes</i> then the rotation is applied in the following order: x, y, z. That means the code:
</p>
<pre>rotate(a=[ax,ay,az]) {...}
</pre>
<p>is equivalent to:
</p>
<pre>rotate(a=[0,0,az]) rotate(a=[0,ay,0]) rotate(a=[ax,0,0]) {...}
</pre>
<p>The optional argument 'v' is a vector and allows you to set an arbitrary axis about which the object is rotated.
</p><p>For example, to flip an object upside-down, you can rotate your object 180 degrees around the 'y' axis.
</p>
<pre>rotate(a=[0,180,0]) { ... }
</pre>
<p>This is frequently simplified to
</p>
<pre>rotate([0,180,0]) { ... }
</pre>
<p>When specifying a single axis the 'v' argument allows you to specify which axis is the basis for rotation. For example, the equivalent to the above, to rotate just around y
</p>
<pre>rotate(a=180, v=[0,1,0]) { ... }
</pre>
<p>When specifying a single axis, 'v' is a <a class="extiw" href="https://en.wikipedia.org/wiki/Euler_vector" title="wikipedia:Euler vector">vector</a> defining an arbitrary axis for rotation; this is different from the <i>multiple axis</i> above. For example, rotate your object 45 degrees around the axis defined by the vector [1,1,0], 
</p>
<pre>rotate(a=45, v=[1,1,0]) { ... }
</pre>
<p><a class="image" href="./imgs/OpenSCAD_rotate_28_29_example.JPG" title="image of result of rotate() transformation in OpenSCAD"><img alt="image of result of rotate() transformation in OpenSCAD" data-file-height="275" data-file-width="301" decoding="async" height="275" src="./imgs/OpenSCAD_rotate_28_29_example.JPG" width="301"/></a>
</p><p>Rotate with a <i>single scalar argument</i> rotates around the Z axis. This is useful in 2D contexts where that is the only axis for rotation. For example:
</p>
<pre>rotate(45) square(10);
</pre>
<p><a class="image" href="./imgs/Example_2D_Rotate.JPG" title="Result of OpenSCAD rotate(45) as 2D render"><img alt="Result of OpenSCAD rotate(45) as 2D render" data-file-height="322" data-file-width="353" decoding="async" height="322" src="./imgs/Example_2D_Rotate.JPG" width="353"/></a>
</p>
<h5>Rotation rule help</h5>
<div class="thumb tright"><div class="thumbinner" style="width:222px;"><a class="image" href="./imgs/220px-Right-hand_grip_rule.svg.png"><img alt="" class="thumbimage" data-file-height="350" data-file-width="350" decoding="async" height="220" src="./imgs/220px-Right-hand_grip_rule.svg.png" width="220"/></a>  <div class="thumbcaption">Right-hand grip rule</div></div></div>
<p><br/>
For the case of:
</p>
<pre>rotate([a, b, c]) { ... };
</pre>
<p>"a" is a rotation about the X axis, from the +Y axis, toward the +Z axis. 
<br/>
"b" is a rotation about the Y axis, from the +Z axis, toward the +X axis.
<br/>
"c" is a rotation about the Z axis, from the +X axis, toward the +Y axis.
</p><p>These are all cases of the <a class="extiw" href="https://en.wikipedia.org/wiki/right-hand_rule" title="wikipedia:right-hand rule"> Right Hand Rule</a>. Point your right thumb along the positive axis, your fingers show the direction of rotation.
</p><p><br/>
</p><p>Thus if "a" is fixed to zero, and "b" and "c" are manipulated appropriately, this is the <i>spherical coordinate system</i>.
<br/>
So, to construct a cylinder from the origin to some other point (x,y,z):
</p>
<pre>x= 10; y = 10; z = 10; // point coordinates of end of cylinder
 
length = norm([x,y,z]);  // radial distance
b = acos(z/length); // inclination angle
c = atan2(y,x);     // azimuthal angle

rotate([0, b, c]) 
    cylinder(h=length, r=0.5);
%cube([x,y,z]); // corner of cube should coincide with end of cylinder
</pre>
<p><a class="image" href="./imgs/Example_xyz_rotation_in_OpenSCAD.JPG" title="Example of OpenSCAD Rotate() used as a spherical coordinate system."><img alt="Example of OpenSCAD Rotate() used as a spherical coordinate system." data-file-height="322" data-file-width="318" decoding="async" height="322" src="./imgs/Example_xyz_rotation_in_OpenSCAD.JPG" width="318"/></a>
</p>
<h3>translate</h3>
<p>Translates (moves) its child elements along the specified vector. The argument name is optional.
</p>
<pre>Example:
translate(v = [x, y, z]) { ... }
</pre>
<pre>cube(2,center = true); 
translate([5,0,0]) 
   sphere(1,center = true);
</pre>
<p><a class="image" href="./imgs/OpenSCAD_translate_28_29_example.JPG" title="image of result of the translate() transformation in OpenSCAD"><img alt="image of result of the translate() transformation in OpenSCAD" data-file-height="319" data-file-width="385" decoding="async" height="319" src="./imgs/OpenSCAD_translate_28_29_example.JPG" width="385"/></a>
</p>
<h3>mirror</h3>
<p>Mirrors the child element on a plane through the origin. The argument to mirror() is the normal vector of a plane intersecting the origin through which to mirror the object.
</p>
<h4>Function signature:</h4>
<pre>mirror(v= [x, y, z] ) { ... }
</pre>
<h4>Examples</h4>
<p>The original is on the right side. Note that mirror doesn't make a copy. Like rotate and scale, it changes the object.
</p>
<ul class="gallery mw-gallery-traditional" style="list-style-image:none">
		<li class="gallerybox" style="width: 205px"><div style="width: 205px">
			<div class="thumb" style="width: 200px;"><div style="margin:15.5px auto;"><a class="image" href="./imgs/170px-Mirror-x.png"><img alt="" data-file-height="446" data-file-width="636" decoding="async" height="119" src="./imgs/170px-Mirror-x.png" width="170"/></a></div></div>
			<div class="gallerytext">
<p><code>hand(); // original</code><br/><code>mirror([1,0,0]) hand();</code>
</p>
			</div>
		</div></li>
		<li class="gallerybox" style="width: 205px"><div style="width: 205px">
			<div class="thumb" style="width: 200px;"><div style="margin:15.5px auto;"><a class="image" href="./imgs/170px-Mirror-x-y.png"><img alt="" data-file-height="446" data-file-width="636" decoding="async" height="119" src="./imgs/170px-Mirror-x-y.png" width="170"/></a></div></div>
			<div class="gallerytext">
<p><code>hand(); // original</code><br/><code>mirror([1,1,0]) hand();</code>
</p>
			</div>
		</div></li>
		<li class="gallerybox" style="width: 205px"><div style="width: 205px">
			<div class="thumb" style="width: 200px;"><div style="margin:15.5px auto;"><a class="image" href="./imgs/170px-Mirror-x-y-z.png"><img alt="" data-file-height="446" data-file-width="636" decoding="async" height="119" src="./imgs/170px-Mirror-x-y-z.png" width="170"/></a></div></div>
			<div class="gallerytext">
<p><code>hand(); // original</code><br/><code>mirror([1,1,1]) hand();</code>
</p>
			</div>
		</div></li>
</ul>
<pre>rotate([0,0,10]) cube([3,2,1]);
mirror([1,0,0]) translate([1,0,0]) rotate([0,0,10]) cube([3,2,1]);
</pre>
<p><a class="image" href="./imgs/OpenSCAD_mirror_28_29_example.JPG" title="image of the result of the mirror() transformation in OpenSCAD"><img alt="image of the result of the mirror() transformation in OpenSCAD" data-file-height="308" data-file-width="325" decoding="async" height="308" src="./imgs/OpenSCAD_mirror_28_29_example.JPG" width="325"/></a>
</p>
<h3>multmatrix</h3>
<p>Multiplies the geometry of all child elements with the given <a class="extiw" href="https://en.wikipedia.org/wiki/Affine_transformation" title="w:Affine transformation">affine transformation</a> matrix, where the matrix is 4×3 - a vector of 3 row vectors with 4 elements each, or a 4×4 matrix with the 4th row always forced to [0,0,0,1].
</p><p>Usage: multmatrix(m = [...]) { ... }
</p><p>This is a breakdown of what you can do with the independent elements in the matrix (for the first three rows):<br/>
</p>
<table>
<tbody><tr><td>[Scale X]</td><td>[Shear X along Y]</td><td>[Shear X along Z]</td><td>[Translate X]</td></tr>
<tr><td>[Shear Y along X]</td><td>[Scale Y]</td><td>[Shear Y along Z]</td><td>[Translate Y]</td></tr>
<tr><td>[Shear Z along X]</td><td>[Shear Z along Y]</td><td>[Scale Z]</td><td>[Translate Z]</td></tr>
</tbody></table>
<p>The fourth row is forced to [0,0,0,1] and can be omitted unless you are combining matrices before passing to multmatrix, as it is not processed in OpenSCAD.  Each matrix operates on the points of the given geometry as if each vertex is a 4 element vector consisting of a 3D vector with an implicit 1 as its 4th element, such as v=[x, y, z, 1].  The role of the implicit fourth row of m is to preserve the implicit 1 in the 4th element of the vectors, permitting the translations to work.  The operation of multmatrix therefore performs m*v for each vertex v.  Any elements (other than the 4th row) not specified in m are treated as zeros.
</p><p>This example rotates by 45 degrees in the XY plane and translates by [10,20,30], i.e. the same as <tt>translate([10,20,30]) rotate([0,0,45])</tt> would do. 
</p>
<pre>angle=45;
multmatrix(m = [ [cos(angle), -sin(angle), 0, 10],
                 [sin(angle),  cos(angle), 0, 20],
                 [         0,           0, 1, 30],
                 [         0,           0, 0,  1]
              ]) union() {
   cylinder(r=10.0,h=10,center=false);
   cube(size=[10,10,10],center=false);
}
</pre>
<p>The following example demonstrates combining affine transformation matrices by matrix multiplication, producing in the final version a transformation equivalent to rotate([0, -35, 0]) translate([40, 0, 0]) Obj();.  Note that the signs on the sin function appear to be in a different order than the above example, because the positive one must be ordered as x into y, y into z, z into x for the rotation angles to correspond to rotation about the other axis in a right-handed coordinate system.
</p>
<pre>y_ang=-35;
mrot_y = [ [ cos(y_ang), 0,  sin(y_ang), 0],
           [         0,  1,           0, 0],
           [-sin(y_ang), 0,  cos(y_ang), 0],
           [         0,  0,           0, 1]
         ];
mtrans_x = [ [1, 0, 0, 40],
             [0, 1, 0,  0],
             [0, 0, 1,  0],
             [0, 0, 0,  1]
           ];
module Obj() {
   cylinder(r=10.0,h=10,center=false);
   cube(size=[10,10,10],center=false);
}

echo(mrot_y*mtrans_x);
Obj();
multmatrix(mtrans_x) Obj();
multmatrix(mrot_y * mtrans_x) Obj();
</pre>
<p>This example skews a model, which is not possible with the other transformations.
</p>
<pre>M = [ [ 1  , 0  , 0  , 0   ],
      [ 0  , 1  , 0.7, 0   ],  // The "0.7" is the skew value; pushed along the y axis as z changes.
      [ 0  , 0  , 1  , 0   ],
      [ 0  , 0  , 0  , 1   ] ] ;
multmatrix(M) {  union() {
    cylinder(r=10.0,h=10,center=false);
    cube(size=[10,10,10],center=false); 
} }
</pre>
<h4>More?</h4>
<p>Learn more about it here:
</p>
<ul style="list-style-image:none"><li><a class="external text" href="https://en.wikipedia.org/wiki/Transformation_matrix#Affine_transformations">Affine Transformations</a> on wikipedia</li>
<li><a class="external free" href="http://www.senocular.com/flash/tutorials/transformmatrix/" rel="nofollow">http://www.senocular.com/flash/tutorials/transformmatrix/</a></li></ul>
<h3>color</h3>
<p>Displays the child elements using the specified RGB color + alpha value. This is only used for the F5 preview as CGAL and STL (F6) do not currently support color. The alpha value defaults to 1.0 (opaque) if not specified.
</p>
<h4>Function signature:</h4>
<pre>color( c = [r, g, b, a] ) { ... }
color( c = [r, g, b], alpha = 1.0 ) { ... }
color( "#hexvalue" ) { ... }
color( "colorname", 1.0 ) { ... }
</pre>
<p>Note that the <code>r, g, b, a</code> values are limited to floating point values in the range <b>[0,1]</b>  rather than the more traditional integers { 0 ... 255 }. However, nothing prevents you to using <code>R, G, B</code> values from {0 ... 255} with appropriate scaling: <code>color([ R/255, G/255, B/255 ]) { ... } </code>
</p><p><span style="font-weight: bold; font-style: normal;">[<span style="color: #A00000;">Note:</span> <span style="font-weight: normal; font-style: italic;">Requires version <span style="font-weight: bold;">2011.12</span></span>]</span>
Colors can also be defined by name (case <b>in</b>sensitive). For example, to create a red sphere, you can write <code>color("red") sphere(5);</code>. Alpha is specified as an extra parameter for named colors: <code>color("Blue",0.5) cube(5);</code>
</p><p><span style="font-weight: bold; font-style: normal;">[<span style="color: #A00000;">Note:</span> <span style="font-weight: normal; font-style: italic;">Requires version <span style="font-weight: bold;">2019.05</span></span>]</span>
Hex values can be given in 4 formats, <code>#rgb</code>, <code>#rgba</code>, <code>#rrggbb</code> and <code>#rrggbbaa</code>. If the alpha value is given in both the hex value and as separate alpha parameter, the alpha parameter takes precedence.
</p><p>The available color names are taken from the World Wide Web consortium's <a class="external text" href="http://www.w3.org/TR/css3-color/" rel="nofollow">SVG color list</a>. A chart of the color names is as follows, <br/><small><i>(note that both spellings of grey/gray including slategrey/slategray etc are valid)</i></small>:
</p>
<table cellpadding="4" style="font-size:90%;border-style:solid;border-color:black;border-width:1px;" width="100%">

<tbody><tr valign="top">
<td width="20%">
<table width="100%">

<tbody><tr>
<td style="background:whitesmoke;color:slategray;text-align:center"><big><b>Purples</b></big>
</td></tr>
<tr style="background:lavender;color:black">
<td>Lavender
</td></tr>
<tr style="background:thistle;color:black">
<td>Thistle
</td></tr>
<tr style="background:plum;color:black">
<td>Plum
</td></tr>
<tr style="background:violet;color:black">
<td>Violet
</td></tr>
<tr style="background:orchid;color:black">
<td>Orchid
</td></tr>
<tr style="background:fuchsia;color:white">
<td>Fuchsia
</td></tr>
<tr style="background:Magenta;color:white">
<td>Magenta
</td></tr>
<tr style="background:mediumorchid;color:white">
<td>MediumOrchid
</td></tr>
<tr style="background:mediumpurple;color:white">
<td>MediumPurple
</td></tr>
<tr style="background:#9966CC;color:white">
<td>BlueViolet
</td></tr>
<tr style="background:darkviolet;color:white">
<td>DarkViolet
</td></tr>
<tr style="background:darkorchid;color:white">
<td>DarkOrchid
</td></tr>
<tr style="background:darkmagenta;color:white">
<td>DarkMagenta
</td></tr>
<tr style="background:purple;color:white">
<td>Purple
</td></tr>
<tr style="background:indigo;color:white">
<td>Indigo
</td></tr>
<tr style="background:darkslateblue;color:white">
<td>DarkSlateBlue
</td></tr>
<tr style="background:slateblue;color:white">
<td>SlateBlue
</td></tr>
<tr style="background:mediumslateblue;color:white">
<td>MediumSlateBlue
</td></tr>
<tr>
<td style="background:whitesmoke;color:slategray;text-align:center"><big><b>Pinks</b></big>
</td></tr>
<tr style="background:pink;color:black">
<td>Pink
</td></tr>
<tr style="background:lightpink;color:black">
<td>LightPink
</td></tr>
<tr style="background:hotpink;color:white">
<td>HotPink
</td></tr>
<tr style="background:deeppink;color:white">
<td>DeepPink
</td></tr>
<tr style="background:mediumvioletred;color:white">
<td>MediumVioletRed
</td></tr>
<tr style="background:palevioletred;color:white">
<td>PaleVioletRed
</td></tr></tbody></table>
</td>
<td width="20%">
<table width="100%">


<tbody><tr>
<td style="background:whitesmoke;color:slategray;text-align:center"><big><b>Blues</b></big>
</td></tr>
<tr style="background:aqua;color:black">
<td>Aqua
</td></tr>
<tr style="background:cyan;color:black">
<td>Cyan
</td></tr>
<tr style="background:lightcyan;color:black">
<td>LightCyan
</td></tr>
<tr style="background:paleturquoise;color:black">
<td>PaleTurquoise
</td></tr>
<tr style="background:aquamarine;color:black">
<td>Aquamarine
</td></tr>
<tr style="background:turquoise;color:black">
<td>Turquoise
</td></tr>
<tr style="background:mediumturquoise;color:black">
<td>MediumTurquoise
</td></tr>
<tr style="background:darkturquoise;color:white">
<td>DarkTurquoise
</td></tr>
<tr style="background:cadetblue;color:white">
<td>CadetBlue
</td></tr>
<tr style="background:steelblue;color:white">
<td>SteelBlue
</td></tr>
<tr style="background:lightsteelblue;color:black">
<td>LightSteelBlue
</td></tr>
<tr style="background:powderblue;color:black">
<td>PowderBlue
</td></tr>
<tr style="background:lightblue;color:black">
<td>LightBlue
</td></tr>
<tr style="background:skyblue;color:black">
<td>SkyBlue
</td></tr>
<tr style="background:lightskyblue;color:black">
<td>LightSkyBlue
</td></tr>
<tr style="background:deepskyblue;color:white">
<td>DeepSkyBlue
</td></tr>
<tr style="background:dodgerblue;color:white">
<td>DodgerBlue
</td></tr>
<tr style="background:cornflowerblue;color:white">
<td>CornflowerBlue
</td></tr>
<tr style="background:royalblue;color:white">
<td>RoyalBlue
</td></tr>
<tr style="background:blue;color:white">
<td>Blue
</td></tr>
<tr style="background:mediumblue;color:white">
<td>MediumBlue
</td></tr>
<tr style="background:darkblue;color:white">
<td>DarkBlue
</td></tr>
<tr style="background:navy;color:white">
<td>Navy
</td></tr>
<tr style="background:midnightblue;color:white">
<td>MidnightBlue
</td></tr>
<tr>
<td style="background:whitesmoke;color:slategray;text-align:center;"><big><b>Reds</b></big>
</td></tr>
<tr style="background:indianred;color:white">
<td>IndianRed
</td></tr>
<tr style="background:lightcoral;color:black">
<td>LightCoral
</td></tr>
<tr style="background:salmon;color:black">
<td>Salmon
</td></tr>
<tr style="background:darksalmon;color:black">
<td>DarkSalmon
</td></tr>
<tr style="background:lightsalmon;color:black">
<td>LightSalmon
</td></tr>
<tr style="background:red;color:white">
<td>Red
</td></tr>
<tr style="background:crimson;color:white;color:white">
<td>Crimson
</td></tr>
<tr style="background:fireBrick;color:white">
<td>FireBrick
</td></tr>
<tr style="background:darkred;color:white">
<td>DarkRed
</td></tr></tbody></table>
</td>
<td width="20%">
<table width="100%">


<tbody><tr>
<td style="background:whitesmoke;color:slategray;text-align:center"><big><b>Greens</b></big>
</td></tr>
<tr style="background:greenyellow;color:black">
<td>GreenYellow
</td></tr>
<tr style="background:chartreuse;color:black">
<td>Chartreuse
</td></tr>
<tr style="background:lawngreen;color:black">
<td>LawnGreen
</td></tr>
<tr style="background:lime;color:black">
<td>Lime
</td></tr>
<tr style="background:limegreen;color:black">
<td>LimeGreen
</td></tr>
<tr style="background:palegreen;color:black">
<td>PaleGreen
</td></tr>
<tr style="background:lightgreen;color:black">
<td>LightGreen
</td></tr>
<tr style="background:mediumspringgreen;color:black">
<td>MediumSpringGreen
</td></tr>
<tr style="background:springgreen;color:black">
<td>SpringGreen
</td></tr>
<tr style="background:mediumseagreen;color:white">
<td>MediumSeaGreen
</td></tr>
<tr style="background:seagreen;color:white">
<td>SeaGreen
</td></tr>
<tr style="background:forestgreen;color:white">
<td>ForestGreen
</td></tr>
<tr style="background:green;color:white">
<td>Green
</td></tr>
<tr style="background:darkgreen;color:white">
<td>DarkGreen
</td></tr>
<tr style="background:yellowgreen;color:black">
<td>YellowGreen
</td></tr>
<tr style="background:olivedrab;color:white">
<td>OliveDrab
</td></tr>
<tr style="background:olive;color:white">
<td>Olive
</td></tr>
<tr style="background:darkolivegreen;color:white">
<td>DarkOliveGreen
</td></tr>
<tr style="background:mediumaquamarine;color:black">
<td>MediumAquamarine
</td></tr>
<tr style="background:darkseagreen;color:black">
<td>DarkSeaGreen
</td></tr>
<tr style="background:lightseagreen;color:white">
<td>LightSeaGreen
</td></tr>
<tr style="background:darkcyan;color:white">
<td>DarkCyan
</td></tr>
<tr style="background:teal;color:white">
<td>Teal
</td></tr>
<tr>
<td style="background:whitesmoke;color:slategray;text-align:center"><big><b>Oranges</b></big>
</td></tr>
<tr style="background:lightsalmon;color:black">
<td>LightSalmon
</td></tr>
<tr style="background:coral;color:white">
<td>Coral
</td></tr>
<tr style="background:tomato;color:white">
<td>Tomato
</td></tr>
<tr style="background:orangered;color:white">
<td>OrangeRed
</td></tr>
<tr style="background:darkorange;color:white">
<td>DarkOrange
</td></tr>
<tr style="background:orange;color:white">
<td>Orange
</td></tr></tbody></table>
</td>
<td width="20%">
<table width="100%">


<tbody><tr>
<td style="background:whitesmoke;color:slategray;text-align:center"><big><b>Yellows</b></big>
</td></tr>
<tr style="background:gold;color:black">
<td>Gold
</td></tr>
<tr style="background:yellow;color:black">
<td>Yellow
</td></tr>
<tr style="background:lightyellow;color:black">
<td>LightYellow
</td></tr>
<tr style="background:lemonchiffon;color:black">
<td>LemonChiffon
</td></tr>
<tr style="background:lightgoldenrodyellow;color:black">
<td>LightGoldenrodYellow
</td></tr>
<tr style="background:papayawhip;color:black">
<td>PapayaWhip
</td></tr>
<tr style="background:moccasin;color:black">
<td>Moccasin
</td></tr>
<tr style="background:peachpuff;color:black">
<td>PeachPuff
</td></tr>
<tr style="background:palegoldenrod;color:black">
<td>PaleGoldenrod
</td></tr>
<tr style="background:khaki;color:black">
<td>Khaki
</td></tr>
<tr style="background:darkkhaki;color:black">
<td>DarkKhaki
</td></tr>
<tr>
<td style="background:whitesmoke;color:slategray;text-align:center"><big><b>Browns</b></big>
</td></tr>
<tr style="background:cornsilk;color:black">
<td>Cornsilk
</td></tr>
<tr style="background:blanchedalmond;color:black">
<td>BlanchedAlmond
</td></tr>
<tr style="background:bisque;color:black">
<td>Bisque
</td></tr>
<tr style="background:navajowhite;color:black">
<td>NavajoWhite
</td></tr>
<tr style="background:wheat;color:black">
<td>Wheat
</td></tr>
<tr style="background:burlywood;color:black">
<td>BurlyWood
</td></tr>
<tr style="background:tan;color:black">
<td>Tan
</td></tr>
<tr style="background:rosybrown;color:black">
<td>RosyBrown
</td></tr>
<tr style="background:sandybrown;color:black">
<td>SandyBrown
</td></tr>
<tr style="background:goldenrod;color:black">
<td>Goldenrod
</td></tr>
<tr style="background:darkgoldenrod;color:white">
<td>DarkGoldenrod
</td></tr>
<tr style="background:Peru;color:white">
<td>Peru
</td></tr>
<tr style="background:chocolate;color:white">
<td>Chocolate
</td></tr>
<tr style="background:saddlebrown;color:white">
<td>SaddleBrown
</td></tr>
<tr style="background:sienna;color:white">
<td>Sienna
</td></tr>
<tr style="background:brown;color:white">
<td>Brown
</td></tr>
<tr style="background:maroon;color:white">
<td>Maroon
</td></tr>


</tbody></table>
</td>
<td width="20%">
<table width="100%">


<tbody><tr style="background:whitesmoke;color:slategray;text-align:center">
<td><big><b>Whites</b></big>
</td></tr>
<tr style="background:white;">
<td>White
</td></tr>
<tr style="background:snow;">
<td>Snow
</td></tr>
<tr style="background:honeydew;">
<td>Honeydew
</td></tr>
<tr style="background:mintcream;">
<td>MintCream
</td></tr>
<tr style="background:azure;">
<td>Azure
</td></tr>
<tr style="background:aliceblue;">
<td>AliceBlue
</td></tr>
<tr style="background:ghostwhite;">
<td>GhostWhite
</td></tr>
<tr style="background:whitesmoke;">
<td>WhiteSmoke
</td></tr>
<tr style="background:seashell;">
<td>Seashell
</td></tr>
<tr style="background:beige;">
<td>Beige
</td></tr>
<tr style="background:oldlace;">
<td>OldLace
</td></tr>
<tr style="background:floralwhite;">
<td>FloralWhite
</td></tr>
<tr style="background:ivory;">
<td>Ivory
</td></tr>
<tr style="background:antiquewhite;">
<td>AntiqueWhite
</td></tr>
<tr style="background:linen;">
<td>Linen
</td></tr>
<tr style="background:lavenderblush;">
<td>LavenderBlush
</td></tr>
<tr style="background:mistyrose;">
<td>MistyRose
</td></tr>
<tr>
<td colspan="3" style="background:whitesmoke;color:slategray;text-align:center"><big><b>Grays</b></big>
</td></tr>
<tr style="background:gainsboro;color:black">
<td>Gainsboro
</td></tr>
<tr style="background:lightgrey;color:black">
<td>LightGrey
</td></tr>
<tr style="background:silver;color:black">
<td>Silver
</td></tr>
<tr style="background:darkgray;color:black">
<td>DarkGray
</td></tr>
<tr style="background:gray;color:black">
<td>Gray
</td></tr>
<tr style="background:dimgray;color:white">
<td>DimGray
</td></tr>
<tr style="background:lightslategray;color:white">
<td>LightSlateGray
</td></tr>
<tr style="background:slategray;color:white">
<td>SlateGray
</td></tr>
<tr style="background:darkslategray;color:white">
<td>DarkSlateGray
</td></tr>
<tr style="background:black;color:white">
<td>Black
</td></tr></tbody></table>
</td></tr></tbody></table>
<h4>Example</h4>
<div class="thumb tright"><div class="thumbinner" style="width:222px;"><a class="image" href="./imgs/220px-Wavy_multicolor_object.jpg"><img alt="" class="thumbimage" data-file-height="769" data-file-width="815" decoding="async" height="208" src="./imgs/220px-Wavy_multicolor_object.jpg" width="220"/></a>  <div class="thumbcaption">A 3-D multicolor sine wave</div></div></div>
<p>Here's a code fragment that draws a wavy multicolor object
</p>
<pre>  for(i=[0:36]) {
    for(j=[0:36]) {
      color( [0.5+sin(10*i)/2, 0.5+sin(10*j)/2, 0.5+sin(10*(i+j))/2] )
      translate( [i, j, 0] )
      cube( size = [1, 1, 11+10*cos(10*i)*sin(10*j)] );
    }
  }
</pre>
<p>↗
Being that -1&lt;=sin(<i>x</i>)&lt;=1 then 0&lt;=(1/2 + sin(<i>x</i>)/2)&lt;=1 , allowing for the RGB components assigned to color to remain within the [0,1] interval.  
</p><p><i><small><a class="external text" href="https://en.wikipedia.org/wiki/Web_colors">Chart based on "Web Colors" from Wikipedia</a></small></i>
</p>
<h4>Example 2</h4>
<p>In cases where you want to optionally set a color based on a parameter you can use the following trick:
</p>
<pre> module myModule(withColors=false) {
    c=withColors?"red":undef;
    color(c) circle(r=10);
 }
</pre>
<p>Setting the colorname to undef keeps the default colors.
</p>
<h3>offset</h3>
<p><span style="font-weight: bold; font-style: normal;">[<span style="color: #A00000;">Note:</span> <span style="font-weight: normal; font-style: italic;">Requires version <span style="font-weight: bold;">2015.03</span></span>]</span>
</p><p>Offset generates a new 2d interior or exterior outline from an existing outline.
There are two modes of operation.  radial and offset.
The offset method creates a new outline whose sides are a fixed distance outer (delta &gt; 0) or inner (delta &lt; 0) from the original outline.
The radial method creates a new outline as if a circle of some radius is rotated around the exterior (r&gt;0) or interior (r&lt;0) original outline.
</p><p>The construction methods can either produce an outline that is interior or exterior to the original outline.
For exterior outlines the corners can be given an optional chamfer. 
</p><p>Offset is useful for making thin walls by subtracting a negative-offset construction from the original, or the original from a Positive offset construction.
</p><p>Offset can be used to simulate some common solid modeling operations:
</p>
<ul style="list-style-image:none"><li>Fillet: offset(r=-3) offset(delta=+3) rounds all inside (concave) corners, and leaves flat walls unchanged.  However, holes less than 2*r in diameter vanish.</li>
<li>Round: offset(r=+3) offset(delta=-3) rounds all outside (convex) corners, and leaves flat walls unchanged.  However, walls less than 2*r thick vanish.</li></ul>
<dl><dt>Parameters</dt></dl>
<dl><dt>r</dt>
<dd>Double. Amount to offset the polygon. When negative, the polygon is offset inward. R specifies the radius of the circle that is rotated about the outline, either inside or outside. This mode produces rounded corners.</dd>
<dt>delta</dt>
<dd>Double. Amount to offset the polygon. Delta specifies the distance of the new outline from the original outline, and therefore reproduces angled corners. When negative, the polygon is offset inward. No inward perimeter is generated in places where the perimeter would cross itself.</dd>
<dt>chamfer</dt>
<dd>Boolean. (default <i>false</i>) When using the delta parameter, this flag defines if edges should be chamfered (cut off with a straight line) or not (extended to their intersection).</dd></dl>
<div class="thumb tmulti tnone center"><div class="thumbinner" style="width:708px;max-width:708px"><div class="trow"><div class="tsingle" style="width:352px;max-width:352px"><div class="thumbimage"><a class="image" href="./imgs/350px-OpenSCAD_offset_join-type_out.svg.png"><img alt="" data-file-height="500" data-file-width="1000" decoding="async" height="175" src="./imgs/350px-OpenSCAD_offset_join-type_out.svg.png" width="350"/></a></div><div class="thumbcaption">Positive r/delta value</div></div><div class="tsingle" style="width:352px;max-width:352px"><div class="thumbimage"><a class="image" href="./imgs/350px-OpenSCAD_offset_join-type_in.svg.png"><img alt="" data-file-height="500" data-file-width="1000" decoding="async" height="175" src="./imgs/350px-OpenSCAD_offset_join-type_in.svg.png" width="350"/></a></div><div class="thumbcaption">Negative r/delta value</div></div></div><div class="trow" style="display:flex"><div class="thumbcaption">Result for different parameters. The black polygon is the input for the offset() operation.</div></div></div></div>
<p><b>Examples</b>
</p>
<div class="thumb tright"><div class="thumbinner" style="width:222px;"><a class="image" href="./imgs/220px-OpenSCAD_offset_example.png"><img alt="" class="thumbimage" data-file-height="600" data-file-width="800" decoding="async" height="165" src="./imgs/220px-OpenSCAD_offset_example.png" width="220"/></a>  <div class="thumbcaption">Example 1: Result.</div></div></div>
<pre>// Example 1
 
linear_extrude(height = 60, twist = 90, slices = 60) {
   difference() {
     offset(r = 10) {
      square(20, center = true);
     }
     offset(r = 8) {
       square(20, center = true);
     }
   }
 }
</pre>
<pre>// Example 2
 
module fillet(r) {
   offset(r = -r) {
     offset(delta = r) {
       children();
     }
   }
}
</pre>
<p><br clear="all"/>
</p>
<h3>minkowski</h3>
<div class="thumb tright"><div class="thumbinner" style="width:202px;"><a class="image" href="./imgs/200px-Openscad_minkowski_example_1a.png"><img alt="" class="thumbimage" data-file-height="420" data-file-width="563" decoding="async" height="149" src="./imgs/200px-Openscad_minkowski_example_1a.png" width="200"/></a>  <div class="thumbcaption">A box and a cylinder</div></div></div>
<div class="thumb tright"><div class="thumbinner" style="width:202px;"><a class="image" href="./imgs/200px-Openscad_minkowski_example_2a.png"><img alt="" class="thumbimage" data-file-height="420" data-file-width="563" decoding="async" height="149" src="./imgs/200px-Openscad_minkowski_example_2a.png" width="200"/></a>  <div class="thumbcaption">Minkowski sum of the box and cylinder</div></div></div>
<p>Displays the <a class="external text" href="https://www.cgal.org/Manual/latest/doc_html/cgal_manual/Minkowski_sum_3/Chapter_main.html" rel="nofollow">minkowski sum</a> of child nodes.
</p><p>Usage example:
</p><p>Say you have a flat box, and you want a rounded edge. There are multiple ways to do this (for example, see <a href="#hull">hull</a> below), but minkowski is elegant. Take your box, and a cylinder:
</p>
<pre> $fn=50;
 cube([10,10,1]);
 cylinder(r=2,h=1);
</pre>
<p>Then, do a minkowski sum of them (note that the outer dimensions of the box are now 10+2+2 = 14 units by 14 units by 2 units high as the heights of the objects are summed):
</p>
<pre>$fn=50;
minkowski()
{
  cube([10,10,1]);
  cylinder(r=2,h=1);
}
</pre>
<p>NB: The <u><b>origin</b></u> of the second object is used for the addition. If the second object is not centered, then the addition is asymmetric. The following minkowski sums are different: the first expands the original cube by 0.5 units in all directions, both positive and negative. The second expands it by +1 in each positive direction, but doesn't expand in the negative directions.
</p>
<pre>minkowski() {
	cube([10, 10, 1]);
	cylinder(1, center=true);
}
</pre>
<pre>minkowski() {
	cube([10, 10, 1]);
	cylinder(1);
}
</pre>
<p><b>Warning:</b> for high values of $fn the minkowski sum may end up consuming lots of CPU and memory, since it has to combine every child node of each element with all the nodes of each other element. So if for example $fn=100 and you combine two cylinders, then it does not just perform 200 operations as with two independent cylinders, but 100*100 = 10000 operations.
</p>
<h3>hull</h3>
<div class="thumb tright"><div class="thumbinner" style="width:202px;"><a class="image" href="./imgs/200px-Openscad_hull_example_1a.png"><img alt="" class="thumbimage" data-file-height="420" data-file-width="564" decoding="async" height="149" src="./imgs/200px-Openscad_hull_example_1a.png" width="200"/></a>  <div class="thumbcaption">Two cylinders</div></div></div>
<div class="thumb tright"><div class="thumbinner" style="width:202px;"><a class="image" href="./imgs/200px-Openscad_hull_example_2a.png"><img alt="" class="thumbimage" data-file-height="420" data-file-width="564" decoding="async" height="149" src="./imgs/200px-Openscad_hull_example_2a.png" width="200"/></a>  <div class="thumbcaption">Convex hull of two cylinders</div></div></div>
<p>Displays the <a class="external text" href="https://www.cgal.org/Manual/latest/doc_html/cgal_manual/Convex_hull_2/Chapter_main.html" rel="nofollow">convex hull</a> of child nodes.
</p><p>Usage example:
</p>
<pre>hull() {
    translate([15,10,0]) circle(10);
    circle(10);
}
</pre>
<p>The Hull of 2D objects uses their projections (shadows) on the xy plane, and produces a result on the xy plane.  Their Z-height is not used in the operation.
</p>
<h2>Combining transformations</h2>
<p>When combining transformations, it is a sequential process, but going right-to-left. That is
</p>
<pre> rotate( ... ) translate ( ... ) cube(5) ;
</pre>
<p>would first move the cube, and then move it in an arc (while also rotating it by the same angle) at the radius given by the translation.
</p>
<pre> translate ( ... ) rotate( ... ) cube(5) ;
</pre>
<p>would first rotate the cube and then move it to the offset defined by the translate.
</p>
<div class="thumb tright"><div class="thumbinner" style="width:202px;"><a class="image" href="./imgs/200px-Openscad_combined_transform.png"><img alt="" class="thumbimage" data-file-height="242" data-file-width="225" decoding="async" height="215" src="./imgs/200px-Openscad_combined_transform.png" width="200"/></a>  <div class="thumbcaption">Combine two transforms</div></div></div>
<pre>color("red")   translate([0,10,0])  rotate([45,0,0])     cube(5);
color("green") rotate([45,0,0])     translate([0,10,0])  cube(5);
</pre>
<p style="page-break-after:always;"></p>
<h1>Chapter 5 -- Boolean combination</h1>
<p><big>OpenSCAD User Manual/The OpenSCAD Language</big>
</p>

<h3>boolean overview</h3>
<h5>2D examples</h5>
<ul class="gallery mw-gallery-traditional" style="list-style-image:none">
		<li class="gallerybox" style="width: 155px"><div style="width: 155px">
			<div class="thumb" style="width: 150px;"><div style="margin:23.5px auto;"><a class="image" href="./imgs/120px-OpenSCAD_Boolean_Union_2D.jpg"><img alt="" data-file-height="453" data-file-width="529" decoding="async" height="103" src="./imgs/120px-OpenSCAD_Boolean_Union_2D.jpg" width="120"/></a></div></div>
			<div class="gallerytext">
<p>union ( or )           <br/> circle + square
</p>
			</div>
		</div></li>
		<li class="gallerybox" style="width: 155px"><div style="width: 155px">
			<div class="thumb" style="width: 150px;"><div style="margin:23.5px auto;"><a class="image" href="./imgs/120px-OpenSCAD_Boolean_Difference_2D.jpg"><img alt="" data-file-height="453" data-file-width="529" decoding="async" height="103" src="./imgs/120px-OpenSCAD_Boolean_Difference_2D.jpg" width="120"/></a></div></div>
			<div class="gallerytext">
<p>difference ( and not ) <br/> square - circle
</p>
			</div>
		</div></li>
		<li class="gallerybox" style="width: 155px"><div style="width: 155px">
			<div class="thumb" style="width: 150px;"><div style="margin:23.5px auto;"><a class="image" href="./imgs/120px-OpenSCAD_Boolean_Difference_1_2D.jpg"><img alt="" data-file-height="453" data-file-width="529" decoding="async" height="103" src="./imgs/120px-OpenSCAD_Boolean_Difference_1_2D.jpg" width="120"/></a></div></div>
			<div class="gallerytext">
<p>difference ( and not ) <br/> circle - square
</p>
			</div>
		</div></li>
		<li class="gallerybox" style="width: 155px"><div style="width: 155px">
			<div class="thumb" style="width: 150px;"><div style="margin:23.5px auto;"><a class="image" href="./imgs/120px-OpenSCAD_Boolean_Intersection_2D.jpg"><img alt="" data-file-height="453" data-file-width="529" decoding="async" height="103" src="./imgs/120px-OpenSCAD_Boolean_Intersection_2D.jpg" width="120"/></a></div></div>
			<div class="gallerytext">
<p>intersection ( and )   <br/> circle - (circle - square)
</p>
			</div>
		</div></li>
</ul>
<pre> union()       {square(10);circle(10);} // square or  circle
 difference()  {square(10);circle(10);} // square and not circle
 difference()  {circle(10);square(10);} // circle and not square
 intersection(){square(10);circle(10);} // square and circle
</pre>
<h5>3D examples</h5>
<ul class="gallery mw-gallery-traditional" style="list-style-image:none">
		<li class="gallerybox" style="width: 155px"><div style="width: 155px">
			<div class="thumb" style="width: 150px;"><div style="margin:15px auto;"><a class="image" href="./imgs/107px-OpenScad_Boolean_Union.jpg"><img alt="" data-file-height="204" data-file-width="182" decoding="async" height="120" src="./imgs/107px-OpenScad_Boolean_Union.jpg" width="107"/></a></div></div>
			<div class="gallerytext">
<p>union ( or )           <br/> sphere + cube
</p>
			</div>
		</div></li>
		<li class="gallerybox" style="width: 155px"><div style="width: 155px">
			<div class="thumb" style="width: 150px;"><div style="margin:15px auto;"><a class="image" href="./imgs/118px-Boolean_Difference_1a.jpg"><img alt="" data-file-height="203" data-file-width="200" decoding="async" height="120" src="./imgs/118px-Boolean_Difference_1a.jpg" width="118"/></a></div></div>
			<div class="gallerytext">
<p>difference ( and not ) <br/> cube - sphere
</p>
			</div>
		</div></li>
		<li class="gallerybox" style="width: 155px"><div style="width: 155px">
			<div class="thumb" style="width: 150px;"><div style="margin:17.5px auto;"><a class="image" href="./imgs/120px-OpenScad_Boolean_Difference_2.jpg"><img alt="" data-file-height="162" data-file-width="169" decoding="async" height="115" src="./imgs/120px-OpenScad_Boolean_Difference_2.jpg" width="120"/></a></div></div>
			<div class="gallerytext">
<p>difference ( and not ) <br/> sphere - cube
</p>
			</div>
		</div></li>
		<li class="gallerybox" style="width: 155px"><div style="width: 155px">
			<div class="thumb" style="width: 150px;"><div style="margin:16.5px auto;"><a class="image" href="./imgs/120px-OpenScad_Boolean_Intersection.jpg"><img alt="" data-file-height="162" data-file-width="166" decoding="async" height="117" src="./imgs/120px-OpenScad_Boolean_Intersection.jpg" width="120"/></a></div></div>
			<div class="gallerytext">
<p>intersection ( and )   <br/> sphere - (sphere - cube)
</p>
			</div>
		</div></li>
</ul>
<pre> union()       {cube(12, center=true); sphere(8);} // cube or  sphere
 difference()  {cube(12, center=true); sphere(8);} // cube and not sphere
 difference()  {sphere(8); cube(12, center=true);} // sphere and not cube
 intersection(){cube(12, center=true); sphere(8);} // cube and sphere
</pre>
<h3>union</h3>
<p>Creates a union of all its child nodes. This is the <b>sum</b> of all children (logical <b>or</b>).<br/>
May be used with either 2D or 3D objects, but don't mix them.
</p><p><a class="image" href="./imgs/400px-Openscad_union.jpg" title="Union"><img alt="Union" data-file-height="924" data-file-width="1232" decoding="async" height="300" src="./imgs/400px-Openscad_union.jpg" width="400"/></a>
</p>
<pre> //Usage example:
 union() {
 	cylinder (h = 4, r=1, center = true, $fn=100);
 	rotate ([90,0,0]) cylinder (h = 4, r=0.9, center = true, $fn=100);
 }
</pre>
<p>Remark: union is implicit when not used. But it is mandatory, for example, in difference to group first child nodes into one.
</p><p><b>Note:</b> It is mandatory for all unions, explicit or implicit, that external faces to be merged not be coincident.  Failure to follow this rule results in a design with undefined behavior, and can result in a render which is not manifold (with zero volume portions, or portions inside out), which typically leads to a warning and sometimes removal of a portion of the design from the rendered output.  (This can also result in <a href="FAQ.html#What_are_those_strange_flickering_artifacts_in_the_preview?" title="OpenSCAD User Manual/FAQ">flickering effects during the preview</a>.)  This requirement is not a bug, but an intrinsic property of floating point comparisons and the fundamental inability to exactly represent irrational numbers such as those resulting from most rotations.  As an example, this is an invalid OpenSCAD program, and will at least lead to a warning on most platforms:
</p>
<pre> // Invalid!
 size = 10;
 rotation = 17;
 union() {
    rotate([rotation, 0, 0])
       cube(size);
    rotate([rotation, 0, 0])
       translate([0, 0, size])
       cube([2, 3, 4]);
 }
</pre>
<p>The solution is to always use a small value called an epsilon when merging adjacent faces like this to guarantee overlap.  Note the 0.01 eps value used in TWO locations, so that the external result is equivalent to what was intended:
</p>
<pre> // Correct!
 size = 10;
 rotation = 17;
 eps = 0.01;
 union() {
    rotate([rotation, 0, 0])
       cube(size);
    rotate([rotation, 0, 0])
       translate([0, 0, size-eps])
       cube([2, 3, 4+eps]);
 }
</pre>
<h3>difference</h3>
<p>Subtracts the 2nd (and all further) child nodes from the first one (logical <b>and not</b>).<br/>
May be used with either 2D or 3D objects, but don't mix them.
</p><p><a class="image" href="./imgs/400px-Openscad_difference.jpg" title="Difference"><img alt="Difference" data-file-height="924" data-file-width="1232" decoding="async" height="300" src="./imgs/400px-Openscad_difference.jpg" width="400"/></a>
</p>
<pre>Usage example:
difference() {
	cylinder (h = 4, r=1, center = true, $fn=100);
	rotate ([90,0,0]) cylinder (h = 4, r=0.9, center = true, $fn=100);
}
</pre>
<p><b>Note:</b> It is mandatory that surfaces that are to be removed by a difference operation have an overlap, and that the negative piece being removed extends fully outside of the volume it is removing that surface from.  Failure to follow this rule can cause <a href="FAQ.html#What_are_those_strange_flickering_artifacts_in_the_preview?" title="OpenSCAD User Manual/FAQ">preview artifacts</a> and can result in non-manifold render warnings or the removal of pieces from the render output.  See the description above in union for why this is required and an example of how to do this by this using a small epsilon value.
</p>
<h5>difference with multiple children</h5>
<p>Note, in the second instance, the result of adding a union of the 1st and 2nd children.
</p><p><a class="image" href="./imgs/Bollean_Difference_3.jpg"><img alt="Bollean Difference 3.jpg" data-file-height="262" data-file-width="256" decoding="async" height="307" src="./imgs/Bollean_Difference_3.jpg" width="300"/></a>
</p>
<pre>// Usage example for difference of multiple children:
$fn=90;
difference(){
                                            cylinder(r=5,h=20,center=true);
    rotate([00,140,-45]) color("LightBlue") cylinder(r=2,h=25,center=true);
    rotate([00,40,-50])                     cylinder(r=2,h=30,center=true);
    translate([0,0,-10])rotate([00,40,-50]) cylinder(r=1.4,h=30,center=true);
}
   
// second instance with added union
translate([10,10,0]){
    difference(){
      union(){        // combine 1st and 2nd children
                                                cylinder(r=5,h=20,center=true);
        rotate([00,140,-45]) color("LightBlue") cylinder(r=2,h=25,center=true);
      }
      rotate([00,40,-50])                       cylinder(r=2,h=30,center=true);
      translate([0,0,-10])rotate([00,40,-50])   cylinder(r=1.4,h=30,center=true);
    }
}
</pre>
<h3>intersection</h3>
<p>Creates the intersection of all child nodes. This keeps the <b>overlapping</b> portion (logical <b>and</b>).
<br/>
Only the area which is common or shared by <b>all</b> children is retained.<br/>
May be used with either 2D or 3D objects, but don't mix them.
</p><p><a class="image" href="./imgs/400px-Openscad_intersection.jpg" title="Intersection"><img alt="Intersection" data-file-height="924" data-file-width="1232" decoding="async" height="300" src="./imgs/400px-Openscad_intersection.jpg" width="400"/></a>
</p>
<pre>//Usage example:
intersection() {
	cylinder (h = 4, r=1, center = true, $fn=100);
	rotate ([90,0,0]) cylinder (h = 4, r=0.9, center = true, $fn=100);
}
</pre>
<p><br/>
</p>
<h3>render</h3>
<p><b>Warning:</b> Using render, always calculates the CSG model for this tree (even in OpenCSG preview mode).
This can make previewing very slow and OpenSCAD to appear to hang/freeze.
</p>
<pre>Usage example:
render(convexity = 1) { ... }
</pre>
<table border="1">

<tbody><tr>
<td>convexity
</td>
<td>Integer. The convexity parameter specifies the maximum number of front and back sides a ray intersecting the object might penetrate. This parameter is only needed for correctly displaying the object in OpenCSG preview mode and has no effect on the polyhedron rendering.
</td></tr></tbody></table>
<p><br/>
<a class="image" href="./imgs/400px-Openscad_convexity.jpg"><img alt="Openscad convexity.jpg" data-file-height="924" data-file-width="1232" decoding="async" height="300" src="./imgs/400px-Openscad_convexity.jpg" width="400"/></a>
</p><p>This image shows a 2D shape with a convexity of 4, as the ray indicated in red crosses the 2D shape a maximum of 4 times. The convexity of a 3D shape would be determined in a similar way. Setting it to 10 should work fine for most cases.
</p>
<p style="page-break-after:always;"></p>
<h1>Chapter 6 -- Other Functions and Operators</h1>
<p><big>OpenSCAD User Manual/The OpenSCAD Language</big>
</p>
<h2>Conditional and Iterator Functions</h2>
<h3>For loop</h3>
<hr/>
<p>Evaluate each value in a range or vector, applying it to the following Action.
</p>
<pre> for(variable = [start : increment : end])
 for(variable = [start : end])
 for(variable = [vector])
</pre>
<p><b> parameters</b> 
</p>
<dl><dd>As a range <b>[</b> start <b>:</b> &lt;increment <b>:</b> &gt; end <b>]</b> (see section on <a href="General.html#Ranges" title="OpenSCAD User Manual/General">range</a>)
<dl><dd><dl><dd><sub><i>Note: For range, values are separated by colons rather than commas used in vectors.</i></sub></dd></dl></dd>
<dd><b>start</b> - initial value</dd>
<dd><b>increment</b> or step - amount to increase the value, <i>optional, default = 1</i></dd>
<dd><b>end</b> - stop when next value would be past end</dd></dl></dd></dl>
<dl><dd><b> examples</b>:</dd></dl>
<pre> for (a =[3:5])echo(a);     // 3 4 5
 for (a =[3:0]){echo(a);}   // 0 1 2 3         start &gt; end is invalid, deprecated by 2015.3
 for (a =[3:0.5:5])echo(a); // 3 3.5 4 4.5 5
 for (a =[0:2:5])echo(a);   // 0 2 4           a never equals end 
 for (a =[3:-2:-1])echo(a); // 3 1 -1          negative increment requires 2015.3
                                               be sure end &lt; start
</pre>
<dl><dd>As a vector
<dl><dd>The Action is evaluated for each element of the vector</dd></dl></dd></dl>
<pre> for (a =[3,4,1,5])echo(a); // 3 4 1 5
 for (a =[0.3,PI,1,99]){echo(a);}    // 0.3 3.14159 1 99
 x1=2; x2=8; x3=5.5;
 for (a =[x1,x2,x3]){echo(a);} // 2 8 5.5 
 for (a =[[1,2],6,"s",[[3,4],[5,6]]])echo(a);  // [1,2] 6 "s" [[3,4],[5,6]] 
</pre>
<dl><dd>The vector can be described elsewhere, like 'for each' in other languages</dd></dl>
<pre> animals = ["elephants", "snakes", "tigers", "giraffes"];
   for(animal = animals)
     echo(str("I've been to the zoo and saw ", animal));
 // "I've been to the zoo and saw elephants", for each animal
</pre>
<p>for() is an Operator. Operators require braces {} if more than one Action is within it scope. Actions end in semicolons, Operators do not.
</p><p>for() is not an exception to the rule about variables having only one value within a scope. Each evaluation  is given its own scope, allowing any variables to have unique values. No, you still can't do a=a+1;
</p><p>Remember this is not an iterative language, the for() does not loop in the programmatic sense, it builds a tree of objects one branch for each item in the range/vector, inside each branch  the 'variable' is a specific and separate instantiation or scope.
</p><p>Hence:
</p>
<pre>for (i=[0:3])
   translate([i*10,0,0])
     cube(i+1);
</pre>
<p>Produces:
<sub><i>[See Design/Display-CSG-Tree menu]</i></sub>
</p>
<pre> group() {
       group() {
               multmatrix([[1, 0, 0, 0], [0, 1, 0, 0], [0, 0, 1, 0], [0, 0, 0, 1]]) {
                       cube(size = [1, 1, 1], center = false);
               }
               multmatrix([[1, 0, 0, 10], [0, 1, 0, 0], [0, 0, 1, 0], [0, 0, 0, 1]]) {
                       cube(size = [2, 2, 2], center = false);
               }
               multmatrix([[1, 0, 0, 20], [0, 1, 0, 0], [0, 0, 1, 0], [0, 0, 0, 1]]) {
                       cube(size = [3, 3, 3], center = false);
               }
               multmatrix([[1, 0, 0, 30], [0, 1, 0, 0], [0, 0, 1, 0], [0, 0, 0, 1]]) {
                       cube(size = [4, 4, 4], center = false);
               }
       }
}
</pre>
<p>While the group() is built sequentially, all instances of the for() exist as separate entities, they do not iterate one piece of code sequentially. 
</p>
<dl><dd><b>Nested for()</b></dd></dl>
<p>While it is reasonable to nest multiple for() statements such as:
</p>
<pre>for(z=[-180:45:+180])
  for(x=[10:5:50])
    rotate([0,0,z]) translate([x,0,0]) cube(1);
</pre>
<p>instead, all ranges/vectors can be included in the same for() operator. 
</p>
<pre>for ( variable1 = &lt;range or vector&gt; , variable2 = &lt;range or vector&gt; ) &lt;do something using both variables&gt;
</pre>
<div class="thumb tright"><div class="thumbinner" style="width:382px;"><a class="image" href="./imgs/380px-OpenSCAD_Manual_nested_for.jpg"><img alt="" class="thumbimage" data-file-height="283" data-file-width="419" decoding="async" height="257" src="./imgs/380px-OpenSCAD_Manual_nested_for.jpg" width="380"/></a>  <div class="thumbcaption">for() loops nested 3 deep</div></div></div>
<pre> example for() nested 3 deep
 
 color_vec = ["black","red","blue","green","pink","purple"];
 for (x = [-20:10:20] )
 for (y = [0:4] )color(color_vec[y])
 for (z = [0,4,10] )
     {translate([x,y*5-10,z])cube();}
 
 <big><b>shorthand</b></big> nesting for same result
 
 color_vec = ["black","red","blue","green","pink","purple"];
 for (x = [-20:10:20],
 y = [0:4],
 z = [0,4,10] )
     translate([x,y*5-10,z]){color(color_vec[y])cube();}
</pre>
<dl><dd><b>Examples using vector of vectors</b></dd></dl>
<div class="thumb tright"><div class="thumbinner" style="width:222px;"><a class="image" href="./imgs/220px-OpenSCAD_For_Rotation.png"><img alt="" class="thumbimage" data-file-height="345" data-file-width="387" decoding="async" height="196" src="./imgs/220px-OpenSCAD_For_Rotation.png" width="220"/></a>  <div class="thumbcaption">example 1 for() loop vector of vectors (rotation)</div></div></div>
<pre>example 1 - iteration over a vector of vectors (rotation)
  
 for(i = [ [  0,  0,   0],
           [ 10, 20, 300],
           [200, 40,  57],
           [ 20, 88,  57] ])
{
   rotate(i)
   cube([100, 20, 20], center = true);
}
</pre>
<p><br/>
</p>
<div class="thumb tright"><div class="thumbinner" style="width:222px;"><a class="image" href="./imgs/220px-OpenSCAD_For_Translation.png"><img alt="" class="thumbimage" data-file-height="342" data-file-width="381" decoding="async" height="197" src="./imgs/220px-OpenSCAD_For_Translation.png" width="220"/></a>  <div class="thumbcaption">example 2 for() loop vector of vectors (translation)</div></div></div>
<pre>example 2 - iteration over a vector of vectors (translation)
  
for(i = [ [ 0,  0,  0],
          [10, 12, 10],
          [20, 24, 20],
          [30, 36, 30],
          [20, 48, 40],
          [10, 60, 50] ])
{
   translate(i)
   cube([50, 15, 10], center = true);
}
</pre>
<div class="thumb tright"><div class="thumbinner" style="width:222px;"><a class="image" href="./imgs/220px-OpenSCAD_Vector_of_vectors_example_3.jpg"><img alt="" class="thumbimage" data-file-height="247" data-file-width="300" decoding="async" height="181" src="./imgs/220px-OpenSCAD_Vector_of_vectors_example_3.jpg" width="220"/></a>  <div class="thumbcaption">example 3 for() loop vector of vectors</div></div></div>
<pre>example 3 - iteration over a vector of vectors
for(i = [ [[ 0,  0,  0], 20],
          [[10, 12, 10], 50],
          [[20, 24, 20], 70],
          [[30, 36, 30], 10],
          [[20, 48, 40], 30],
          [[10, 60, 50], 40] ])
{
  translate([i[0][0], 2*i[0][1], 0])
  cube([10, 15, i[1]]);
}
</pre>
<h3>Intersection For Loop</h3>
<hr/>
<p>Iterate over the values in a range or vector and create the <a href="The_OpenSCAD_Language.html#intersection" title="OpenSCAD User Manual/The OpenSCAD Language">intersection</a> of  objects created by each pass.
</p><p>Besides creating separate instances for each pass, the standard  <b>for()</b>  also groups all these instances creating an implicit union.
<b>intersection_for()</b> is a work around because the implicit union prevents getting the expected results using a combination of the standard <b>for()</b> and <b>intersection()</b> statements. 
</p><p><b>intersection_for()</b> uses the same parameters, and works the same as a <a href="#For_Loop">For Loop</a>, 
other than eliminating the implicit union.
</p>
<table width="100%">
<tbody><tr>
<td><b>example 1 - loop over a range:</b>
</td></tr>
<tr>
<td><pre>intersection_for(n = [1 : 6])
{
    rotate([0, 0, n * 60])
    {
        translate([5,0,0])
        sphere(r=12);
    }
}
</pre>
</td>
<td><div class="thumb tright"><div class="thumbinner" style="width:222px;"><a class="image" href="./imgs/220px-OpenSCAD_Intersection_For_Range.png"><img alt="" class="thumbimage" data-file-height="350" data-file-width="384" decoding="async" height="201" src="./imgs/220px-OpenSCAD_Intersection_For_Range.png" width="220"/></a>  <div class="thumbcaption">intersection_for()</div></div></div>
</td>
<td><div class="thumb tright"><div class="thumbinner" style="width:222px;"><a class="image" href="./imgs/220px-OpenSCAD_Intersection_28_29for_28_29_example1.jpg"><img alt="" class="thumbimage" data-file-height="269" data-file-width="311" decoding="async" height="190" src="./imgs/220px-OpenSCAD_Intersection_28_29for_28_29_example1.jpg" width="220"/></a>  <div class="thumbcaption">either intersection() for() or for() intersection()</div></div></div>
</td></tr></tbody></table>
<p><br/>
</p>
<table width="100%">
<tbody><tr>
<td><b>example 2 - rotation </b>:
</td></tr>
<tr>
<td><pre> intersection_for(i = [ [  0,  0,   0],
 			[ 10, 20, 300],
 			[200, 40,  57],
 			[ 20, 88,  57] ])
{
    rotate(i)
    cube([100, 20, 20], center = true);
}
</pre>
</td>
<td><div class="thumb tright"><div class="thumbinner" style="width:222px;"><a class="image" href="./imgs/220px-OpenSCAD_Intersection_For_Rotation.png"><img alt="" class="thumbimage" data-file-height="356" data-file-width="386" decoding="async" height="203" src="./imgs/220px-OpenSCAD_Intersection_For_Rotation.png" width="220"/></a>  <div class="thumbcaption">intersection_for()</div></div></div>
</td>
<td><div class="thumb tright"><div class="thumbinner" style="width:222px;"><a class="image" href="./imgs/220px-OpenSCAD_Intersection_28_29for_28_29_example_2.jpg"><img alt="" class="thumbimage" data-file-height="256" data-file-width="281" decoding="async" height="200" src="./imgs/220px-OpenSCAD_Intersection_28_29for_28_29_example_2.jpg" width="220"/></a>  <div class="thumbcaption">intersection()  for()</div></div></div>
</td></tr></tbody></table>
<h3>If Statement</h3>
<hr/>
<p>Performs a test to determine if the actions in a sub scope should be performed or not.
</p>
<pre>if (test) scope1
if (test){scope1}
if (test) scope1  else  scope2
if (test){scope1} else {scope2}
</pre>
<dl><dd><b>Parameters</b></dd></dl>
<dl><dd><dl><dd><b>test</b>: Usually a boolean expression, but can be any value or variable.
<dl><dd><a href="General.html#Boolean_Values" title="OpenSCAD User Manual/General"> See here for true or false state of values.</a></dd>
<dd><a href="Mathematical_Operators.html#Relational_Operators" title="OpenSCAD User Manual/Mathematical Operators">See here for boolean and logical operators</a></dd>
<dd>Do not confuse the assignment operator '=' with the equal operator '=='</dd></dl></dd>
<dd><b>scope1</b>: one or more actions to take when test is <b>true</b>.</dd>
<dd><b>scope2</b>: one or more actions to take when test is <b>false</b>.</dd></dl></dd></dl>
<pre>if (b==a)  cube(4);
if (b&lt;a)  {cube(4); cylinder(6);}
if (b&amp;&amp;a) {cube(4); cylinder(6);}
if (b!=a)  cube(4); else cylinder(3);
if (b)    {cube(4); cylinder(6);} else {cylinder(10,5,5);} 
if (!true){cube(4); cylinder(6);} else  cylinder(10,5,5); 
if (x&gt;y)   cube(1, center=false); else {cube(size = 2, center = true);}
if (a==4) {}                      else  echo("a is not 4");
if ((b&lt;5)&amp;&amp;(a&gt;8))  {cube(4);}     else {cylinder(3);}
if (b&lt;5&amp;&amp;a&gt;8)       cube(4);      else  cylinder(3);
</pre>
<p>Since 2015.03 variables can now be assigned in any scope. Note that assignments are only valid within the scope in which they are defined - you are still not allowed to leak values to an outer scope. See <a href="#Scope_of_variables">Scope of variables</a> for more details.
</p>
<dl><dd><b>Nested if</b></dd></dl>
<p>The scopes of both the <b>if()</b> portion and the <b>else</b> portion, can in turn contain <b>if()</b> statements. This nesting can be to many depths.
</p>
<pre> if (test1) 
 {
   scope1 if (test2) {scope2.1}
          else {scope2.2}
 }
 else
{
  scope2 if (test3) {scope3.1}
         else {scope3.2}
}

</pre>
<p>When scope1 and scope2 contain <b>only</b> the if() statement, the outer sets of braces can be removed.
</p>
<pre> if (test1)
   if (test2) {scope2.1}
   else {scope2.2}
 else
   if (test3) {scope3.1}
   else {scope3.2}
</pre>
<p>One evolution is this:
</p>
<h4>else if</h4>
<pre>      if(test1) {scope1}
 else if(test2) {scope2}
 else if(test3) {scope3}
 else if(test4) {scope4}
 else           {scope5}
</pre>
<p>Note that <i>else</i> and <i>if</i> are two separate words. When working down the chain of tests, the first true uses its scope. All further tests are skipped.
</p>
<dl><dt>example</dt></dl>
<pre>if((k&lt;8)&amp;&amp;(m&gt;1)) cube(10);
else if(y==6)   {sphere(6);cube(10);}
else if(y==7)    color("blue")sphere(5);
else if(k+m!=8) {cylinder(15,5,0);sphere(8);}
else             color("green"){cylinder(12,5,0);sphere(8);}
</pre>
<h3>Conditional ? :</h3>
<hr/>
<p>A function that uses a test to determine which of 2 values to return.
</p>
<pre> a =   test ? TrueValue : FalseValue ;
 echo( test ? TrueValue : FalseValue );
</pre>
<dl><dd><b>Parameters</b></dd></dl>
<dl><dd><dl><dd><b>test</b>: Usually a boolean expression, but can be any value or variable.
<dl><dd><a href="General.html#Boolean_Values" title="OpenSCAD User Manual/General"> See here for true or false state of values.</a></dd>
<dd><a href="Mathematical_Operators.html#Relational_Operators" title="OpenSCAD User Manual/Mathematical Operators">See here for boolean and logical operators</a></dd>
<dd>Do not confuse assignment '=' with equal '=='</dd></dl></dd>
<dd><b>TrueValue</b>:  the value to return when test is <b>true</b>.</dd>
<dd><b>FalseValue</b>: the value to return when test is <b>false</b>.
<dl><dd><dl><dd>A value in OpenSCAD is either a Number (like 42), a Boolean (like true), a String (like "foo"), a Vector (like [1,2,3]), or the Undefined value (undef). Values can be stored in variables, passed as function arguments, and returned as function results.</dd></dl></dd></dl></dd></dl></dd></dl>
<p>This works like the <tt>?:</tt> operator from the family of C-like programming languages.
</p>
<dl><dd><b>Examples</b></dd></dl>
<pre> a=1; b=2; c= a==b ? 4 : 5 ;                  //  5
 a=1; b=2; c= a==b ? "a==b" : "a!=b" ;        //  "a!=b"
  
 TrueValue = true; FalseValue = false;
 a=5; test = a==1;
 echo( test ? TrueValue : FalseValue );       // false
  
 L = 75; R = 2; test = (L/R)&gt;25;
 TrueValue =  [test,L,R,L/R,cos(30)];
 FalseValue = [test,L,R,sin(15)];
 a1 = test ? TrueValue : FalseValue ;         // [true, 75, 2, 37.5, 0.866025]
</pre>
<pre>Some forms of <a href="User-Defined_Functions_and_Modules.html#Recursive_functions" title="OpenSCAD User Manual/User-Defined Functions and Modules">tail-recursion</a> elimination are supported.
</pre>
<h4>Recursive function calls</h4>
<p>Recursive function calls are supported. Using the Conditional "... ? ... : ... " it's possible to ensure the recursion is terminated.
Note: There is a built-in recursion limit to prevent an application crash. If the limit is hit, the function returns undef.
</p>
<dl><dd><b>example</b></dd></dl>
<pre> // recursion - find the sum of the values in a vector (array) by calling itself
 // from the start (or s'th element) to the i'th element - remember elements are zero based

 function sumv(v, i, s = 0) = (i == s ? v[i] : v[i] + sumv(v, i-1, s));
 
 vec=[ 10, 20, 30, 40 ];
 echo("sum vec=", sumv(vec, 2, 1)); // calculates 20+30=50
</pre>
<h4>Formatting complex usage</h4>
<p>Multiple nested conditionals can become difficult to understand.
Formatting them like multi-line indented "if/else" statements is clearer.
</p>
<pre>// find the maximum value in a vector
function maxv(v, m=-999999999999, i=0) = 
    (i == len(v) ) 
    ?     m 
    :     (m &gt; v[i]) 
          ?    maxv(v, m, i+1) 
          :    maxv(v, v[i], i+1);

v=[7,3,9,3,5,6];
echo("max",maxv(v));   // ECHO: "max", 9

</pre>
<h3>Assign Statement</h3>
<hr/>
<p>[<i><span style="font-weight: bold; color: #A00000;">Deprecated:</span> <b>assign()</b> will be removed in future releases. Variables can now be assigned anywhere. If you prefer this way of setting values, the new <a href="#Let_Statement">Let Statement</a> can be used instead.</i>]
</p><p>Set variables to a new value for a sub-tree.
</p>
<dl><dd><b>Parameters</b></dd></dl>
<dl><dd><dl><dd>The variables that should be (re-)assigned</dd></dl></dd></dl>
<dl><dd><b>example:</b></dd></dl>
<pre>for (i = [10:50])
{
    assign (angle = i*360/20, distance = i*10, r = i*2)
    {
        rotate(angle, [1, 0, 0])
        translate([0, distance, 0])
        sphere(r = r);
    }
}
</pre>
<pre>for (i = [10:50])
{
    angle = i*360/20;
    distance = i*10;
    r = i*2;
    rotate(angle, [1, 0, 0])
    translate([0, distance, 0])
    sphere(r = r);
}
</pre>
<h3>Let Statement</h3>
<hr/>
<p><span style="font-weight: bold; font-style: normal;">[<span style="color: #A00000;">Note:</span> <span style="font-weight: normal; font-style: italic;">Requires version <span style="font-weight: bold;">2019.05</span></span>]</span>
</p><p>Set variables to a new value for a sub-tree.
The parameters are evaluated sequentially and may depend on each other (as opposed to the deprecated assign() statement).
</p>
<dl><dd><b>Parameters</b></dd></dl>
<dl><dd><dl><dd>The variables that should be set</dd></dl></dd></dl>
<dl><dd><b>example:</b></dd></dl>
<pre>for (i = [10:50])
{
    let (angle = i*360/20, r= i*2, distance = r*5)
    {
        rotate(angle, [1, 0, 0])
        translate([0, distance, 0])
        sphere(r = r);
    }
}
</pre>
<p style="page-break-after:always;"></p>
<h2>Mathematical Operators</h2>

<h3>Scalar Arithmetical Operators</h3>
<p>The scalar arithmetical operators take numbers as operands and produce
a new number.
</p>
<table class="wikitable">
<tbody><tr>
<td>+
</td>
<td>add
</td></tr>
<tr>
<td>-
</td>
<td>subtract
</td></tr>
<tr>
<td>*
</td>
<td>multiply
</td></tr>
<tr>
<td>/
</td>
<td>divide
</td></tr>
<tr>
<td>%
</td>
<td>modulo
</td></tr>
<tr>
<td>^
</td>
<td>exponent <span style="font-weight: bold; font-style: normal;">[<span style="color: #A00000;">Note:</span> <span style="font-weight: normal; font-style: italic;">Requires version <span style="font-weight: bold;">2021.01</span></span>]</span>
</td></tr></tbody></table>
<p>The "-" can also be used as prefix operator to negate a number.
</p>
<h3>Relational Operators</h3>
<p>Relational operators produce a Boolean result from two operands.  
</p>
<table class="wikitable">
<tbody><tr>
<td>&lt;
</td>
<td>less than
</td></tr>
<tr>
<td>&lt;=
</td>
<td>less or equal
</td></tr>
<tr>
<td>==
</td>
<td>equal
</td></tr>
<tr>
<td>!=
</td>
<td>not equal
</td></tr>
<tr>
<td>&gt;=
</td>
<td>greater or equal
</td></tr>
<tr>
<td>&gt;
</td>
<td>greater than
</td></tr></tbody></table>
<p>If both operands are simple numbers, the meaning is self-evident.  
</p><p>If both operands are strings, alphabetical sorting determines 
equality and order.  E.g., "ab" &gt; "aa" &gt; "a".  
</p><p>If both operands are Booleans, <i>true</i> &gt; <i>false</i>.  In an inequality comparison between a Boolean 
and a number <i>true</i> is treated as 1 and <i>false</i> is treated as 0.  Other inequality tests involving Booleans 
return false.    
</p><p>If both operands are vectors, an equality test returns <i>true</i> when the vectors are identical and <i>false</i> otherwise.  
Inequality tests involving one or two vectors always return <i>false</i>, so for example [1] &lt; [2] is <i>false</i>.  
</p><p>Dissimilar types always test as unequal with '==' and '!='.   
Inequality comparisons between dissimilar types, except for Boolean and numbers as noted above, always result in <i>false</i>.  
Note that [1] and 1 are different types so [1] == 1 is false.  
</p><p><i>undef</i> doesn't equal anything but <i>undef</i>.  Inequality comparisons involving <i>undef</i> result in <i>false</i>.
</p><p><i>nan</i> doesn't equal anything (not even itself) and inequality tests all produce <i>false</i>.  See <a href="General.html#Numbers" title="OpenSCAD User Manual/General">Numbers</a>.
</p>
<h3>Logical Operators</h3>
<p>All logical operators take Booleans as operands and produce a Boolean.  
Non-Boolean quantities are converted to Booleans before the operator is
evaluated. 
</p>
<table class="wikitable">
<tbody><tr>
<td>&amp;&amp;
</td>
<td>logical AND
</td></tr>
<tr>
<td>||
</td>
<td>logical OR
</td></tr>
<tr>
<td>!
</td>
<td>logical unary NOT
</td></tr>
</tbody></table>
<p>Since <code>[false]</code> is <code>true</code>, <code>false || [false]</code> is also <code>true</code>.
</p><p>Note that how logical operators deal with vectors is different than relational operators:
</p><p><code>[1, 1] &gt; [0, 2]</code> is <code>false</code>, but 
</p><p><code>[false, false] &amp;&amp; [false, false]</code> is <code>true</code>.
</p>
<h3>Conditional Operator</h3>
<p>The <tt>?:</tt> operator can be used to conditionally evaluate one or another expression.
It works like the <tt>?:</tt> operator from the family of C-like programming languages.
</p>
<table class="wikitable">
<tbody><tr>
<td> ? :
</td>
<td>Conditional operator
</td></tr></tbody></table>
<table width="75%">
<tbody><tr>
<td><b>Usage Example:</b>
</td></tr>
<tr>
<td>
<pre>a=1;
b=2;
c= a==b ? 4 : 5;
</pre>
<p>If a equals b, then c is set to 4, else c is set to 5.
<br/>
The part "a==b" must be something that evaluates to a boolean value.
</p>
</td></tr></tbody></table>
<h3>Vector-Number Operators</h3>
<p>The vector-number operators take a vector and a number as operands and produce a new vector.
</p>
<table class="wikitable">
<tbody><tr>
<td>*
</td>
<td>multiply all vector elements by number
</td></tr>
<tr>
<td>/
</td>
<td>divide all vector elements by number
</td></tr></tbody></table>
<dl><dd><b>Example</b></dd></dl>
<pre>L = [1, [2, [3, "a"] ] ];
echo(5*L);
// ECHO: [5, [10, [15, undef]]]
</pre>
<h3>Vector Operators</h3>
<p>The vector operators take vectors as operands and produce a new vector.
</p>
<table class="wikitable">
<tbody><tr>
<td>+
</td>
<td>add element-wise
</td></tr>
<tr>
<td>-
</td>
<td>subtract element-wise
</td></tr></tbody></table>
<p>The "-" can also be used as prefix operator to element-wise negate a vector.
</p>
<dl><dd><b>Example</b></dd></dl>
<pre>L1 = [1, [2, [3, "a"] ] ];
L2 = [1, [2, 3] ];
echo(L1+L1); // ECHO: [2, [4, [6, undef]]]
echo(L1+L2); // ECHO: [2, [4, undef]]
</pre>
<h3>Vector Dot-Product Operator</h3>
<p>If both operands of multiplication are simple vectors, the result is a number 
according to the linear algebra rule for <a class="extiw" href="https://en.wikipedia.org/wiki/Dot_product" title="w:Dot product">dot product</a>.  
<code>c = u*v;</code> results in <span class="mwe-math-element"><img alt="{\displaystyle c=\sum u_{i}v_{i}}" aria-hidden="true" class="mwe-math-fallback-image-inline" src="./imgs\maths/62719e8c892aa5cc4d9357848a218d3c4b73654c.svg" style="vertical-align: -1.338ex; width:11.904ex; height:3.843ex;"/></span>.  If the operands' 
sizes don't match, the result is <code>undef</code>.
</p>
<h3>Matrix Multiplication</h3>
<p>If one or both operands of multiplication are matrices, the result is a simple vector or matrix
according to the linear algebra rules for <a class="extiw" href="https://en.wikipedia.org/wiki/Matrix_multiplication#Matrix_product_.28two_matrices.29" title="w:Matrix multiplication">matrix product</a>.  
In the following,
<span class="texhtml" style="white-space: nowrap;">A, B, C...</span> are matrices, <span class="texhtml" style="white-space: nowrap;">u, v, w...</span> are vectors.  Subscripts <span class="texhtml" style="white-space: nowrap;">i, j</span> denote element 
indices.  
</p><p>For <span class="texhtml" style="white-space: nowrap;">A</span> a matrix of size <span class="texhtml" style="white-space: nowrap;">n × m</span> and 
<span class="texhtml" style="white-space: nowrap;">B</span> a matrix of size <span class="texhtml" style="white-space: nowrap;">m × p</span>, their product
<code>C = A*B;</code> is a matrix of size <span class="texhtml" style="white-space: nowrap;">n × p</span> with elements
</p><p><span class="mwe-math-element"><img alt="{\displaystyle C_{ij}=\sum _{k=0}^{m-1}A_{ik}B_{kj}}" aria-hidden="true" class="mwe-math-fallback-image-inline" src="./imgs\maths/0cdb6e01b98696f33cdd13519f49a5d31a0eb5bc.svg" style="vertical-align: -3.171ex; width:17.097ex; height:7.509ex;"/></span>.
</p><p><code>C = B*A;</code> results in <code>undef</code> unless <span class="texhtml" style="white-space: nowrap;">n</span> = <span class="texhtml" style="white-space: nowrap;">p</span>.
</p><p>For <span class="texhtml" style="white-space: nowrap;">A</span> a matrix of size <span class="texhtml" style="white-space: nowrap;">n × m</span> and 
<span class="texhtml" style="white-space: nowrap;">v</span> a vector of size <span class="texhtml" style="white-space: nowrap;">m</span>, their product
<code>u = A*v;</code> is a vector of size <span class="texhtml" style="white-space: nowrap;">n</span> with elements
</p><p><span class="mwe-math-element"><img alt="{\displaystyle u_{i}=\sum _{k=0}^{m-1}A_{ik}v_{k}}" aria-hidden="true" class="mwe-math-fallback-image-inline" src="./imgs\maths/a25ee6408c0dbf26d2ecce9c86c3214fa22e6aba.svg" style="vertical-align: -3.171ex; width:14.774ex; height:7.509ex;"/></span>. 
</p><p>In linear algebra, this 
is the <a class="extiw" href="https://en.wikipedia.org/wiki/Matrix_multiplication#Square_matrix_and_column_vector" title="w:Matrix multiplication">product of a matrix and a column vector</a>.
</p><p>For <span class="texhtml" style="white-space: nowrap;">v</span> a vector of size <span class="texhtml" style="white-space: nowrap;">n</span> and 
<span class="texhtml" style="white-space: nowrap;">A</span> a matrix of size <span class="texhtml" style="white-space: nowrap;">n × m</span>, their product
<code>u = v*A;</code> is a vector of size <span class="texhtml" style="white-space: nowrap;">m</span> with elements
</p><p><span class="mwe-math-element"><img alt="{\displaystyle u_{j}=\sum _{k=0}^{n-1}v_{k}A_{kj}}" aria-hidden="true" class="mwe-math-fallback-image-inline" src="./imgs\maths/7f46be5cabd3bdfc2ef5047ff3d0542bde66442c.svg" style="vertical-align: -3.171ex; width:14.806ex; height:7.509ex;"/></span>. 
</p><p>In linear algebra, this 
is the product of a row vector and a matrix.
</p><p>Matrix multiplication is not commutative: <span class="mwe-math-element"><img alt="{\displaystyle AB\neq BA}" aria-hidden="true" class="mwe-math-fallback-image-inline" src="./imgs\maths/38f1a5c060698eefdb6af8dd172fd3fe7124189c.svg" style="vertical-align: -0.838ex; width:10.113ex; height:2.676ex;"/></span>,  <span class="mwe-math-element"><img alt="{\displaystyle Av\neq vA}" aria-hidden="true" class="mwe-math-fallback-image-inline" src="./imgs\maths/43b5db3b81699facd7bdf07afd0e85312fc763ee.svg" style="vertical-align: -0.838ex; width:8.84ex; height:2.676ex;"/></span>.
</p>
<p style="page-break-after:always;"></p>
<h2>Mathematical Functions</h2>
<table cellpadding="0" cellspacing="0" style="clear: right; margin-bottom: .5em; float: right; padding: .5em 0 .8em 1.4em; background: none; width: auto;">
<tbody><tr>
<td>
</td></tr></tbody></table>

<h2>Trigonometric Functions</h2>
<p>The trig functions use the C Language mathematics functions, which are based in turn on Binary Floating Point mathematics, which use approximations of Real Numbers during calculation. OpenSCAD's math functions use the C++ 'double' type, inside Value.h/Value.cc, 
</p><p>A good resource for the specifics of the C library math functions, such as valid inputs/output ranges, can be found at the Open Group website <a class="external text" href="http://pubs.opengroup.org/onlinepubs/009695399/basedefs/math.h.html" rel="nofollow">math.h</a> &amp; <a class="external text" href="http://pubs.opengroup.org/onlinepubs/009695399/functions/acos.html" rel="nofollow">acos</a>
</p>
<h3>cos</h3>
<p>Mathematical <b>cosine</b> function of degrees. See <a class="extiw" href="https://en.wikipedia.org/wiki/Cosine#Sine.2C_cosine_and_tangent" title="w:Cosine">Cosine</a>
</p><p><b>Parameters</b>
</p>
<dl><dt>&lt;degrees&gt;</dt>
<dd>Decimal.  Angle in degrees.</dd></dl>
<table width="75%">
<tbody><tr>
<td><b>Usage Example:</b>
</td></tr>
<tr>
<td>
<pre> for(i=[0:36])
    translate([i*10,0,0])
       cylinder(r=5,h=cos(i*10)*50+60);
</pre>
</td>
<td><div class="thumb tright"><div class="thumbinner" style="width:222px;"><a class="image" href="./imgs/220px-OpenSCAD_Cos_Function.png"><img alt="" class="thumbimage" data-file-height="218" data-file-width="390" decoding="async" height="123" src="./imgs/220px-OpenSCAD_Cos_Function.png" width="220"/></a>  <div class="thumbcaption">OpenSCAD Cos Function‎</div></div></div>
</td></tr></tbody></table>
<h3>sin</h3>
<p>Mathematical <b>sine</b> function. See <a class="extiw" href="https://en.wikipedia.org/wiki/Trigonometric_functions#Sine.2C_cosine_and_tangent" title="w:Trigonometric functions">Sine</a>
</p><p><b>Parameters</b>
</p>
<dl><dt>&lt;degrees&gt;</dt>
<dd>Decimal.  Angle in degrees.</dd></dl>
<table width="75%">
<tbody><tr>
<td><b>Usage example 1:</b>
</td></tr>
<tr>
<td>
<pre> for (i = [0:5]) {
  echo(360*i/6, sin(360*i/6)*80, cos(360*i/6)*80);
   translate([sin(360*i/6)*80, cos(360*i/6)*80, 0 ])
    cylinder(h = 200, r=10);
 }
</pre>
</td>
<td>
</td></tr></tbody></table>
<p><br/>
</p>
<table width="75%">
<tbody><tr>
<td><b>Usage example 2:</b>
</td></tr>
<tr>
<td>
<pre> for(i=[0:36])
    translate([i*10,0,0])
       cylinder(r=5,h=sin(i*10)*50+60);
</pre>
</td>
<td><div class="thumb tright"><div class="thumbinner" style="width:222px;"><a class="image" href="./imgs/220px-OpenSCAD_Sin_Function.png"><img alt="" class="thumbimage" data-file-height="199" data-file-width="388" decoding="async" height="113" src="./imgs/220px-OpenSCAD_Sin_Function.png" width="220"/></a>  <div class="thumbcaption">OpenSCAD Sin Function</div></div></div>
</td></tr></tbody></table>
<p><br/>
</p>
<h3>tan</h3>
<p>Mathematical <b>tangent</b> function. See <a class="extiw" href="https://en.wikipedia.org/wiki/Trigonometric_functions#Sine.2C_cosine_and_tangent" title="w:Trigonometric functions">Tangent</a>
</p><p><b>Parameters</b>
</p>
<dl><dt>&lt;degrees&gt;</dt>
<dd>Decimal.  Angle in degrees.</dd></dl>
<table width="75%">
<tbody><tr>
<td><b>Usage example:</b>
</td></tr>
<tr>
<td>
<pre> for (i = [0:5]) {
  echo(360*i/6, tan(360*i/6)*80);
   translate([tan(360*i/6)*80, 0, 0 ])
    cylinder(h = 200, r=10);
 }
</pre>
</td>
<td>
</td></tr></tbody></table>
<p><br/>
</p>
<h3>acos</h3>
<p>Mathematical <b>arccosine</b>, or <b>inverse cosine</b>, expressed in degrees. See: <a class="extiw" href="https://en.wikipedia.org/wiki/Inverse_trigonometric_functions" title="w:Inverse trigonometric functions">Inverse trigonometric functions</a>
</p>
<h3>asin</h3>
<p>Mathematical <b>arcsine</b>, or <b>inverse sine</b>, expressed in degrees. See: <a class="extiw" href="https://en.wikipedia.org/wiki/Inverse_trigonometric_functions" title="w:Inverse trigonometric functions">Inverse trigonometric functions</a>
</p>
<h3>atan</h3>
<p>Mathematical <b>arctangent</b>, or <b>inverse tangent</b>, function. Returns the principal value of the arc tangent of x, expressed in degrees.  See: <a class="extiw" href="https://en.wikipedia.org/wiki/Inverse_trigonometric_functions" title="w:Inverse trigonometric functions">Inverse trigonometric functions</a>
</p>
<h3>atan2</h3>
<p>Mathematical <b>two-argument atan</b> function atan2(y,x) that spans the full 360 degrees.  This function returns the full 
angle (0-360) made between the x axis and the vector(x,y) expressed in degrees.  atan can not distinguish between y/x and -y/-x and returns angles from -90 to +90   See: <a class="extiw" href="https://en.wikipedia.org/wiki/Atan2" title="w:Atan2">atan2</a>
</p><p><br/>
<b>Usage examples:</b>
</p>
<pre>atan2(5.0,-5.0);     //result: 135 degrees. atan() would give -45
atan2(y,x);          //angle between (1,0) and (x,y) = angle around z-axis
</pre>
<h2>Other Mathematical Functions</h2>
<h3>abs</h3>
<p>Mathematical <b>absolute value</b> function. Returns the positive value of a signed decimal number.
</p><p><b>Usage examples:</b>
</p>
<pre>abs(-5.0);  returns 5.0
abs(0);     returns 0.0
abs(8.0);   returns 8.0
</pre>
<h3>ceil</h3>
<p>Mathematical <b>ceiling</b> function.  
</p><p>Returns the next highest integer value by rounding up value if necessary.
</p><p>See: <a class="extiw" href="https://en.wikipedia.org/wiki/Ceil_function" title="w:Ceil function">Ceil Function</a>
</p>
<pre>echo(ceil(4.4),ceil(-4.4));     // produces ECHO: 5, -4
</pre>
<h3>concat</h3>
<p><span style="font-weight: bold; font-style: normal;">[<span style="color: #A00000;">Note:</span> <span style="font-weight: normal; font-style: italic;">Requires version <span style="font-weight: bold;">2015.03</span></span>]</span>
</p><p>Return a new vector that is the result of appending the elements of the supplied vectors.
</p><p>Where an argument is a vector the elements of the vector are individually appended to the result vector.
Strings are distinct from vectors in this case.
</p><p><b>Usage examples:</b>
</p>
<pre>echo(concat("a","b","c","d","e","f"));          // produces ECHO: ["a", "b", "c", "d", "e", "f"]
echo(concat(["a","b","c"],["d","e","f"]));      // produces ECHO: ["a", "b", "c", "d", "e", "f"]
echo(concat(1,2,3,4,5,6));                      // produces ECHO: [1, 2, 3, 4, 5, 6]
</pre>
<p>Vector of vectors
</p>
<pre>echo(concat([ [1],[2] ], [ [3] ]));             // produces ECHO: [[1], [2], [3]]
</pre>
<p><i><b>Note:</b></i> All vectors passed to the function  lose one nesting level. When adding something like a single element [x, y, z] tuples (which are vectors, too), the tuple needs to be enclosed in a vector (i.e. an extra set of brackets) before the concatenation. in the exmple below, a fourth point is added to the polygon path, which used to resemble a triangle, making it a square now:
</p>
<pre>polygon(concat([[0,0],[0,5],[5,5]], [[5,0]]));
</pre>
<p>Contrast with strings
</p>
<pre>echo(concat([1,2,3],[4,5,6]));                   // produces ECHO: [1, 2, 3, 4, 5, 6]
echo(concat("abc","def"));                       // produces ECHO: ["abc", "def"]
echo(str("abc","def"));                          // produces ECHO: "abcdef"
</pre>
<h3>cross</h3>
<p>Calculates the cross product of two vectors in 3D or 2D space. If both vectors are in the 3D, the result is a vector that is perpendicular to both of the input vectors. If both vectors are in 2D space, their cross product has the form [0,0,z] and the cross function returns just the z value of the cross product:  
</p><p><i>cross([x,y], [u,v]) = x*v - y*u</i>
</p><p>Note that this is the determinant of the 2x2 matrix [[x,y],[u,v]].  Using any other types, vectors with lengths different from 2 or 3, or vectors not of the same length produces 'undef'.  
</p><p><b>Usage examples:</b>
</p>
<pre>echo(cross([2, 3, 4], [5, 6, 7]));     // produces ECHO: [-3, 6, -3]
echo(cross([2, 1, -3], [0, 4, 5]));    // produces ECHO: [17, -10, 8]
echo(cross([2, 1], [0, 4]));           // produces ECHO: 8
echo(cross([1, -3], [4, 5]));          // produces ECHO: 17
echo(cross([2, 1, -3], [4, 5]));       // produces ECHO: undef
echo(cross([2, 3, 4], "5"));           // produces ECHO: undef
</pre>
<p>For any two vectors <i>a</i> and <i>b</i> in 2D or in 3D, the following holds:
</p><p><i>cross(a,b) == -cross(b,a)</i>
</p>
<h3>exp</h3>
<p>Mathematical <b>exp</b> function. Returns the base-e exponential function of x, which is the number e raised to the power x. See: <a class="extiw" href="https://en.wikipedia.org/wiki/Exponent" title="w:Exponent">Exponent</a>
</p>
<pre>echo(exp(1),exp(ln(3)*4));    // produces ECHO: 2.71828, 81
</pre>
<h3>floor</h3>
<p>Mathematical <b>floor</b> function.  floor(x) =  is the largest integer not greater than x 
</p><p>See: <a class="extiw" href="https://en.wikipedia.org/wiki/Floor_function" title="w:Floor function">Floor Function</a>
</p>
<pre>echo(floor(4.4),floor(-4.4));    // produces ECHO: 4, -5
</pre>
<h3>ln</h3>
<p>Mathematical <b>natural logarithm</b>.  See: <a class="extiw" href="https://en.wikipedia.org/wiki/Natural_logarithm" title="w:Natural logarithm">Natural logarithm</a>
</p>
<h3>len</h3>
<p>Mathematical <b>length</b> function.  Returns the length of an array, a vector or a string parameter.
</p><p><b>Usage examples:</b>
</p>
<pre>str1="abcdef"; len_str1=len(str1);
echo(str1,len_str1);

a=6; len_a=len(a);
echo(a,len_a);

array1=[1,2,3,4,5,6,7,8]; len_array1=len(array1);
echo(array1,len_array1);

array2=[[0,0],[0,1],[1,0],[1,1]]; len_array2=len(array2);
echo(array2,len_array2);

len_array2_2=len(array2[2]);
echo(array2[2],len_array2_2);
</pre>
<p><b>Results:</b>
</p>
<pre>ECHO: "abcdef", 6
ECHO: 6, undef
ECHO: [1, 2, 3, 4, 5, 6, 7, 8], 8
ECHO: [[0, 0], [0, 1], [1, 0], [1, 1]], 4
ECHO: [1, 0], 2
</pre>
<p><br/>
</p><p>This function allows (e.g.) the parsing of an array, a vector or a string.
</p><p><b>Usage examples:</b>
</p>
<pre>str2="4711";
for (i=[0:len(str2)-1])
	echo(str("digit ",i+1,"  :  ",str2[i]));
</pre>
<p><b>Results:</b>
</p>
<pre>ECHO: "digit 1  :  4"
ECHO: "digit 2  :  7"
ECHO: "digit 3  :  1"
ECHO: "digit 4  :  1"
</pre>
<p>Note that the len() function is not defined when a simple variable is passed as the parameter. 
</p><p>This is useful when handling parameters to a module, similar to how shapes can be defined as a single number, or as an [x,y,z] vector; i.e. cube(5) or cube([5,5,5])
</p><p>For example
</p>
<pre>module doIt(size) {
	if (len(size) == undef) {
		// size is a number, use it for x,y &amp; z. (or could be undef)
		do([size,size,size]);
	} else { 
		// size is a vector, (could be a string but that would be stupid)
		do(size);
	}
 }
 
doIt(5);	// equivalent to [5,5,5]
doIt([5,5,5]);	// similar to cube(5) v's cube([5,5,5])
</pre>
<h3>let</h3>
<p><span style="font-weight: bold; font-style: normal;">[<span style="color: #A00000;">Note:</span> <span style="font-weight: normal; font-style: italic;">Requires version <span style="font-weight: bold;">2015.03</span></span>]</span>
</p><p>Sequential assignment of variables inside an expression. The following expression is evaluated in context of the let assignments and can use the variables. This is mainly useful to make complicated expressions more readable by assigning interim results to variables.
</p><p><b>Parameters</b>
</p>
<pre>let (var1 = value1, var2 = f(var1), var3 = g(var1, var2)) expression
</pre>
<p><b>Usage Example:</b>
</p>
<pre>echo(let(a = 135, s = sin(a), c = cos(a)) [ s, c ]); // ECHO: [0.707107, -0.707107]
</pre>
<h3>log</h3>
<p>Mathematical <b>logarithm</b> to the base 10. Example: log(1000) = 3. See: <a class="extiw" href="https://en.wikipedia.org/wiki/Logarithm" title="w:Logarithm">Logarithm</a>
</p>
<h3>lookup</h3>
<p>Look up value in table, and linearly interpolate if there's no exact match.  The first argument is the value to look up.  The second is the lookup table -- a vector of key-value pairs. 
</p><p><b>Parameters</b>
</p>
<dl><dt>key</dt>
<dd>A lookup key</dd>
<dt>&lt;key,value&gt; array</dt>
<dd>keys and values</dd></dl>
<table width="100%">
<tbody><tr>
<td><b>Notes</b>
<p><br/> There is a bug in which out-of-range keys return the first value in the list. Newer versions of Openscad should use the top or bottom end of the table as appropriate instead.
</p>
</td>
<td><b>Usage example:</b>
<ul style="list-style-image:none"><li>Create a 3D chart made from cylinders of different heights.</li></ul>
</td></tr>
<tr>
<td>
<pre> function get_cylinder_h(p) = lookup(p, [
 		[ -200, 5 ],
 		[ -50, 20 ],
 		[ -20, 18 ],
 		[ +80, 25 ],
 		[ +150, 2 ]
 	]);
 
 for (i = [-100:5:+100]) {
 	// echo(i, get_cylinder_h(i));
 	translate([ i, 0, -30 ]) cylinder(r1 = 6, r2 = 2, h = get_cylinder_h(i)*3);
 }
</pre>
</td>
<td><div class="thumb tright"><div class="thumbinner" style="width:222px;"><a class="image" href="./imgs/220px-OpenSCAD_Lookup_Function.png"><img alt="" class="thumbimage" data-file-height="222" data-file-width="386" decoding="async" height="127" src="./imgs/220px-OpenSCAD_Lookup_Function.png" width="220"/></a>  <div class="thumbcaption">OpenSCAD Lookup Function</div></div></div>
</td></tr></tbody></table>
<h3>max</h3>
<p>Returns the maximum of the parameters. If a single vector is given as parameter, returns the maximum element of that vector.
</p><p><b>Parameters</b>
</p>
<pre>max(n,n{,n}...)
max(vector)
</pre>
<dl><dt>&lt;n&gt;</dt>
<dd>Two or more decimals</dd>
<dt>&lt;vector&gt;</dt>
<dd>Single vector of decimals <span style="font-weight: bold; font-style: normal;">[<span style="color: #A00000;">Note:</span> <span style="font-weight: normal; font-style: italic;">Requires version <span style="font-weight: bold;">2014.06</span></span>]</span>.</dd></dl>
<p><b>Usage Example:</b>
</p>
<pre>max(3.0,5.0)
max(8.0,3.0,4.0,5.0)
max([8,3,4,5])
</pre>
<p><b>Results:</b>
</p>
<pre>5
8
8
</pre>
<h3>min</h3>
<p>Returns the minimum of the parameters. If a single vector is given as parameter, returns the minimum element of that vector.
</p><p><b>Parameters</b>
</p>
<pre>min(n,n{,n}...)
min(vector)
</pre>
<dl><dt>&lt;n&gt;</dt>
<dd>Two or more decimals</dd>
<dt>&lt;vector&gt;</dt>
<dd>Single vector of decimals <span style="font-weight: bold; font-style: normal;">[<span style="color: #A00000;">Note:</span> <span style="font-weight: normal; font-style: italic;">Requires version <span style="font-weight: bold;">2014.06</span></span>]</span>.</dd></dl>
<p><b>Usage Example:</b>
</p>
<pre>min(3.0,5.0)
min(8.0,3.0,4.0,5.0)
min([8,3,4,5])
</pre>
<p><b>Results:</b>
</p>
<pre>3
3
3
</pre>
<p><br/>
<br/>
<big><big>Looking for 
<b>mod</b></big></big> - it's not a function, see <a href="Mathematical_Operators.html" title="OpenSCAD User Manual/Mathematical Operators">modulo operator (%)</a>
</p>
<h3>norm</h3>
<dl><dd></dd></dl>
<p>Returns the <a class="extiw" href="https://en.wikipedia.org/wiki/Norm_(mathematics)" title="w:Norm (mathematics)">euclidean norm</a> of a vector. Note this returns the actual numeric length while <b>len</b> returns the number of elements in the vector or array.
</p><p><b>Usage examples:</b>
</p>
<pre>a=[1,2,3,4];
b="abcd";
c=[];
d="";
e=[[1,2,3,4],[1,2,3],[1,2],[1]];
echo(norm(a)); //5.47723
echo(norm(b)); //undef
echo(norm(c)); //0
echo(norm(d)); //undef
echo(norm(e[0])); //5.47723
echo(norm(e[1])); //3.74166
echo(norm(e[2])); //2.23607
echo(norm(e[3])); //1
</pre>
<p><b>Results:</b>
</p>
<pre>ECHO: 5.47723
ECHO: undef
ECHO: 0
ECHO: undef
ECHO: 5.47723
ECHO: 3.74166
ECHO: 2.23607
ECHO: 1
</pre>
<h3>pow</h3>
<p>Mathematical <b>power</b> function.
</p><p><b>Parameters</b>
</p>
<dl><dt>&lt;base&gt;</dt>
<dd>Decimal.  Base.</dd>
<dt>&lt;exponent&gt;</dt>
<dd>Decimal.  Exponent.</dd></dl>
<p><b>Usage examples:</b>
</p>
<pre>for (i = [0:5]) {
 translate([i*25,0,0]) {
   cylinder(h = pow(2,i)*5, r=10);
   echo (i, pow(2,i));
 }
}
</pre>
<pre>echo(pow(10,2)); // means 10^2 or 10*10
// result: ECHO: 100

echo(pow(10,3)); // means 10^3 or 10*10*10
// result: ECHO: 1000

echo(pow(125,1/3)); // means 125^(0.333...), which calculates the cube root of 125
// result: ECHO: 5
</pre>
<h3>rands</h3>
<p>Random number generator.
Generates a constant vector of pseudo random numbers, much like an array. The numbers are doubles not integers.
When generating only one number, you still call it with variable[0]
</p><p><b>Parameters</b>
</p>
<dl><dt>min_value</dt>
<dd>Minimum value of random number range</dd>
<dt>max_value</dt>
<dd>Maximum value of random number range</dd>
<dt>value_count</dt>
<dd>Number of random numbers to return as a vector</dd>
<dt>seed_value (optional)</dt>
<dd>Seed value for random number generator for repeatable results. On versions before late 2015, seed_value gets rounded to the nearest integer</dd></dl>
<p><b>Usage Examples:</b>
</p>
<pre>// get a single number
single_rand = rands(0,10,1)[0];
echo(single_rand);
</pre>
<pre>// get a vector of 4 numbers
seed=42;
random_vect=rands(5,15,4,seed);
echo( "Random Vector: ",random_vect);
sphere(r=5);
for(i=[0:3]) {
 rotate(360*i/4) {
   translate([10+random_vect[i],0,0])
     sphere(r=random_vect[i]/2);
 }
}
// ECHO: "Random Vector: ", [8.7454, 12.9654, 14.5071, 6.83435]
</pre>
<h3>round</h3>
<p>The "round" operator returns the greatest or least integer part, respectively, if the numeric input is positive or negative.
</p><p>Some examples:<br/>
</p>
<pre>round(x.5) = x+1.<br/>
round(x.49) = x.<br/>
round(-(x.5)) = -(x+1).<br/>
round(-(x.49)) = -x.<br/>
<br/>
round(5.4); //-&gt; 5<br/>
round(5.5); //-&gt; 6<br/>
round(5.6); //-&gt; 6<br/>
</pre>
<h3>sign</h3>
<p>Mathematical <b>signum</b> function. Returns a unit value that extracts the sign of a value see: <a class="extiw" href="https://en.wikipedia.org/wiki/Sign_function" title="w:Sign function">Signum function</a>
</p><p><b>Parameters</b>
</p>
<dl><dt>&lt;x&gt;</dt>
<dd>Decimal.  Value to find the sign of.</dd></dl>
<p><b>Usage examples:</b>
</p>
<pre>sign(-5.0);
sign(0);
sign(8.0);
</pre>
<p><b>Results:</b>
</p>
<pre>-1.0
0.0
1.0
</pre>
<p><br/>
</p>
<h3>sqrt</h3>
<p>Mathematical <b>square root</b> function.
</p><p><br/>
<b>Usage Examples:</b>
</p>
<pre>translate([sqrt(100),0,0])sphere(100);
</pre>
<h2>Infinities and NaNs</h2>
<p>How does OpenSCAD deal with inputs like (1/0)? Basically, the behavior is inherited from the language OpenSCAD was written in, the C++ language, and its floating point number types and the associated C math library. This system allows representation of both positive and negative infinity by the special values "Inf" or "-Inf". It also allow representation of creatures like sqrt(-1) or 0/0 as "NaN", an abbreviation for "Not A Number". Some very nice explanations can be found on the web, for example the <a class="external text" href="http://pubs.opengroup.org/onlinepubs/009695399/basedefs/math.h.html" rel="nofollow">Open Group's site on math.h</a> or <a class="extiw" href="https://en.wikipedia.org/wiki/IEEE_754-1985#Representation_of_non-numbers" title="w:IEEE 754-1985"> Wikipedia's page on the IEEE 754 number format</a>. However OpenSCAD is it's own language so it may not exactly match everything that happens in C. For example, OpenSCAD uses degrees instead of radians for trigonometric functions.  Another example is that sin() does not throw a "domain error" when the input is 1/0, although it does return NaN. 
</p><p>Here are some examples of infinite input to OpenSCAD math functions and the resulting output, taken from OpenSCAD's regression test system in late 2015.
</p>
<table class="wikitable">

<tbody><tr>
<td>0/0: nan</td>
<td>sin(1/0): nan</td>
<td>asin(1/0): nan</td>
<td>ln(1/0): inf</td>
<td>round(1/0): inf
</td></tr>
<tr>
<td>-0/0: nan</td>
<td>cos(1/0): nan</td>
<td>acos(1/0): nan</td>
<td>ln(-1/0): nan</td>
<td>round(-1/0): -inf
</td></tr>
<tr>
<td>0/-0: nan</td>
<td>tan(1/0): nan</td>
<td>atan(1/0): 90</td>
<td>log(1/0): inf</td>
<td>sign(1/0): 1
</td></tr>
<tr>
<td>1/0: inf</td>
<td>ceil(-1/0): -inf</td>
<td>atan(-1/0): -90</td>
<td>log(-1/0): nan</td>
<td>sign(-1/0): -1
</td></tr>
<tr>
<td>1/-0: -inf</td>
<td>ceil(1/0): inf</td>
<td>atan2(1/0, -1/0): 135</td>
<td>max(-1/0, 1/0): inf</td>
<td>sqrt(1/0): inf
</td></tr>
<tr>
<td>-1/0: -inf</td>
<td>floor(-1/0): -inf</td>
<td>exp(1/0): inf</td>
<td>min(-1/0, 1/0): -inf</td>
<td>sqrt(-1/0): nan
</td></tr>
<tr>
<td>-1/-0: inf</td>
<td>floor(1/0): inf</td>
<td>exp(-1/0): 0</td>
<td>pow(2, 1/0): inf</td>
<td>pow(2, -1/0): 0
</td></tr></tbody></table> 
<p style="page-break-after:always;"></p>
<h2>String Functions</h2>

<h3>str</h3>
<p>Convert all arguments to strings and concatenate.
</p><p><b>Usage examples:</b>
</p>
<pre>number=2;
echo ("This is ",number,3," and that's it.");
echo (str("This is ",number,3," and that's it."));
</pre>
<p><b>Results:</b>
</p>
<pre>ECHO: "This is ", 2, 3, " and that's it."
ECHO: "This is 23 and that's it."
</pre>
<h3>chr</h3>
<p><span style="font-weight: bold; font-style: normal;">[<span style="color: #A00000;">Note:</span> <span style="font-weight: normal; font-style: italic;">Requires version <span style="font-weight: bold;">2015.03</span></span>]</span>
</p><p>Convert numbers to a string containing character with the corresponding code. OpenSCAD uses Unicode, so the number is interpreted as Unicode code point. Numbers outside the valid code point range produce an empty string.
</p><p><b>Parameters</b>
</p>
<dl><dt>chr(Number)</dt>
<dd>Convert one code point to a string of length 1 (number of bytes depending on UTF-8 encoding) if the code point is valid.</dd></dl>
<dl><dt>chr(Vector)</dt>
<dd>Convert all code points given in the argument vector to a string.</dd></dl>
<dl><dt>chr(Range)</dt>
<dd>Convert all code points produced by the range argument to a string.</dd></dl>
<p><b>Examples</b>
</p>
<pre>echo(chr(65), chr(97));      // ECHO: "A", "a"
echo(chr(65, 97));           // ECHO: "Aa"
echo(chr([66, 98]));         // ECHO: "Bb"
echo(chr([97 : 2 : 102]));   // ECHO: "ace"
echo(chr(-3));               // ECHO: ""
echo(chr(9786), chr(9788));  // ECHO: "☺", "☼"
echo(len(chr(9788)));        // ECHO: 1
</pre>
<p>Note: When used with echo() the output to the console for character codes greater than 127 is platform dependent.
</p>
<h3>ord</h3>
<p><span style="font-weight: bold; font-style: normal;">[<span style="color: #A00000;">Note:</span> <span style="font-weight: normal; font-style: italic;">Requires version <span style="font-weight: bold;">2019.05</span></span>]</span>
</p><p>Convert a character to a number representing the <a class="external text" href="https://en.wikipedia.org/wiki/Unicode">Unicode</a> <a class="external text" href="https://en.wikipedia.org/wiki/Code_point">code point</a>. If the parameter is not a string, the <code>ord()</code> returns <code>undef</code>.
</p><p><b>Parameters</b>
</p>
<dl><dt>ord(String)</dt>
<dd>Convert the first character of the given string to a Unicode code point.</dd></dl>
<p><b>Examples</b>
</p>
<pre>echo(ord("a"));
// ECHO: 97

echo(ord("BCD"));
// ECHO: 66

echo([for (c = "Hello! 🙂") ord(c)]);
// ECHO: [72, 101, 108, 108, 111, 33, 32, 128578]
</pre>
<h3>Also See search()</h3>
<p><i><a href="Other_Language_Features.html#Search" title="OpenSCAD User Manual/Other Language Features">search()</a></i> for text searching. 
</p>
<p style="page-break-after:always;"></p>
<h2>List Comprehensions</h2>
<table cellpadding="0" cellspacing="0" style="clear: right; margin-bottom: .5em; float: right; padding: .5em 0 .8em 1.4em; background: none; width: auto;">
<tbody><tr>
<td>
</td></tr></tbody></table>

<p><span style="font-weight: bold; font-style: normal;">[<span style="color: #A00000;">Note:</span> <span style="font-weight: normal; font-style: italic;">Requires version <span style="font-weight: bold;">2015.03</span></span>]</span>
</p>
<h3>Basic Syntax</h3>
<p>The list comprehensions provide a flexible way to generate lists using the general syntax
</p>
<pre> [ list-definition expression ]
</pre>
<p>The following elements are supported to construct the list definition
</p>
<dl><dt>for (i = sequence)</dt>
<dd>Iteration over a range or an existing list</dd>
<dt>for (init;condition;next)</dt>
<dd>Simple recursive call represented as C-style for</dd>
<dt>each</dt>
<dd>Takes a sequence value as argument, and adds each element to the list being constructed. each x is equivalent to  `for (i = x) i`</dd>
<dt>if (condition)</dt>
<dd>Selection criteria, when true the expression is calculated and added to the result list</dd>
<dt>let (x = value)</dt>
<dd>Local variable assignment</dd></dl>
<h4>multiple generator expressions</h4>
<p><span style="font-weight: bold; font-style: normal;">[<span style="color: #A00000;">Note:</span> <span style="font-weight: normal; font-style: italic;">Requires version <span style="font-weight: bold;">2019.05</span></span>]</span>
</p><p>The list comprehension syntax is generalized to allow multiple expressions. This allows to easily construct lists from multiple sub lists generated by different list comprehension expressions avoiding concat.
</p>
<pre>steps = 50;

points = [
	// first expression generating the points in the positive Y quadrant
	for (a = [0 : steps]) [ a, 10 * sin(a * 360 / steps) + 10 ],
	// second expression generating the points in the negative Y quadrant
	for (a = [steps : -1 : 0]) [ a, 10 * cos(a * 360 / steps) - 20 ],
	// additional list of fixed points
	[ 10, -3 ], [ 3, 0 ], [ 10, 3 ]
];

polygon(points);
</pre>
<h4>for</h4>
<p>The for element defines the input values for the list generation. The syntax is the same as used by the <a href="Conditional_and_Iterator_Functions.html#For_Loop" title="OpenSCAD User Manual/Conditional and Iterator Functions">for</a> iterator. The sequence to the right of the equals sign can be any list. The for element iterates over all the members of the list. The variable on the left of the equals sign take on the value of each member of the sequence in turn. This value can then be processed in the child of the for element, and each result becomes a member of the final list that is produced. 
</p><p>If the sequence has more than one dimension, for iterates over the first dimension only. Deeper dimensions can be accessed by nesting for elements. 
</p><p>Several common usage patterns are presented here.
</p>
<dl><dt>[ for (i = [start : step : end]) i ]</dt>
<dd>Generate output based on a range definition, this version is mainly useful to calculate list values or access existing lists using the range value as index.</dd></dl>
<p><b>Examples</b>
</p>
<pre>// generate a list with all values defined by a range
list1 = [ for (i = [0 : 2 : 10]) i ];
echo(list1); // ECHO: [0, 2, 4, 6, 8, 10]
</pre>
<pre>// extract every second character of a string
str = "SomeText";
list2 = [ for (i = [0 : 2 : len(str) - 1]) str[i] ];
echo(list2); // ECHO: ["S", "m", "T", "x"]
</pre>
<pre>// indexed list access, using function to map input values to output values
function func(x) = x &lt; 1 ? 0 : x + func(x - 1);
input = [1, 3, 5, 8];
output = [for (a = [ 0 : len(input) - 1 ]) func(input[a]) ];
echo(output); // ECHO: [1, 6, 15, 36]
</pre>
<dl><dt>[ for (i = [a, b, c, ...]) i ]</dt>
<dd>Use list parameter as input, this version can be used to map input values to calculated output values.</dd></dl>
<p><b>Examples</b>
</p>
<pre>// iterate over an existing list
friends = ["John", "Mary", "Alice", "Bob"];
list = [ for (i = friends) len(i)];
echo(list); // ECHO: [4, 4, 5, 3]
</pre>
<pre>// map input list to output list
list = [ for (i = [2, 3, 5, 7, 11]) i * i ];
echo(list); // ECHO: [4, 9, 25, 49, 121]
</pre>
<pre>// calculate Fibonacci numbers
function func(x) = x &lt; 3 ? 1 : func(x - 1) + func(x - 2);
input = [7, 10, 12];
output = [for (a = input) func(a) ];
echo(output); // ECHO: [13, 55, 144]
</pre>
<dl><dt>[ for (c = "String") c ]</dt>
<dd>Generate output based on a string, this iterates over each character of the string.</dd></dl>
<p><span style="font-weight: bold; font-style: normal;">[<span style="color: #A00000;">Note:</span> <span style="font-weight: normal; font-style: italic;">Requires version <span style="font-weight: bold;">2019.05</span></span>]</span>
</p><p><b>Examples</b>
</p>
<pre>echo([ for (c = "String") c ]);
// ECHO: ["S", "t", "r", "i", "n", "g"]
</pre>
<dl><dt>[ for (a = inita, b = initb, ...;condition;a = nexta, b = nextb, ...) expr ]</dt>
<dd>Generator for expressing simple recursive call in a c-style for loop.</dd></dl>
<p><span style="font-weight: bold; font-style: normal;">[<span style="color: #A00000;">Note:</span> <span style="font-weight: normal; font-style: italic;">Requires version <span style="font-weight: bold;">2019.05</span></span>]</span>
</p><p>The recursive equivalent of this generator is
</p>
<pre>function f(a, b, ...) =
    condition
    ? concat([expr], f(nexta, nextb, ...))
    : [];
  f(inita, initb, ...)</pre>
<p><b>Examples</b>
</p>
<pre>echo( [for (a = 0, b = 1;a &lt; 5;a = a + 1, b = b + 2) [ a, b * b ] ] );
// ECHO: [[0, 1], [1, 9], [2, 25], [3, 49], [4, 81]]

// Generate fibonacci sequence
echo([for (a = 0, b = 1;a &lt; 1000;x = a + b, a = b, b = x) a]);
// ECHO: [0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233, 377, 610, 987]
</pre>
<h4>each</h4>
<p><span style="font-weight: bold; font-style: normal;">[<span style="color: #A00000;">Note:</span> <span style="font-weight: normal; font-style: italic;">Requires version <span style="font-weight: bold;">2019.05</span></span>]</span>
</p><p><i>each</i> embeds the values of a list given as argument directly, effectively unwrapping the argument list.
</p>
<pre>// Without using "each", a nested list is generated
echo([ for (a = [1 : 4]) [a, a * a] ]);
// ECHO: [[1, 1], [2, 4], [3, 9], [4, 16]]

// Adding "each" unwraps the inner list, producing a flat list as result
echo([ for (a = [1 : 4]) each [a, a * a] ]);
// ECHO: [1, 1, 2, 4, 3, 9, 4, 16]
</pre>
<p><i>each</i> unwraps ranges and helps to build more general <i>for</i> lists when combined with multiple generator expressions.
</p>
<pre>A = [-2, each [1:2:5], each [6:-2:0], -1];
echo([ for (a = A) 2 * a ]);
// ECHO: [-4, 2, 6, 10, 12, 8, 4, 0, -2]
</pre>
<h4>if</h4>
<p>The if element allows selection if the expression should be allocated and added to the result list or not. In the simplest case this allows filtering of an list.
</p>
<dl><dt>[ for (i = list) if (condition(i)) i ]</dt>
<dd>When the evaluation of the condition returns true, the expression i is added to the result list.</dd></dl>
<p><i>Example</i>
</p>
<pre>list = [ for (a = [ 1 : 8 ]) if (a % 2 == 0) a ];
echo(list); // ECHO: [2, 4, 6, 8]
</pre>
<p>Note that the if element cannot be inside an expression, it should be at the top.
</p><p><i>Example</i>
</p>
<pre>// from the input list include all positive odd numbers
// and also all even number divided by 2

list = [-10:5];
echo([for(n=list) if(n%2==0 || n&gt;=0) n%2==0 ? n/2 : n ]); 
// ECHO: [-5, -4, -3, -2, -1, 0, 1, 1, 3, 2, 5]
// echo([for(n=list) n%2==0 ? n/2 : if(n&gt;=0) n ]); // this would generate a syntactical error
</pre>
<h4>if/else</h4>
<p><span style="font-weight: bold; font-style: normal;">[<span style="color: #A00000;">Note:</span> <span style="font-weight: normal; font-style: italic;">Requires version <span style="font-weight: bold;">2019.05</span></span>]</span>
</p><p>The if-else construct is equivalent to the conditional expression ?: except that it can be combined with filter if. 
</p>
<dl><dt>[ for (i = list) if (condition(i)) x else y ]</dt>
<dd>When the evaluation of the condition returns true, the expression x is added to the result list else the expression y.</dd></dl>
<pre>// even numbers are halved, positive odd numbers are preserved, negative odd numbers are eliminated
echo([for (a = [-3:5]) if (a % 2 == 0) [a, a/2] else if (a &gt; 0) [a, a] ]);
// ECHO: [[-2, -1], [0, 0], [1, 1], [2, 1], [3, 3], [4, 2], [5, 5]];
</pre>
<p>Note that in the expression above the conditional operator could not substitute if-else. It is possible to express this same filter with the conditional operator but with a more cryptic logic:
</p>
<pre>// even numbers are halved, positive odd numbers are preserved, negative odd numbers are eliminated
echo([for (a = [-3:5]) if (a % 2 == 0 || (a % 2 != 0 &amp;&amp; a &gt; 0)) a % 2 == 0 ? [a, a / 2] : [a, a] ]);
// ECHO: [[-2, -1], [0, 0], [1, 1], [2, 1], [3, 3], [4, 2], [5, 5]];
</pre>
<p>To bind an else expression to a specific if, it's possible to use parenthesis.
</p>
<pre>// even numbers are dropped, multiples of 4 are substituted by -1 
echo([for(i=[0:10]) if(i%2==0) (if(i%4==0) -1 ) else i]);
// ECHO: [-1, 1, 3, -1, 5, 7, -1, 9]

// odd numbers are dropped, multiples of 4 are substituted by -1 
echo([for(i=[0:10]) if(i%2==0) if(i%4==0) -1 else i]);
// ECHO: [-1, 2, -1, 6, -1, 10]
</pre>
<h4>let</h4>
<p>The let element allows sequential assignment of variables inside a list comprehension definition.
</p>
<dl><dt>[ for (i = list) let (assignments) a ]</dt></dl>
<p><i>Example</i>
</p>
<pre>list = [ for (a = [ 1 : 4 ]) let (b = a*a, c = 2 * b) [ a, b, c ] ];
echo(list); // ECHO: [[1, 1, 2], [2, 4, 8], [3, 9, 18], [4, 16, 32]]
</pre>
<h3>Nested loops</h3>
<p>There are different ways to define nested loops. Defining multiple loop variables inside one for element and multiple for elements produce both flat result lists. To generate nested result lists an additional [ ] markup is required.
</p>
<pre>// nested loop using multiple variables
flat_result1 = [ for (a = [ 0 : 2 ], b = [ 0 : 2 ]) a == b ? 1 : 0 ];
echo(flat_result1); // ECHO: [1, 0, 0, 0, 1, 0, 0, 0, 1]
</pre>
<p><br/>
</p>
<pre>// nested loop using multiple for elements
flat_result2 = [ for (a = [ 0 : 2 ]) for (b = [0 : 2])  a == b ? 1 : 0 ];
echo(flat_result2); // ECHO: [1, 0, 0, 0, 1, 0, 0, 0, 1]
</pre>
<p><br/>
</p>
<pre>// nested loop to generate a bi-dimensional matrix
identity_matrix = [ for (a = [ 0 : 2 ]) [ for (b = [ 0 : 2 ]) a == b ? 1 : 0 ] ];
echo(identity_matrix); // ECHO: [[1, 0, 0], [0, 1, 0], [0, 0, 1]]
</pre>
<p><br/>
</p>
<h3>Advanced Examples</h3>
<p>This chapter lists some advanced examples, useful idioms and use-cases for the list comprehension syntax.
</p>
<h4>Generating vertices for a polygon</h4>
<div class="thumb tright"><div class="thumbinner" style="width:222px;"><a class="image" href="./imgs/220px-OpenSCAD-ellipse.png"><img alt="" class="thumbimage" data-file-height="360" data-file-width="550" decoding="async" height="144" src="./imgs/220px-OpenSCAD-ellipse.png" width="220"/></a>  <div class="thumbcaption">Result</div></div></div>
<p>Using list comprehension, a parametric equation can be calculated at a number of points to approximate many curves, such as the following example for an ellipse (using <a href="2D_Primitives.html#polygon" title="OpenSCAD User Manual/2D Primitives">polygon()</a>):
</p>
<pre>sma = 20;  // semi-minor axis
smb = 30;  // semi-major axis

polygon(
    [ for (a = [0 : 5 : 359]) [ sma * sin(a), smb * cos(a) ] ]
);
</pre>
<p><br clear="all"/>
</p>
<h4>Flattening a nested vector</h4>
<p>List comprehension can be used in a user-defined function to perform tasks on or for vectors.  Here is a user-defined function that flattens a nested vector.
</p>
<pre>// input : nested list
// output : list with the outer level nesting removed
function flatten(l) = [ for (a = l) for (b = a) b ] ;

nested_list = [ [ 1, 2, 3 ], [ 4, 5, 6 ] ];
echo(flatten(nested_list)); // ECHO: [1, 2, 3, 4, 5, 6]
</pre>
<h4>Sorting a vector</h4>
<p>Even a complicated algorithm <a class="extiw" href="https://en.wikipedia.org/wiki/Quicksort" title="w:Quicksort">Quicksort</a> becomes doable with for(), if(), let() and <a href="The_OpenSCAD_Language.html#Recursive_function_calls" title="OpenSCAD User Manual/The OpenSCAD Language">recursion</a>:
</p>
<pre>// input : list of numbers
// output : sorted list of numbers
function quicksort(arr) = !(len(arr)&gt;0) ? [] : let(
    pivot   = arr[floor(len(arr)/2)],
    lesser  = [ for (y = arr) if (y  &lt; pivot) y ],
    equal   = [ for (y = arr) if (y == pivot) y ],
    greater = [ for (y = arr) if (y  &gt; pivot) y ]
) concat(
    quicksort(lesser), equal, quicksort(greater)
);

// use seed in rands() to get reproducible results
unsorted = [for (a = rands(0, 10, 6, 3)) ceil(a)];
echo(unsorted); // ECHO: [6, 1, 8, 9, 3, 2]
echo(quicksort(unsorted)); // ECHO: [1, 2, 3, 6, 8, 9]
</pre>
<h4>Selecting elements of a vector</h4>
<p>select() performs selection and reordering of elements into a new vector. 
</p>
<pre>function select(vector, indices) = [ for (index = indices) vector[index] ];
   
vector1 =   [[0,0],[1,1],[2,2],[3,3],[4,4]];
selector1 = [4,0,3];
vector2 =   select(vector1,selector1);    // [[4, 4], [0, 0], [3, 3]]
vector3 =   select(vector1,[0,2,4,4,2,0]);// [[0, 0], [2, 2], [4, 4],[4, 4], [2, 2], [0, 0]]
// range also works as indices
vector4 =   select(vector1, [4:-1:0]);    // [[4, 4], [3, 3], [2, 2], [1, 1], [0, 0]]
</pre>
<h4>Concatenating two vectors</h4>
<p>Using indices:
</p>
<pre>function cat(L1, L2) = [for (i=[0:len(L1)+len(L2)-1]) 
                        i &lt; len(L1)? L1[i] : L2[i-len(L1)]] ;

echo(cat([1,2,3],[4,5])); //concatenates two OpenSCAD lists [1,2,3] and [4,5], giving [1, 2, 3, 4, 5]
</pre>
<p>Without using indices:
</p>
<pre>function cat(L1, L2) = [for(L=[L1, L2], a=L) a];

echo(cat([1,2,3],[4,5])); //concatenates two OpenSCAD lists [1,2,3] and [4,5], giving [1, 2, 3, 4, 5]
</pre>
<p style="page-break-after:always;"></p>
<h2>Other Language Features</h2>

<h3>Special variables</h3>
<p>Special variables provide an alternate means of passing arguments to modules and functions.
All user, or OpenSCAD, defined variables starting with a '$' are special variables, similar to special variables in lisp.
Modules and function see all outside variables in addition to those passed as arguments or defined internally.
</p><p>The value for a regular variable is assigned at compile time and is thus static for all calls.
</p><p>Special variables pass along their value from within the scope 
<a href="The_OpenSCAD_Language.html#Scope_of_variables" title="OpenSCAD User Manual/The OpenSCAD Language"> (see scope of variables)</a>
from which the module or function is called. 
This means that special variables can potentially have a different value each time a module or function is called.
</p>
<pre>regular  = "regular global";
$special = "special global";
module show() echo("         in show    ", regular,"   ", $special );

echo ("         outside    ", regular,"   ", $special );
          // ECHO: "         outside    ", "regular global", "   ", "special global"
  
for ( regular = [0:1] ){ echo("in regular loop     ", regular,"   ", $special ); show();}
          // ECHO: "in regular loop     ", 0, "   ", "special global"
          // ECHO: "         in show    ", "regular global", "   ", "special global"
          // ECHO: "in regular loop     ", 1, "   ", "special global"
          // ECHO: "         in show    ", "regular global", "   ", "special global"

for ( $special = [5:6] ){ echo("in special loop     ", regular,"   ", $special ); show();}
          // ECHO: "in special loop     ", "regular global", "   ", 5
          // ECHO: "         in show    ", "regular global", "   ", 5
          // ECHO: "in special loop     ", "regular global", "   ", 6
          // ECHO: "         in show    ", "regular global", "   ", 6

show();
          // ECHO: "         in show    ", "regular global", "   ", "special global"
</pre>
<p>This is useful when multiple arguments need to be passed thru several layers of module calls.
</p><p>Several special variables are already defined by OpenSCAD.
</p><p><br/>
</p>
<h4>$fa, $fs and $fn</h4>
<p>The $fa, $fs and $fn special variables control the number of facets used to
generate an arc:
</p><p>$fa is the minimum angle for a fragment. Even a huge circle does not have
more fragments than 360 divided by this number. The default value is 12 (i.e. 30 fragments
for a full circle). The minimum allowed value is 0.01. Attempting to set a lower value causes a warning.
</p><p>$fs is the minimum size of a fragment. The
default value is 2 so very small circles have a smaller number of fragments than specified using $fa. The minimum allowed value is 0.01. Attempting to set a lower value causes a warning.
</p><p>$fn is usually the default value of 0. When this variable has a value greater than zero, the
other two variables are ignored, and a full circle is rendered using this
number of fragments.
</p><p>The higher the number of fragments, the more memory and CPU consumed; large values can bring many systems to their knees. Depending on the design, $fn values, and the corresponding results of $fa &amp; $fs,  should be kept small, at least until the design is finalised when it can be increased for the final result. <b>A $fn over 100 is not recommended</b> or only for specific circumstances, and below 50 would be advisable for performance.
</p><p><b>TIP:</b> If you want to create a circle/cylinder/sphere which has an axis
aligned integer bounding box (i.e. a bounding box that has
integral dimensions, and an integral position) use a value of $fn that
is divisible by 4.
</p><p><br/>
When $fa and $fs are used to determine the number of fragments for a
circle, then OpenSCAD never uses fewer than 5 fragments.
</p><p>This is the C code that calculates the number of fragments in a circle:
</p>
<pre>      int get_fragments_from_r(double r, double fn, double fs, double fa)
      {
             if (r &lt; GRID_FINE) return 3;
             if (fn &gt; 0.0) return (int)(fn &gt;= 3 ? fn : 3);
             return (int)ceil(fmax(fmin(360.0 / fa, r*2*M_PI / fs), 5));
      }
</pre>
<p>Or you can embed this OpenSCAD version in your code to work out what's going on, you need to set r= to your size
</p>
<pre>   echo(n=($fn&gt;0?($fn&gt;=3?$fn:3):ceil(max(min(360/$fa,r*2*PI/$fs),5))),a_based=360/$fa,s_based=r*2*PI/$fs);
</pre>
<p>Spheres are first sliced into as many slices as the number of fragments being used
to render a circle of the sphere's radius, and then every slice is rendered
into as many fragments as are needed for the slice radius. You might have
recognized already that the pole of a sphere is usually a pentagon. This is
why.
</p><p>The number of fragments for a cylinder is determined using the greater of
the two radii.
</p><p>The method is also used when rendering circles and arcs from DXF files. The
variables have no effect when importing STL files.
</p><p>You can generate high resolution spheres by resetting the $fX values in
the instantiating module:
</p>
<pre>      $fs = 0.01;
      sphere(2);
</pre>
<p>or simply by passing the special variable as parameter:
</p>
<pre>      sphere(2, $fs = 0.01);
</pre>
<p>You can even scale the special variable instead of resetting it:
</p>
<pre>      sphere(2, $fs = $fs * 0.01);
</pre>
<h4>$t</h4>
<p>The $t variable is used for animation. If you enable the animation frame with view-&gt;animate and give a value for "FPS" and "Steps", the "Time" field shows the current value of $t. With this information in mind, you can animate your design. The design is recompiled every 1/"FPS" seconds with $t incremented by 1/"Steps" for "Steps" times, ending at either $t=1 or $t=1-1/steps.  
</p><p>If "Dump Pictures" is checked, then images are created in the same directory as the .scad file, using the following $t values, and with the following naming convention:
</p><p>Naming Convention
</p>
<hr/>
<p>Pattern 1:
</p>
<ul style="list-style-image:none"><li>$t=0/Steps filename="frame00001.png"</li>
<li>$t=1/Steps filename="frame00002.png</li>
<li>$t=2/Steps filename="frame00003.png"</li>
<li>. . .</li>
<li>$t=1-3/Steps filename="frame&lt;Steps-2&gt;.png"</li>
<li>$t=1-2/Steps filename="frame&lt;Steps-1&gt;.png"</li>
<li>$t=1-1/Steps filename="frame00000.png"</li></ul>
<p>Or, for other values of Steps, it follows this pattern:
</p><p>Pattern2:
</p>
<ul style="list-style-image:none"><li>$t=0/Steps filename="frame00001.png"</li>
<li>$t=1/Steps filename="frame00002.png</li>
<li>$t=2/Steps filename="frame00003.png"</li>
<li>. . .</li>
<li>$t=1-3/Steps filename="frame&lt;Steps-2&gt;.png"</li>
<li>$t=1-2/Steps filename="frame&lt;Steps-1&gt;.png"</li>
<li>$t=1-1/Steps filename="frame&lt;Steps-0&gt;.png"</li>
<li>$t=1-0/Steps filename="frame00000.png"</li></ul>
<p>Which pattern it chooses appears to be an unpredictable, but consistent determined by Steps.  For example, when Steps=4, it follows the first pattern, and outputs a total of 4 files.  When Steps=3, it follows the second pattern, and also outputs 4 files.  It always outputs either Steps or Steps+1 files, though it may not be predictable which.  When finished, it wraps around and recreate each of the files, looping through and recreating them forever.
</p>
<h4>$vpr, $vpt, $vpf and $vpd</h4>
<p>These contain the current viewport rotation and translation and camera distance - at the time of doing the rendering. Moving the viewport does not update them. During an animation they are updated for each frame.
</p>
<ul style="list-style-image:none"><li>$vpr shows rotation</li>
<li>$vpt shows translation (i.e. won't be affected by rotate and zoom)</li>
<li>$vpf shows the FOV of the view <span style="font-weight: bold; font-style: normal;">[<span style="color: #A00000;">Note:</span> <span style="font-weight: normal; font-style: italic;">Requires version <span style="font-weight: bold;">2021.01</span></span>]</span></li>
<li>$vpd shows the camera distance <span style="font-weight: bold; font-style: normal;">[<span style="color: #A00000;">Note:</span> <span style="font-weight: normal; font-style: italic;">Requires version <span style="font-weight: bold;">2015.03</span></span>]</span></li></ul>
<p>Example
</p>
<pre> cube([10, 10, $vpr[0] / 10]);
</pre>
<p>which makes the cube change size based on the view angle, if an animation loop is active (which does not need to use the $t variable)
</p><p>You can also make bits of a complex model vanish as you change the view.
</p><p>All three variables are writable, but only assignments at the top-level of the main file has an effect on the viewport. <span style="font-weight: bold; font-style: normal;">[<span style="color: #A00000;">Note:</span> <span style="font-weight: normal; font-style: italic;">Requires version <span style="font-weight: bold;">2015.03</span></span>]</span>
</p><p>Example
</p>
<pre> $vpr = [0, 0, $t * 360];
</pre>
<p>which allows a simple 360 degree rotation around the Z axis in animation mode.
</p><p>The menu command <i>Edit - Paste Viewport Rotation/Translation</i> copies the current value of the viewport, but not the current $vpr or $vpt.
</p>
<h4>$preview</h4>
<p><span style="font-weight: bold; font-style: normal;">[<span style="color: #A00000;">Note:</span> <span style="font-weight: normal; font-style: italic;">Requires version <span style="font-weight: bold;">2019.05</span></span>]</span>
</p><p>$preview is true, when in OpenCSG preview (F5). $preview is false, when in render (F6).
</p><p>This can, for example, be used to reduce detail during preview to save time, without losing detail in the final rendered result:
</p>
<pre>$fn = $preview ? 12 : 72;
sphere(r = 1);
</pre>
<p>Note that the render module does not affect $preview:
</p>
<pre>render(){
    $fn = $preview ? 12 : 72;
    sphere(r = 1);
}
</pre>
<p>Another use could be to make the preview show an assembly view and the render generate just the printed parts laid out for printing.
</p><p>If printed parts need extra features that are removed post printing, for example support for suspended holes, then the preview can omit these to show the finished part after post processing.
</p><p>When OpenSCAD is run from the command line $preview is only true when generating a PNG image with OpenCSG. It is false when generating STL, DXF and SVG files with CGAL. It is also false when generating CSG and ECHO files. This may or may not be what you want, but you can always override it on the command line like any other variable with the -D option.
</p>
<h3>Echo Statements</h3>
<p>This function prints the contents to the compilation window (aka Console).  Useful for debugging code. Also see the String function <a href="String_Functions.html#str" title="OpenSCAD User Manual/String Functions">str()</a>.
</p><p>Numeric values are rounded to 5 significant digits.
</p><p>It can be handy to use 'variable=variable' as the expression to easily label the variables, see the example below.
</p><p><b>Usage examples:</b>
</p>
<pre>my_h=50;
my_r=100;
echo("This is a cylinder with h=", my_h, " and r=", my_r);
echo(my_h=my_h,my_r=my_r); // shortcut
cylinder(h=my_h, r=my_r);
</pre>
<p>Shows in the Console as
</p>
<pre>ECHO: "This is a cylinder with h=", 50, " and r=", 100
ECHO: my_h = 50, my_r = 100
</pre>
<p>Note that the output will not have the extra double quotes and commas if converted to a string using str().
</p>
<h4>Rounding examples</h4>
<p>An example for the rounding:
</p>
<pre>a=1.0;
b=1.000002;
echo(a);
echo(b);

if(a==b){ //while echoed the same, the values are still distinct 
    echo ("a==b");
}else if(a&gt;b){
    echo ("a&gt;b");
}else if(a&lt;b){
    echo ("a&lt;b");
}else{
    echo ("???");
}
</pre>
<h4>Small and large Numbers</h4>
<pre>c=1000002;
d=0.000002;
echo(c); //1e+06
echo(d); //2e-06
</pre>
<h4>HTML</h4>
<p>HTML output is not officially supported, however depending on the OpenSCAD version, some HTML tags were rendered in the console window.
</p>
<h3>Echo Function</h3>
<p><span style="font-weight: bold; font-style: normal;">[<span style="color: #A00000;">Note:</span> <span style="font-weight: normal; font-style: italic;">Requires version <span style="font-weight: bold;">2019.05</span></span>]</span>
</p><p>Echo can be used in expression context to print information while the function/expression is evaluated. The output is generated before the expression evaluation to allow debugging of recursive functions. 
</p><p><b>Example</b>
</p>
<pre> a = 3; b = 5;
 
 // echo() prints values before evaluating the expression
 r1 = echo(a, b) a * b; // ECHO: 3, 5
 
 // using let it's still easy to output the result
 r2 = let(r = 2 * a * b) echo(r) r; // ECHO: 30
 
 // use echo statement for showing results 
 echo(r1, r2); // ECHO: 15, 30
</pre>
<p>A more complex example shows how echo() can be used in both descending and ascending path of a recursive function. The result() helper function is a simple way to output the value of an expression after evaluation.
</p><p><b>Example printing both input values and result of recursive sum()</b>
</p>
<pre> v = [4, 7, 9, 12];
 function result(x) = echo(result = x) x;
 function sum(x, i = 0) = echo(str("x[", i, "]=", x[i])) result(len(x) &gt; i ? x[i] + sum(x, i + 1) : 0);
 echo("sum(v) = ", sum(v));
 
 // ECHO: "x[0]=4"
 // ECHO: "x[1]=7"
 // ECHO: "x[2]=9"
 // ECHO: "x[3]=12"
 // ECHO: "x[4]=undef"
 // ECHO: result = 0
 // ECHO: result = 12
 // ECHO: result = 21
 // ECHO: result = 28
 // ECHO: result = 32
 // ECHO: "sum(v) = ", 32
</pre>
<h3>Render</h3>
<p>Forces the generation of a mesh even in preview mode. Useful when the boolean operations become too slow to track.
</p><p>Needs description.
</p><p><b>Usage examples:</b>
</p>
<pre>render(convexity = 2) difference() {
 cube([20, 20, 150], center = true);
 translate([-10, -10, 0])
  cylinder(h = 80, r = 10, center = true);
 translate([-10, -10, +40])
  sphere(r = 10);
 translate([-10, -10, -40])
  sphere(r = 10);
}
</pre>
<h3>Surface</h3>
<p>Surface reads <a class="extiw" href="https://en.wikipedia.org/wiki/Heightmap" title="w:Heightmap">Heightmap</a> information from text or image files.
</p><p><b>Parameters</b>
</p>
<dl><dt>file</dt>
<dd>String. The path to the file containing the heightmap data.</dd></dl>
<dl><dt>center</dt>
<dd>Boolean.  This determines the positioning of the generated object.  If true, object is centered in X- and Y-axis.  Otherwise, the object is placed in the positive quadrant.  Defaults to false.</dd></dl>
<dl><dt>invert</dt>
<dd>Boolean. Inverts how the color values of imported images are translated into height values. This has no effect when importing text data files. Defaults to false. <span style="font-weight: bold; font-style: normal;">[<span style="color: #A00000;">Note:</span> <span style="font-weight: normal; font-style: italic;">Requires version <span style="font-weight: bold;">2015.03</span></span>]</span></dd></dl>
<dl><dt>convexity</dt>
<dd>Integer. The convexity parameter specifies the maximum number of front sides (back sides) a ray intersecting the object might penetrate. This parameter is only needed for correctly displaying the object in OpenCSG preview mode and has no effect on the final rendering.</dd></dl>
<h4>Text file format</h4>
<p>The format for text based heightmaps is a matrix of numbers that represent the height for a specific point. Rows are mapped to the Y-axis, columns to the X axis.
The numbers must be separated by spaces or tabs. Empty lines and lines starting with a # character are ignored.
</p>
<h4>Images</h4>
<p><span style="font-weight: bold; font-style: normal;">[<span style="color: #A00000;">Note:</span> <span style="font-weight: normal; font-style: italic;">Requires version <span style="font-weight: bold;">2015.03</span></span>]</span>
</p><p>Currently only PNG images are supported. Alpha channel information of the image is ignored and the height for the pixel is determined by converting the color value to <a class="extiw" href="https://en.wikipedia.org/wiki/Grayscale" title="w:Grayscale">Grayscale</a> using the linear luminance for the sRGB color space (Y = 0.2126R + 0.7152G + 0.0722B). The gray scale values are scaled to be in the range 0 to 100.
</p>
<h4>Examples</h4>
<p><b>Example 1:</b>
</p>
<pre>//surface.scad
surface(file = "surface.dat", center = true, convexity = 5);
%translate([0,0,5])cube([10,10,10], center =true);
</pre>
<pre>#surface.dat
10 9 8 7 6 5 5 5 5 5 
9 8 7 6 6 4 3 2 1 0 
8 7 6 6 4 3 2 1 0 0
7 6 6 4 3 2 1 0 0 0
6 6 4 3 2 1 1 0 0 0
6 6 3 2 1 1 1 0 0 0
6 6 2 1 1 1 1 0 0 0
6 6 1 0 0 0 0 0 0 0
3 1 0 0 0 0 0 0 0 0
3 0 0 0 0 0 0 0 0 0
</pre>
<p>Result:
</p><p><a class="image" href="./imgs/Openscad_surface_example_x1.png"><img alt="Openscad surface example x1.png" data-file-height="495" data-file-width="521" decoding="async" height="495" src="./imgs/Openscad_surface_example_x1.png" width="521"/></a>
</p><p><b>Example 2</b>
</p>
<pre> // example010.dat generated using octave:
 // d = (sin(1:0.2:10)' * cos(1:0.2:10)) * 10;
 // save("example010.dat", "d");
 intersection() {
   surface(file = "example010.dat", center = true, convexity = 5);
   rotate(45, [0, 0, 1]) surface(file = "example010.dat", center = true, convexity = 5); 
 }
</pre>
<p><a class="image" href="./imgs/Openscad_surface_example_x2.png"><img alt="Openscad surface example x2.png" data-file-height="366" data-file-width="397" decoding="async" height="366" src="./imgs/Openscad_surface_example_x2.png" width="397"/></a>
</p><p><b>Example 3:</b>
</p><p><span style="font-weight: bold; font-style: normal;">[<span style="color: #A00000;">Note:</span> <span style="font-weight: normal; font-style: italic;">Requires version <span style="font-weight: bold;">2015.03</span></span>]</span>
</p>
<pre>// Example 3a
scale([1, 1, 0.1])
  surface(file = "smiley.png", center = true);
</pre>
<pre>// Example 3b
scale([1, 1, 0.1])
  surface(file = "smiley.png", center = true, invert = true);
</pre>
<link href="mw-data:TemplateStyles:r3721355/mw-parser-output/.tmulti" rel="mw-deduplicated-inline-style"/><div class="thumb tmulti tnone center"><div class="thumbinner" style="width:672px;max-width:672px"><div class="trow"><div class="tsingle" style="width:222px;max-width:222px"><div class="thumbimage"><a class="image" href="./imgs/220px-OpenSCAD_surface_example_input_image.png"><img alt="Input image" data-file-height="300" data-file-width="400" decoding="async" height="165" src="./imgs/220px-OpenSCAD_surface_example_input_image.png" width="220"/></a></div><div class="thumbcaption">Input image</div></div><div class="tsingle" style="width:222px;max-width:222px"><div class="thumbimage"><a class="image" href="./imgs/220px-OpenSCAD_surface_example.png"><img alt="Surface output" data-file-height="600" data-file-width="800" decoding="async" height="165" src="./imgs/220px-OpenSCAD_surface_example.png" width="220"/></a></div><div class="thumbcaption">Example 3a: surface(invert = false)</div></div><div class="tsingle" style="width:222px;max-width:222px"><div class="thumbimage"><a class="image" href="./imgs/220px-OpenSCAD_surface_example__28inverted_29.png"><img alt="Surface output inverted" data-file-height="600" data-file-width="800" decoding="async" height="165" src="./imgs/220px-OpenSCAD_surface_example__28inverted_29.png" width="220"/></a></div><div class="thumbcaption">Example 3b: surface (invert = true)</div></div></div><div class="trow" style="display:flex"><div class="thumbcaption">Example 3: Using surface() with a PNG image as heightmap input.</div></div></div></div>
<p><b>Example 4:</b>
</p><p><span style="font-weight: bold; font-style: normal;">[<span style="color: #A00000;">Note:</span> <span style="font-weight: normal; font-style: italic;">Requires version <span style="font-weight: bold;">2015.03</span></span>]</span>
</p>
<pre>// Example 4
surface(file = "BRGY-Grey.png", center = true, invert = false);
</pre>
<ul class="gallery mw-gallery-traditional" style="list-style-image:none">
		<li class="gallerybox" style="width: 155px"><div style="width: 155px">
			<div class="thumb" style="width: 150px;"><div style="margin:37.5px auto;"><a class="image" href="./imgs/120px-BRGY-Grey.png"><img alt="" data-file-height="200" data-file-width="320" decoding="async" height="75" src="./imgs/120px-BRGY-Grey.png" width="120"/></a></div></div>
			<div class="gallerytext">
<p>PNG Test File
</p>
			</div>
		</div></li>
		<li class="gallerybox" style="width: 155px"><div style="width: 155px">
			<div class="thumb" style="width: 150px;"><div style="margin:33.5px auto;"><a class="image" href="./imgs/120px-BRGY-Grey-3D.png"><img alt="" data-file-height="416" data-file-width="600" decoding="async" height="83" src="./imgs/120px-BRGY-Grey-3D.png" width="120"/></a></div></div>
			<div class="gallerytext">
<p>3D Surface
</p>
			</div>
		</div></li>
</ul>
<h3>Search</h3>
<p>The search() function is a general-purpose function to find one or more (or all) occurrences of a value or list of values in a vector, string or more complex list-of-list construct.
</p>
<h4>Search Usage</h4>
<dl><dd>search( <i>match_value</i> , <i>string_or_vector</i> [, <i>num_returns_per_match</i> [, <i>index_col_num</i> ] ] );</dd></dl>
<h4>Search Arguments</h4>
<ul style="list-style-image:none"><li><b>match_value</b></li></ul>
<dl><dd><ul style="list-style-image:none"><li>Can be a single string value. Search loops over the characters in the string and searches for each one in the second argument. The second argument must be a string or a list of lists (this second case is not recommended). The search function does <b>not</b> search for substrings.</li>
<li>Can be a single numerical value.</li>
<li>Can be a list of values. The search function searches for each item on the list.</li>
<li>To search for a list or a full string give the list or string as a single element list such as ["abc"] to search for the string "abc" (See <b>Example 9</b>) or [[6,7,8]] to search for the list [6,7,8].  Without the extra brackets, search looks separately for each item in the list.</li>
<li>If match_value is boolean then search returns undef.</li></ul></dd></dl>
<ul style="list-style-image:none"><li><b>string_or_vector</b></li></ul>
<dl><dd><ul style="list-style-image:none"><li>The string or vector to search for matches.</li>
<li>If <b>match_value</b> is a string then this should be a string and the string is searched for individual character matches to the characters in <b>match_value</b></li>
<li>If this is a list of lists, v=[[a0,a1,a2...],[b0,b1,b2,...],[c0,c1,c2,...],...] then search looks only at one index position of the sublists. By default this is position 0, so the search looks only at a0, b0, c0, etc.  The <b>index_col_num</b> parameter changes which index is searched.</li>
<li>If <b>match_value</b> is a string and this parameter is a list of lists then the characters of the string are tested against the appropriate index entry in the list of lists. However, if any characters fail to find a match a warning message is printed and that return value is excluded from the output (if <b>num_returns_per_match</b> is 1). This means that the length of the output is unpredictable.</li></ul></dd></dl>
<ul style="list-style-image:none"><li><b>num_returns_per_match</b> (default: 1)</li></ul>
<dl><dd><ul style="list-style-image:none"><li>By default, search only looks for one match per element of match_value to return as a list of indices</li>
<li>If num_returns_per_match &gt; 1, search returns a list of lists of up to num_returns_per_match index values for each element of match_value.</li></ul>
<dl><dd><ul style="list-style-image:none"><li>See <b>Example 8</b> below.</li></ul></dd></dl>
<ul style="list-style-image:none"><li>If num_returns_per_match = 0, search returns a list of lists of <b>all</b> matching index values for each element of match_value.</li></ul>
<dl><dd><ul style="list-style-image:none"><li>See <b>Example 6</b> below.</li></ul></dd></dl></dd></dl>
<ul style="list-style-image:none"><li><b>index_col_num</b> (default: 0)</li></ul>
<dl><dd><ul style="list-style-image:none"><li>As noted above, when searching a list of lists, search looks only at one index position of each sublist.  That index position is specified by <b>index_col_num</b>.</li>
<li>See <b>Example 5</b> below for a simple usage example.</li></ul></dd></dl>
<h4>Search Usage Examples</h4>
<dl><dd>See <b>example023.scad</b> included with OpenSCAD for a renderable example.</dd></dl>
<h5>Index values return as list</h5>
<table class="wikitable">
<tbody><tr>
<th>Example
</th>
<th>Code
</th>
<th>Result
</th></tr>
<tr>
<td align="center">
<p>1
</p>
</td>
<td>
<p><code>search("a","abcdabcd");</code>
</p>
</td>
<td>
<p>[0]
</p>
</td></tr>
<tr>
<td align="center">
<p>2
</p>
</td>
<td>
<p><code>search("e","abcdabcd");</code>
</p>
</td>
<td>
<p>[]
</p>
</td></tr>
<tr>
<td align="center">
<p>3
</p>
</td>
<td>
<p><code>search("a","abcdabcd",0);</code>
</p>
</td>
<td>
<p>[[0,4]]
</p>
</td></tr>
<tr>
<td align="center">
<p>4
</p>
</td>
<td>
<p><code>data=[ ["a",1],["b",2],["c",3],["d",4],["a",5],["b",6],["c",7],["d",8],["e",9] ];</code>
</p><p><code>search("a", data, <i>num_returns_per_match</i>=0);</code>
</p>
</td>
<td>
<p>[[0,4]] (see also Example 6 below)
</p>
</td></tr></tbody></table>
<h5>Search on different column; return Index values</h5>
<p><b>Example 5:</b>
</p>
<pre> data= [ ["a",1],["b",2],["c",3],["d",4],["a",5],["b",6],["c",7],["d",8],["e",3] ];
 echo(search(3, data));    // Searches index 0, so it doesn't find anything
 echo(search(3, data, <i>num_returns_per_match</i>=0, <i>index_col_num</i>=1));
</pre>
<p>Outputs:
</p>
<pre> ECHO: []
 ECHO: [2, 8]
</pre>
<h5>Search on list of values</h5>
<p><b>Example 6:  Return all matches per search vector element.</b>
</p>
<pre> data= [ ["a",1],["b",2],["c",3],["d",4],["a",5],["b",6],["c",7],["d",8],["e",9] ];
 search("abc", data, num_returns_per_match=0);
</pre>
<p>Returns:
</p>
<pre>   [[0,4],[1,5],[2,6]]
</pre>
<p><b>Example 7:  Return first match per search vector element; special case return vector.</b>
</p>
<pre> data= [ ["a",1],["b",2],["c",3],["d",4],["a",5],["b",6],["c",7],["d",8],["e",9] ];
 search("abc", data, num_returns_per_match=1);
</pre>
<p>Returns:
</p>
<pre>   [0,1,2]
</pre>
<p><b>Example 8:  Return first two matches per search vector element; vector of vectors.</b>
</p>
<pre> data= [ ["a",1],["b",2],["c",3],["d",4],["a",5],["b",6],["c",7],["d",8],["e",9] ];
 search("abce", data, num_returns_per_match=2);
</pre>
<p>Returns:
</p>
<pre> [[0,4],[1,5],[2,6],[8]]
</pre>
<h5>Search on list of strings</h5>
<p><b>Example 9:</b>
</p>
<pre> lTable2=[ ["cat",1],["b",2],["c",3],["dog",4],["a",5],["b",6],["c",7],["d",8],["e",9],["apple",10],["a",11] ];
 lSearch2=["b","zzz","a","c","apple","dog"];
 l2=search(lSearch2,lTable2);
 echo(str("Default list string search (",lSearch2,"): ",l2));
</pre>
<p>Returns
</p>
<pre> ECHO: "Default list string search (["b", "zzz", "a", "c", "apple", "dog"]): [1, [], 4, 2, 9, 3]"
</pre>
<h5>Getting the right results</h5>
<pre>// workout which vectors get the results
v=[ ["O",2],["p",3],["e",9],["n",4],["S",5],["C",6],["A",7],["D",8] ];
//
echo(v[0]);					// -&gt; ["O",2]
echo(v[1]);                                     // -&gt; ["p",3]
echo(v[1][0],v[1][1]);                          // -&gt; "p",3
echo(search("p",v));                            // find "p" -&gt; [1]
echo(search("p",v)[0]);                         // -&gt; 1
echo(search(9,v,0,1));                          // find  9  -&gt; [2] 
echo(v[search(9,v,0,1)[0]]);                    // -&gt; ["e",9]
echo(v[search(9,v,0,1)[0]][0]);                 // -&gt; "e"
echo(v[search(9,v,0,1)[0]][1]);                 // -&gt; 9
echo(v[search("p",v,1,0)[0]][1]);               // -&gt; 3
echo(v[search("p",v,1,0)[0]][0]);               // -&gt; "p"
echo(v[search("d",v,1,0)[0]][0]);               // "d" not found -&gt; undef
echo(v[search("D",v,1,0)[0]][1]);               // -&gt; 8
</pre>
<h3>OpenSCAD Version</h3>
<p>version() and version_num() returns the OpenSCAD version number.
</p>
<ul style="list-style-image:none"><li>The version() function returns the OpenSCAD version as a vector of three numbers, e.g. [2011, 9, 23]</li>
<li>The version_num() function returns the OpenSCAD version as a number, e.g. 20110923</li></ul>
<h3>parent_module(n) and $parent_modules</h3>
<p>$parent_modules contains the number of modules in the instantiation stack.
parent_module(i) returns the name of the module i levels above the current module in the instantiation stack.
The stack is independent of where the modules are defined. It's where they're instantiated that counts.
This can, for example, be used to build a BOM (Bill Of Material).
</p><p>Example:
</p>
<pre> module top() {
   children();
 }
 module middle() {
   children();
 }
 top() middle() echo(parent_module(0)); // prints "middle"
 top() middle() echo(parent_module(1)); // prints "top"
</pre>
<h3>assert</h3>
<p><span style="font-weight: bold; font-style: normal;">[<span style="color: #A00000;">Note:</span> <span style="font-weight: normal; font-style: italic;">Requires version <span style="font-weight: bold;">2019.05</span></span>]</span>
</p><p><i>see also <a class="extiw" href="https://en.wikipedia.org/wiki/Assertion_(software_development)" title="wikipedia:Assertion (software development)">Assertion (software development)</a></i>
</p><p>Assert evaluates a logical expression. If the expression evaluates to false, the generation of the preview/render is stopped, and an error condition is reported via the console.  The report consists of a string representation of the expression and an additional string (optional) that is specified in the assert command.
</p>
<pre> assert(condition);
 assert(condition, message);
</pre>
<p><b>Parameters</b>
</p>
<dl><dt>condition</dt>
<dd>Expression. The expression to be evaluated as check for the assertion.</dd></dl>
<dl><dt>message</dt>
<dd>String. Optional message to be output in case the assertion failed.</dd></dl>
<h4>Example</h4>
<p>The simplest example is a simple <code>assert(false);</code>, e.g. in a file named <code>assert_example1.scad</code>.
</p>
<pre>cube();
assert(false);
sphere();
  
// ERROR: Assertion 'false' failed in file assert_example1.scad, line 2
</pre>
<p>This example has little use, but the simple <code>assert(false);</code> can be used in code sections that should be unreachable.
</p>
<h4>Checking parameters</h4>
<p>A useful example is checking the validity of input parameters:
</p>
<pre>module row(cnt = 3){
    // Count has to be a positive integer greater 0
    assert(cnt &gt; 0);
    for (i = [1 : cnt]) {
        translate([i * 2, 0, 0]) sphere();
    }
}

row(0);

// ERROR: Assertion '(cnt &gt; 0)' failed in file assert_example2.scad, line 3
</pre>
<h4>Adding message</h4>
<p>When writing a library, it could be useful to output additional information to the user in case of an failed assertion.
</p>
<pre>module row(cnt = 3){
    assert(cnt &gt; 0, "Count has to be a positive integer greater 0");
    for(i = [1 : cnt]) {
        translate([i * 2, 0, 0]) sphere();
    }
}

row(0);

// ERROR: Assertion '(cnt &gt; 0)': "Count has to be a positive integer greater 0" failed in file assert_example3.scad, line 2
</pre>
<h4>Using assertions in function</h4>
<p>Assert returns its children, so when using it in a function you can write
</p>
<pre>function f(a, b) =
    assert(a &lt; 0, "wrong a") // assert input
    assert(b &gt; 0, "wrong b") // assert input
    let (c = a + b) // derive a new value from input
    assert(c != 0, "wrong c") // assert derived value
    a * b; // calculate
</pre>
<p style="page-break-after:always;"></p>
<h1>Chapter 7 -- User-Defined Functions and Modules</h1>
<p><big>OpenSCAD User Manual/The OpenSCAD Language</big>
</p>
<h3>Introduction</h3>
<hr/>
<p>Users can extend the language by defining their own modules and functions. This allows grouping portions of script for easy reuse with different values. 
Well chosen names also help document your script.
</p><p>OpenSCAD provides:
</p>
<dl><dd><b>functions</b>, which return values.</dd>
<dd><b>modules</b>, which perform actions, but do not return values.</dd></dl>
<p>OpenSCAD calculates the value of variables  at compile-time, not run-time.
The last variable assignment within a scope applies everywhere in that scope. It also applies to any inner scopes, or children, thereof. 
See <a href="General.html#Scope_of_variables" title="OpenSCAD User Manual/General">Scope of variables</a> for more details.
It may be helpful to think of them as override-able constants rather than as variables.
</p><p>For functions and modules OpenSCAD makes copies of pertinent portions of the script for each use. 
Each copy has its own scope, which contains fixed values for variables and expressions unique to that instance.
</p><p>The name of functions and modules is case sensitive, therefore <b>test()</b> and <b>TEST()</b> refer to different functions/modules.
</p>
<h3>Scope</h3>
<p>Modules and functions can be defined within a module definition, where they are visible only in the scope of that module.
</p><p>For example
</p>
<div class="thumb tright"><div class="thumbinner" style="width:222px;"><a class="image" href="./imgs/220px-Parabola_Openscad_plot.jpg"><img alt="Parabola Openscad plot.jpg" class="thumbimage" data-file-height="244" data-file-width="303" decoding="async" height="177" src="./imgs/220px-Parabola_Openscad_plot.jpg" width="220"/></a>  <div class="thumbcaption"></div></div></div>
<pre>function parabola(f,x) = ( 1/(4*f) ) * x*x; 
module plotParabola(f,wide,steps=1) {
  function y(x) = parabola(f,x);
  module plot(x,y) {
    translate([x,y])
      circle(1,$fn=12);
  }
  xAxis=[-wide/2:steps:wide/2];
  for (x=xAxis) 
    plot(x, y(x));
}
color("red")  plotParabola(10, 100, 5);
color("blue") plotParabola(4,  60,  2);
</pre>
<p>The function y() and module plot() cannot be called in the global scope.
</p>
<h3>Functions</h3>
<hr/>
<p>Functions operate on values to calculate and return new values.
</p>
<dl><dd><b>function definition</b></dd></dl>
<pre>function name ( parameters ) = value ;
</pre>
<dl><dd><dl><dd><b>name</b>
<dl><dd>Your name for this function. A meaningful name is helpful later.</dd></dl></dd>
<dd><b>parameters</b>
<dl><dd>Zero or more arguments. Parameters can be assigned default values, to use in case they are omitted in the call. Parameter names are local and do not conflict with external variables of the same name.</dd></dl></dd>
<dd><b>value</b>
<dl><dd>an expression that calculates a value. This value can be a vector.</dd></dl></dd></dl></dd>
<dd><b>function use</b>
<dl><dd><dl><dd>When used, functions are treated as values, and do not themselves end with a semi-colon ';'.</dd></dl></dd></dl></dd></dl>
<pre>// example 1
    
function func0() = 5;
function func1(x=3) = 2*x+1;
function func2() = [1,2,3,4];
function func3(y=7) = (y==7) ? 5 : 2 ;
function func4(p0,p1,p2,p3) = [p0,p1,p2,p3];
    
echo(func0());            // 5
a =   func1();            // 7
b =   func1(5);           // 11
echo(func2());            // [1, 2, 3, 4]
echo(func3(2), func3());  // 2, 5
   
z = func4(func0(), func1(), func2(), func3());
//  [5, 7, [1, 2, 3, 4], 5]
   
translate([0, -4*func0(), 0])
  cube([func0(), 2*func0(), func0()]);
// same as translate([0,-20,0]) cube([5,10,5]);
</pre>
<pre>// example 2  creates for() range to give desired no of steps to cover range
  
function steps(start, no_steps, end) =
  [start : (end-start)/(no_steps-1) : end];
  
echo(steps(10, 3, 5));                // [10 : -2.5 : 5]
for (i = steps(10, 3, 5))  echo(i);   //  10 7.5 5
  
echo(steps(10, 3, 15));               // [10 : 2.5 : 15]
for (i = steps(10, 3, 15)) echo(i);   // 10 12.5 15
  
echo(steps(0, 5, 5));                // [0 : 1.25 : 5]
for (i = steps(0, 5, 5))   echo(i);  // 0 1.25 2.5 3.75 5
</pre>
<div class="thumb tright"><div class="thumbinner" style="width:222px;"><a class="image" href="./imgs/220px-OpenScad_func_ex1_Rhomboid.jpg"><img alt="" class="thumbimage" data-file-height="141" data-file-width="230" decoding="async" height="135" src="./imgs/220px-OpenScad_func_ex1_Rhomboid.jpg" width="220"/></a>  <div class="thumbcaption">Example 3</div></div></div>
<pre>// example 3     rectangle with top pushed over, keeping same y
  
function rhomboid(x=1, y=1, angle=90)
  = [[0,0],[x,0],
    [x+x*cos(angle)/sin(angle),y],
    [x*cos(angle)/sin(angle),y]];
    
echo (v1); v1 = rhomboid(10,10,35);  // [[0, 0], 
                                     // [10, 0], 
                                     // [24.2815, 10],
                                     // [14.2815, 10]]
polygon(v1);
polygon(rhomboid(10,10,35));         // alternate
</pre>
<pre>//performing the same action with a module
   
module parallelogram(x=1,y=1,angle=90)
    {polygon([[0,0],[x,0],
              [x+x*cos(angle)/sin(angle),y],
              [x*cos(angle)/sin(angle),y]]);};
  
parallelogram(10,10,35);
</pre>
<p>You can also use the <a href="Conditional_and_Iterator_Functions.html#Let_Statement" title="OpenSCAD User Manual/Conditional and Iterator Functions"><b>let</b> statement</a>:
</p>
<pre>function get_square_triangle_perimeter(p1, p2) =
  let (hypotenuse = sqrt(p1*p1+p2*p2))
    p1 + p2 + hypotenuse;
</pre>
<p>It can be used to store values in recursive functions. See the <a class="extiw" href="https://en.wikipedia.org/wiki/let_expression" title="wikipedia:let expression">wikipedia page</a> for more information on the general concept.
</p>
<h4>Recursive functions</h4>
<p><a class="extiw" href="https://en.wikipedia.org/wiki/recursion_(computer_science)" title="w:recursion (computer science)">Recursive</a> function calls are supported. Using the Conditional Operator "... <b>?</b> ... <b>:</b> ... ", it is possible to ensure the recursion is terminated.
</p>
<pre>// recursion example: add all integers up to n
function add_up_to(n) = ( n==0 ? 0 : n + add_up_to(n-1) );
</pre>
<p>There is a built-in recursion limit to prevent an application crash (a few thousands). If the limit is hit, you get an error like: ERROR: Recursion detected calling function ... .
</p><p>For all <a class="extiw" href="https://en.wikipedia.org/wiki/Tail_call" title="w:Tail call">tail-recursive</a> functions that calls itself, OpenSCAD is able to eliminate internally the recursion transforming it in an iterative loop. The previous example code is not a tail call as an "add" operation need to be calculated after calling. But the following is entitled to tail-recursion elimination:
</p>
<pre>// tail-recursion elimination example: add all integers up to n
function add_up_to(n, sum=0) =
    n==0 ?
        sum :
        add_up_to(n-1, sum+n);
 
echo(sum=add_up_to(100000));
// ECHO: sum = 5.00005e+009
</pre>
<p>Tail-recursion elimination allows much higher recursion limits (up to 1000000).
</p>
<div style="clear: both"></div>
<h3>Function Literals</h3>
<p><span style="font-weight: bold; font-style: normal;">[<span style="color: #A00000;">Note:</span> <span style="font-weight: normal; font-style: italic;">Requires version <span style="font-weight: bold;">2021.01</span></span>]</span>
</p>
<hr/>
<p><a class="extiw" href="https://en.wikipedia.org/wiki/Anonymous_function" title="w:Anonymous function">Function literals</a> are expressions that define functions, other names for this are lambdas or closures.
</p>
<dl><dd><b>function literal</b></dd></dl>
<pre>function (x) x + x
</pre>
<p>Function literals can be assigned to variables and passed around like any value. Calling the function uses the normal function call syntax with parenthesis.
</p>
<pre>func = function (x) x * x;
echo(func(5)); // ECHO: 25
</pre>
<p>It's possible to define functions that return functions. Unbound variables are captured by lexical scope.
</p>
<pre>a = 1;
selector = function (which)
             which == "add"
             ? function (x) x + x + a
             : function (x) x * x + a;
             
echo(selector("add"));     // ECHO: function(x) ((x + x) + a)
echo(selector("add")(5));  // ECHO: 11

echo(selector("mul"));     // ECHO: function(x) ((x * x) + a)
echo(selector("mul")(5));  // ECHO: 26
</pre>
<h3>Modules</h3>
<hr/>
<p>Modules can be used to define objects or, using children(), define operators.
Once defined, modules are temporarily added to the language.
</p>
<dl><dd><b>module definition</b></dd></dl>
<pre>module name ( parameters ) { actions }
</pre>
<dl><dd><dl><dd><b>name</b>
<dl><dd>Your name for this module. Try to pick something meaningful.</dd></dl></dd>
<dd><b>parameters</b>
<dl><dd>Zero or more arguments. Parameters may be assigned default values, to use in case they are omitted in the call. Parameter names are local and do not conflict with external variables of the same name.</dd></dl></dd></dl></dd></dl>
<dl><dd><dl><dd><b>actions</b>
<dl><dd>Nearly any statement valid outside a module can be included within a module. This includes the definition of functions and other modules. Such functions and modules can be called only from within the enclosing module.</dd></dl></dd></dl></dd></dl>
<p>Variables can be assigned, but their scope is limited to within each individual use of the module. There is no mechanism in OpenSCAD for modules to return values to the outside.
See <a href="General.html#Scope_of_variables" title="OpenSCAD User Manual/General">Scope of variables</a> for more details.
</p>
<h4>Object modules</h4>
<p>Object modules use one or more primitives, with associated operators, to define new objects.
</p><p>In use, object modules are actions ending with a semi-colon ';'.
</p>
<pre>name ( parameter values );
</pre>
<div class="thumb tright"><div class="thumbinner" style="width:222px;"><a class="image" href="./imgs/220px-OpenScad_Module_ex1_Color_bar.jpg"><img alt="" class="thumbimage" data-file-height="295" data-file-width="241" decoding="async" height="269" src="./imgs/220px-OpenScad_Module_ex1_Color_bar.jpg" width="220"/></a>  <div class="thumbcaption">Color bar</div></div></div>
<pre>//example 1
   
translate([-30,-20,0])
   ShowColorBars(Expense);
   
ColorBreak=[[0,""],
           [20,"lime"],  // upper limit of color range
           [40,"greenyellow"],
           [60,"yellow"],
           [75,"LightCoral"],
           [200,"red"]];
Expense=[16,20,25,85,52,63,45];
   
module ColorBar(value,period,range){  // 1 color on 1 bar
   RangeHi = ColorBreak[range][0];
   RangeLo = ColorBreak[range-1][0];
   color( ColorBreak[range][1] ) 
   translate([10*period,0,RangeLo])
      if (value &gt; RangeHi)      cube([5,2,RangeHi-RangeLo]);
      else if (value &gt; RangeLo) cube([5,2,value-RangeLo]);
  }  
module ShowColorBars(values){
    for (month = [0:len(values)-1], range = [1:len(ColorBreak)-1])
      ColorBar(values[month],month,range);
}
</pre>
<div class="thumb tright"><div class="thumbinner" style="width:222px;"><a class="image" href="./imgs/220px-OpenScad_module_ex2_House.jpg"><img alt="" class="thumbimage" data-file-height="204" data-file-width="278" decoding="async" height="161" src="./imgs/220px-OpenScad_module_ex2_House.jpg" width="220"/></a>  <div class="thumbcaption">House</div></div></div>
<pre>//example 2
module house(roof="flat",paint=[1,0,0]) {
   color(paint)
   if(roof=="flat") { translate([0,-1,0]) cube(); }
   else if(roof=="pitched") {
     rotate([90,0,0]) linear_extrude(height=1)
     polygon(points=[[0,0],[0,1],[0.5,1.5],[1,1],[1,0]]); }
   else if(roof=="domical") {
     translate([0,-1,0]){
       translate([0.5,0.5,1]) sphere(r=0.5,$fn=20); cube(); }
} }

                   house();
translate([2,0,0]) house("pitched");
translate([4,0,0]) house("domical",[0,1,0]);
translate([6,0,0]) house(roof="pitched",paint=[0,0,1]);
translate([0,3,0]) house(paint=[0,0,0],roof="pitched");
translate([2,3,0]) house(roof="domical");
translate([4,3,0]) house(paint=[0,0.5,0.5]);
</pre>
<pre>//example 3
   
element_data = [[0,"","",0],  // must be in order
    [1,"Hydrogen","H",1.008],   // indexed via atomic number
    [2,"Helium",  "He",4.003]   // redundant atomic number to preserve your sanity later
];
   
Hydrogen = 1;
Helium   = 2;
      
module coaster(atomic_number){
    element     = element_data[atomic_number][1];
    symbol      = element_data[atomic_number][2];
    atomic_mass = element_data[atomic_number][3];
    //rest of script
}
</pre>
<h4>Operator Modules</h4>
<p>Use of children() allows modules to act as operators applied to any or all of the objects within this module instantiation. 
In use, operator modules do not end with a semi-colon.
</p>
<pre>name ( parameter values ){scope of operator}
</pre>
<h4>Children</h4>
<p>Objects are indexed via integers from 0 to $children-1. OpenSCAD sets $children to the total number of objects within the scope.
Objects grouped into a sub scope are treated as one child. 
<a href="#SeparateChildren">See example of separate children</a> below and <a href="General.html#Scope_of_variables" title="OpenSCAD User Manual/General">Scope of variables</a>. Note that <code>children()</code>, <code>echo()</code> and empty block statements (including <code>if</code>s) count as <code>$children</code> objects, even if no geometry is present (as of v2017.12.23).
</p>
<pre> children();                         all children
 children(index);                    value or variable to select one child
 children([start : step : end]);     select from start to end incremented by step
 children([start : end]);            step defaults to 1 or -1
 children([vector]);                 selection of several children
</pre>
<p><b>Deprecated child() module</b>
</p><p>Up to release 2013.06 the now deprecated <code>child()</code> module was used instead. This can be translated to the new children() according to the table:
</p>
<table class="wikitable">

<tbody><tr>
<th>up to 2013.06</th>
<th>2014.03 and later
</th></tr>
<tr>
<td>child()</td>
<td>children(0)
</td></tr>
<tr>
<td>child(x)</td>
<td>children(x)
</td></tr>
<tr>
<td>for (a = [0:$children-1]) child(a)</td>
<td>children([0:$children-1])
</td></tr></tbody></table>
<div class="thumb tright"><div class="thumbinner" style="width:222px;"><a class="image" href="./imgs/220px-OpenSCAD_Manual_Modules_Module_move.jpg"><img alt="" class="thumbimage" data-file-height="379" data-file-width="441" decoding="async" height="189" src="./imgs/220px-OpenSCAD_Manual_Modules_Module_move.jpg" width="220"/></a>  <div class="thumbcaption">Use all children</div></div></div>
<p><i>Examples</i> 
</p>
<pre>//Use all children
    
module move(x=0,y=0,z=0,rx=0,ry=0,rz=0)
{ translate([x,y,z])rotate([rx,ry,rz]) children(); }
   
move(10)           cube(10,true);
move(-10)          cube(10,true);
move(z=7.07, ry=45)cube(10,true);
move(z=-7.07,ry=45)cube(10,true);
</pre>
<div class="thumb tright"><div class="thumbinner" style="width:222px;"><a class="image" href="./imgs/220px-OpenSCAD_Manual_Modules_Module_lineuo.jpg"><img alt="" class="thumbimage" data-file-height="353" data-file-width="737" decoding="async" height="105" src="./imgs/220px-OpenSCAD_Manual_Modules_Module_lineuo.jpg" width="220"/></a>  <div class="thumbcaption">Use only the first child, multiple times</div></div></div>
<pre>//Use only the first child, multiple times
  
module lineup(num, space) {
   for (i = [0 : num-1])
     translate([ space*i, 0, 0 ]) children(0);
}

lineup(5, 65){ sphere(30);cube(35);}
</pre>
<div class="thumb tright"><div class="thumbinner" style="width:402px;"><a class="image" href="./imgs/400px-OpenSCAD_Manual_Modules_Module_SeparateChildren.jpg"><img alt="" class="thumbimage" data-file-height="451" data-file-width="1180" decoding="async" height="153" src="./imgs/400px-OpenSCAD_Manual_Modules_Module_SeparateChildren.jpg" width="400"/></a>  <div class="thumbcaption">Separate action for each child</div></div></div>
<div id="SeparateChildren"></div>
<pre>  //Separate action for each child
   
  module SeparateChildren(space){
    for ( i= [0:1:$children-1])   // step needed in case $children &lt; 2  
      translate([i*space,0,0]) {children(i);text(str(i));}
  }
   
  SeparateChildren(-20){
    cube(5);              // 0
    sphere(5);            // 1
    translate([0,20,0]){  // 2
      cube(5);
      sphere(5);
    }     
    cylinder(15);         // 3
    cube(8,true);         // 4
  }
  translate([0,40,0])color("lightblue")
    SeparateChildren(20){cube(3,true);}
</pre>
<div class="thumb tright"><div class="thumbinner" style="width:222px;"><a class="image" href="./imgs/220px-OpenSCAD_Manual_Modules_Module_MultiRange.jpg"><img alt="" class="thumbimage" data-file-height="334" data-file-width="372" decoding="async" height="198" src="./imgs/220px-OpenSCAD_Manual_Modules_Module_MultiRange.jpg" width="220"/></a>  <div class="thumbcaption">Multiple ranges</div></div></div>
<pre>//Multiple ranges
module MultiRange(){
   color("lightblue") children([0:1]);
   color("lightgreen")children([2:$children-2]);
   color("lightpink") children($children-1);
}
   
MultiRange()
{
   cube(5);              // 0
   sphere(5);            // 1
   translate([0,20,0]){  // 2
     cube(5);
     sphere(5);
   }     
   cylinder(15);         // 3
   cube(8,true);         // 4
}
</pre>
<h4>Further Module Examples</h4>
<dl><dd><b>Objects</b></dd></dl>
<pre>module arrow(){
    cylinder(10);
    cube([4,.5,3],true);
    cube([.5,4,3],true);
    translate([0,0,10]) cylinder(4,2,0,true);
}
  
module cannon(){
    difference(){union()
      {sphere(10);cylinder(40,10,8);} cylinder(41,4,4);
} }
  
module base(){
    difference(){
      cube([40,30,20],true);
      translate([0,0,5])  cube([50,20,15],true);
} }
</pre>
<dl><dd><b>Operators</b></dd></dl>
<div class="thumb tright"><div class="thumbinner" style="width:402px;"><a class="image" href="./imgs/400px-OpenSCAD_Manual_Modules_Module_RotaryCluster_v2.jpg"><img alt="" class="thumbimage" data-file-height="676" data-file-width="1091" decoding="async" height="248" src="./imgs/400px-OpenSCAD_Manual_Modules_Module_RotaryCluster_v2.jpg" width="400"/></a>  <div class="thumbcaption">Rotary Clusters</div></div></div>
<pre>module aim(elevation,azimuth=0)
    { rotate([0,0,azimuth])
      { rotate([0,90-elevation,0]) children(0);
      children([1:1:$children-1]);   // step needed in case $children &lt; 2
} }
   
aim(30,20)arrow();
aim(35,270)cannon();
aim(15){cannon();base();}

module RotaryCluster(radius=30,number=8)
    for (azimuth =[0:360/number:359])
      rotate([0,0,azimuth])    
        translate([radius,0,0]) { children();
          translate([40,0,30]) text(str(azimuth)); }
   
RotaryCluster(200,7) color("lightgreen") aim(15){cannon();base();}
rotate([0,0,110]) RotaryCluster(100,4.5) aim(35)cannon();
color("LightBlue")aim(55,30){cannon();base();}
</pre>
<h4>Recursive Modules</h4>
<p>Like functions, modules may contain recursive calls. However, there is no tail-recursion elimination for recursive modules.
</p><p>The code below generates a crude model of a tree. Each tree branch is itself a modified version of the tree and produced by recursion. Be careful to keep the recursion depth (branching) n below 7 as the number of primitives and the preview time grow exponentially.
</p>
<div class="thumb tright"><div class="thumbinner" style="width:222px;"><a class="image" href="./imgs/220px-Simple_recursive_tree.png"><img alt="" class="thumbimage" data-file-height="562" data-file-width="849" decoding="async" height="146" src="./imgs/220px-Simple_recursive_tree.png" width="220"/></a>  <div class="thumbcaption">A simple tree created with a recursive OpenSCAD module</div></div></div>
<pre>    module simple_tree(size, dna, n) {   
        if (n &gt; 0) {
            // trunk
            cylinder(r1=size/10, r2=size/12, h=size, $fn=24);
            // branches
            translate([0,0,size])
                for(bd = dna) {
                    angx = bd[0];
                    angz = bd[1];
                    scal = bd[2];
                        rotate([angx,0,angz])
                            simple_tree(scal*size, dna, n-1);
                }
        }
        else // leaves
            color("green")
            scale([1,1,3])
                translate([0,0,size/6]) 
                    rotate([90,0,0]) 
                        cylinder(r=size/6,h=size/10);
    }
    // dna is a list of branching data bd of the tree:
    //      bd[0] - inclination of the branch
    //      bd[1] - Z rotation angle of the branch
    //      bd[2] - relative scale of the branch
    dna = [ [12,  80, 0.85], [55,    0, 0.6], 
            [62, 125, 0.6], [57, -125, 0.6] ];
    simple_tree(50, dna, 5);
</pre>
<p>Another example of recursive module may be found in <a href="Tips_and_Tricks.html#Stack_cylinders_on_top_of_each_other" title="OpenSCAD User Manual/Tips and Tricks">Tips and Tricks</a>
</p>
<h3>Overwriting built-in modules</h3>
<p>It is possible to overwrite the built-in modules.
</p><p>A simple, but pointless example would be:
</p>
<pre>module sphere(){
    square();
}
sphere();
</pre>
<p>Note that the built-in sphere module can not be called when over written.
</p><p>A more sensible way to use this language feature is to overwrite the 3D primitives with extruded 2D-primitives.
This allows additional to customize the default parameters and to add additional parameters.
</p>
<h3>Overwriting built-in functions</h3>
<p>It is possible to overwrite the built-in functions.
</p>
<table class="wikitable">
<tbody><tr>
<th>Source Code
</th>
<th>Console output
</th></tr>
<tr>
<td><pre>echo (sin(1));
function sin() = true;
echo (sin(1));</pre>
</td>
<td><pre>Compiling design (CSG Tree generation)...
ECHO: true
ECHO: true
Compiling design (CSG Products generation)...</pre>
</td></tr></tbody></table>
<p style="page-break-after:always;"></p>
<h1>Chapter 8 -- Debugging aids</h1>
<p><big>OpenSCAD User Manual/The OpenSCAD Language</big>
</p>

<p>Modifier characters are used to change the appearance or behaviours of child nodes. They are particularly useful in debugging where they can be used to highlight specific objects, or include or exclude them from rendering.
</p>
<h3>Advanced concept</h3>
<p>As OpenSCAD uses different libraries to implement capabilities this can introduce some inconsistencies to the F5 preview behaviour of transformations. Traditional transforms (translate, rotate, scale, mirror &amp; multimatrix) are performed using OpenGL in preview, while other more advanced transforms, such as resize, perform a CGAL operation, behaving like a CSG operation affecting the underlying object, not just transforming it. In particular this can affect the display of modifier characters, specifically "#" and "%", where the highlight may not display intuitively, such as highlighting the pre-resized object, but highlighting the post-scaled object.
</p><p>Note: The color changes triggered by character modifiers appear only in "Compile" mode, not "Compile and Render (CGAL)" mode. (<a href="Transformations.html#color" title="OpenSCAD User Manual/Transformations">As per the color section</a>.)
</p>
<h3>Background Modifier</h3>
<p>Ignore this subtree for the normal rendering process and draw it in transparent gray (all transformations are still applied to the nodes in this tree).
</p><p>Because the marked subtree is completely ignored, it might have unexpected effects in case it's used, for example, with the first object in a difference(). In that case this object is rendered in transparent gray, but it is <i>not</i> used as the base for the difference()!
</p><p><i>Usage</i>
</p>
<pre> % { ... }
</pre>
<p><i>Example</i>
</p>
<pre>difference() {
	cylinder (h = 12, r=5, center = true, $fn=100);
	// first object to be subtracted
	rotate ([90,0,0]) cylinder (h = 15, r=1, center = true, $fn=100);
	// second object to be subtracted
	%rotate ([0,90,0]) cylinder (h = 15, r=3, center = true, $fn=100);
}
</pre>
<p><i>Example Output</i>
</p>
<link href="mw-data:TemplateStyles:r3721355/mw-parser-output/.tmulti" rel="mw-deduplicated-inline-style"/><div class="thumb tmulti tnone center"><div class="thumbinner" style="width:672px;max-width:672px"><div class="trow"><div class="tsingle" style="width:222px;max-width:222px"><div class="thumbimage"><a class="image" href="./imgs/220px-OpenSCAD_Background_Modifier__28off_29.png"><img alt="" data-file-height="380" data-file-width="500" decoding="async" height="167" src="./imgs/220px-OpenSCAD_Background_Modifier__28off_29.png" width="220"/></a></div><div class="thumbcaption">Output without the modifier.</div></div><div class="tsingle" style="width:222px;max-width:222px"><div class="thumbimage"><a class="image" href="./imgs/220px-OpenSCAD_Background_Modifier__28on_29.png"><img alt="" data-file-height="380" data-file-width="500" decoding="async" height="167" src="./imgs/220px-OpenSCAD_Background_Modifier__28on_29.png" width="220"/></a></div><div class="thumbcaption">Output with modifier added.</div></div><div class="tsingle" style="width:222px;max-width:222px"><div class="thumbimage"><a class="image" href="./imgs/220px-OpenSCAD_Background_Modifier__28render_29.png"><img alt="" data-file-height="380" data-file-width="500" decoding="async" height="167" src="./imgs/220px-OpenSCAD_Background_Modifier__28render_29.png" width="220"/></a></div><div class="thumbcaption">Rendered Model.</div></div></div></div></div>
<p><br style="clear:both;"/>
</p>
<h3>Debug Modifier</h3>
<p>Use this subtree as usual in the rendering process but also draw it unmodified in transparent pink.
</p><p><i>Usage</i>
</p>
<pre> # { ... }
</pre>
<p><i>Example</i>
</p>
<pre>difference() {
	// start objects
	cylinder (h = 12, r=5, center = true, $fn=100);
        // first object to be subtracted
	<span class="err">#</span>rotate ([90,0,0]) cylinder (h = 15, r=1, center = true, $fn=100);
        // second object to be subtracted
	<span class="err">#</span>rotate ([0,90,0]) cylinder (h = 15, r=3, center = true, $fn=100);
}
</pre>
<p><i>Example Output</i>
</p>
<link href="mw-data:TemplateStyles:r3721355/mw-parser-output/.tmulti" rel="mw-deduplicated-inline-style"/><div class="thumb tmulti tnone center"><div class="thumbinner" style="width:448px;max-width:448px"><div class="trow"><div class="tsingle" style="width:222px;max-width:222px"><div class="thumbimage"><a class="image" href="./imgs/220px-OpenSCAD_Debug_Modifier__28off_29.png"><img alt="" data-file-height="380" data-file-width="500" decoding="async" height="167" src="./imgs/220px-OpenSCAD_Debug_Modifier__28off_29.png" width="220"/></a></div><div class="thumbcaption">Output without the modifier.</div></div><div class="tsingle" style="width:222px;max-width:222px"><div class="thumbimage"><a class="image" href="./imgs/220px-OpenSCAD_Debug_Modifier__28on_29.png"><img alt="" data-file-height="380" data-file-width="500" decoding="async" height="167" src="./imgs/220px-OpenSCAD_Debug_Modifier__28on_29.png" width="220"/></a></div><div class="thumbcaption">Output with modifier added.</div></div></div></div></div>
<p><br style="clear: both;"/>
</p>
<h3>Root Modifier</h3>
<p>Ignore the rest of the design and use this subtree as design root.
</p><p><i>Usage</i>
</p>
<pre> ! { ... }
</pre>
<p><i>Example</i>
</p>
<pre>difference() {
	cube(10, center = true);
	translate([0, 0, 5]) {
		!rotate([90, 0, 0]) {
			<span class="err">#</span>cylinder(r = 2, h = 20, center = true, $fn = 40);
		}
	}
}
</pre>
<p><i>Example Output</i>
</p>
<link href="mw-data:TemplateStyles:r3721355/mw-parser-output/.tmulti" rel="mw-deduplicated-inline-style"/><div class="thumb tmulti tnone center"><div class="thumbinner" style="width:448px;max-width:448px"><div class="trow"><div class="tsingle" style="width:222px;max-width:222px"><div class="thumbimage"><a class="image" href="./imgs/220px-OpenSCAD_Root_Modifier__28off_29.png"><img alt="" data-file-height="380" data-file-width="500" decoding="async" height="167" src="./imgs/220px-OpenSCAD_Root_Modifier__28off_29.png" width="220"/></a></div><div class="thumbcaption">Output without the modifier.</div></div><div class="tsingle" style="width:222px;max-width:222px"><div class="thumbimage"><a class="image" href="./imgs/220px-OpenSCAD_Root_Modifier__28on_29.png"><img alt="" data-file-height="380" data-file-width="500" decoding="async" height="167" src="./imgs/220px-OpenSCAD_Root_Modifier__28on_29.png" width="220"/></a></div><div class="thumbcaption">Output with modifier added.</div></div></div></div></div>
<p style="clear: left;">
As shown in the example output with the root modifier active, the rotate() is executed as it's part of the subtree marked with the root modifier, but the translate() has no effect.
</p>
<p><br style="clear: both;"/>
</p>
<h3>Disable Modifier</h3>
<p>Simply ignore this entire subtree.
</p><p><i>Usage</i>
</p>
<pre> * { ... }
</pre>
<p><i>Example</i>
</p>
<pre>difference() {
	cube(10, center = true);
	translate([0, 0, 5]) {
		rotate([0, 90, 0]) {
			cylinder(r = 2, h = 20, center = true, $fn = 40);
		}
		*rotate([90, 0, 0]) {
			<span class="err">#</span>cylinder(r = 2, h = 20, center = true, $fn = 40);
		}
	}
}
</pre>
<p><i>Example Output</i>
</p>
<link href="mw-data:TemplateStyles:r3721355/mw-parser-output/.tmulti" rel="mw-deduplicated-inline-style"/><div class="thumb tmulti tnone center"><div class="thumbinner" style="width:448px;max-width:448px"><div class="trow"><div class="tsingle" style="width:222px;max-width:222px"><div class="thumbimage"><a class="image" href="./imgs/220px-OpenSCAD_Disable_Modifier__28off_29.png"><img alt="" data-file-height="380" data-file-width="500" decoding="async" height="167" src="./imgs/220px-OpenSCAD_Disable_Modifier__28off_29.png" width="220"/></a></div><div class="thumbcaption">Output without the modifier.</div></div><div class="tsingle" style="width:222px;max-width:222px"><div class="thumbimage"><a class="image" href="./imgs/220px-OpenSCAD_Disable_Modifier__28on_29.png"><img alt="" data-file-height="380" data-file-width="500" decoding="async" height="167" src="./imgs/220px-OpenSCAD_Disable_Modifier__28on_29.png" width="220"/></a></div><div class="thumbcaption">Output with modifier added.</div></div></div></div></div>
<p style="clear: left;">
The disable modifier allows you to comment out one or multiple subtrees. Compared to using the usual line or multi-line comments, it's aware of the hierarchical structure, which makes it easier to disable even larger trees without the need to search for the end of the subtree.
</p>
<h3>Echo Statements</h3>
<dl><dd><i>see also <a href="Other_Language_Features.html#Echo_Statements" title="OpenSCAD User Manual/Other Language Features">OpenSCAD User Manual/Other Language Features#Echo Statements</a></i></dd></dl>
<p>This function prints the contents to the compilation window (aka Console). Useful for debugging code. Also see the String function <a href="String_Functions.html#str" title="OpenSCAD User Manual/String Functions">str()</a>.
</p><p>Numeric values are rounded to 5 significant digits.
</p><p>It can be handy to use 'variable=variable' as the expression to easily label the variables, see the example below.
</p><p><b>Usage examples:</b>
</p>
<pre>my_h=50;
my_r=100;
echo("This is a cylinder with h=", my_h, " and r=", my_r);
echo(my_h=my_h,my_r=my_r); // shortcut
cylinder(h=my_h, r=my_r);
</pre>
<p>Shows in the Console as
</p>
<pre>ECHO: "This is a cylinder with h=", 50, " and r=", 100
ECHO: my_h = 50, my_r = 100
</pre>
<p style="page-break-after:always;"></p>
<h1>Chapter 9 -- External libraries and code files</h1>
<p><big>OpenSCAD User Manual/The OpenSCAD Language</big>
</p>
<h2>Use and Include</h2>
<p>For including code from external files in OpenSCAD, there are two commands available:
</p>
<ul style="list-style-image:none"><li><b><code>include &lt;<i>filename</i>&gt;</code></b> acts as if the contents of the included file were written in the including file, and</li>
<li><b><code>use &lt;<i>filename</i>&gt;</code></b> imports modules and functions, but does not execute any commands other than those definitions.</li></ul>
<p>Library files are searched for in the same folder as the design was open from, or in the library folder of the OpenSCAD installation. You can use a relative path specification to either. If they lie elsewhere you must give the complete path.
Newer versions have predefined user libraries, see the <a href="Libraries.html" title="OpenSCAD User Manual/Libraries">OpenSCAD_User_Manual/Libraries</a> page, which also documents a number of library files included in OpenSCAD.
</p><p>Wildcards (*, for e.g. <i>include &lt;MCAD/*.scad&gt;</i>) can <b>not</b> be used to include multiple files.
</p>
<h4>Directory separators</h4>
<p>Windows and Linux/Mac use different separators for directories. Windows uses <b>\</b>, e.g. directory\file.ext, while the others use <b>/</b>, e.g. directory/file.ext. This could lead to cross platform issues. However OpenSCAD on Windows correctly handles the use of <b>/</b>, so using <b>/</b> in all <b>include</b> or <b>use</b> statements work on all platforms.
</p><p>To access the parent directory <b>../</b> can be used under Linux.
</p>
<h4>Variables</h4>
<h5>Scope of variables</h5>
<p>Using <b><code>include &lt;<i>filename</i>&gt;</code></b> allows default variables to be specified in the library. These defaults can be overridden in the main code. An OpenSCAD variable has only one value during the life of the program. When there are multiple assignments it takes the last value, but assigns when the variable is first created. This has an effect when assigning in a library, as any <i>variables</i> that you later use to change the default, must be assigned before the include statement. See the second example below.
</p>
<h5>Overwriting variables</h5>
<p>Default variables in an <b><code>include</code></b> can be overridden, for example
</p><p><b>lib.scad</b>
</p>
<pre>i=1;
k=3;
module x() {
    echo("hello world");
    echo("i=",i,"j=",j,"k=",k);
}
</pre>
<p><b>hello.scad</b>
</p>
<pre>j=4;
include &lt;lib.scad&gt;;
x();
i=5;
x();
k=j;
x();

</pre>
<p>Produces the following
</p>
<pre>ECHO: "hello world"
ECHO: "i=", 5, "j=", 4, "k=", 4
ECHO: "hello world"
ECHO: "i=", 5, "j=", 4, "k=", 4
ECHO: "hello world"
ECHO: "i=", 5, "j=", 4, "k=", 4
</pre>
<p>However, placing <b><code>j=4;</code></b> after the <b><code>include</code></b> fails, producing
</p>
<pre>ECHO: "hello world"
ECHO: "i=", 5, "j=", 4, "k=", undef
ECHO: "hello world"
ECHO: "i=", 5, "j=", 4, "k=", undef
ECHO: "hello world"
ECHO: "i=", 5, "j=", 4, "k=", undef
</pre>
<h4>Example "Ring-Library"</h4>
<p>A library file for generating rings might look like this (defining a function and providing an example):
</p><p><b>ring.scad:</b>
</p>
<pre>module ring(r1, r2, h) {
    difference() {
        cylinder(r = r1, h = h);
        translate([ 0, 0, -1 ]) cylinder(r = r2, h = h+2);
    }
}

ring(5, 4, 10);
</pre>
<p>Including the library using
</p>
<pre>include &lt;ring.scad&gt;;
rotate([90, 0, 0]) ring(10, 1, 1);
</pre>
<p>would result in the example ring being shown in addition to the rotated ring, but
</p>
<pre>use &lt;ring.scad&gt;;
rotate([90, 0, 0]) ring(10, 1, 1);
</pre>
<p>shows only the rotated ring.
</p><p>If using the use function, make sure to place the use statements at top of the file, or at least not within a module!
</p><p>This works fine:
</p>
<pre> // a.scad
 use &lt;ring.scad&gt;;
 module a() {
   ring();
 }
</pre>
<p>but this results in an syntax error:
</p>
<pre> //a.scad
 module a() {
   use &lt;ring.scad&gt;;
   ring();
 }
</pre>
<p><br/>
</p>
<h4>Nested Include and Use</h4>
<p>OpenSCAD executes nested calls to <b>include</b> and <b>use</b>. There is one caveat to this, that <b>use</b> brings functions and modules only into the local file context. As a result, nested calls to <b>use</b> have no effect on the environment of the base file; the child <b>use</b> call works in the parent <b>use</b> context, but the modules and functions so imported fall out of context before they are seen by the base context.
</p>

<p>Importing is achieved by the import() command. 
</p><p><span style="font-weight: bold; font-style: normal;">[<span style="color: #A00000;">Note:</span> <span style="font-weight: normal; font-style: italic;">Requires version <span style="font-weight: bold;">2015.03-2</span></span>]</span> The <i>File &gt;&gt; Open</i> command may be used to insert this command. The file type filter of the Open File dialog may show only OpenSCAD files, but file name can be replaced with a wildcard (e.g. *.stl) to browse to additional file types.
</p>
<h2>import</h2>
<p>Imports a file for use in the current OpenSCAD model. The file extension is used to determine which type.
</p>
<dl><dt>3D formats</dt>
<dd></dd></dl>
<ul style="list-style-image:none"><li>STL (both ASCII and Binary)</li>
<li>OFF</li>
<li>AMF <span style="font-weight: bold; font-style: normal;">[<span style="color: #A00000;">Note:</span> <span style="font-weight: normal; font-style: italic;">Requires version <span style="font-weight: bold;">2019.05</span></span>]</span></li>
<li>3MF <span style="font-weight: bold; font-style: normal;">[<span style="color: #A00000;">Note:</span> <span style="font-weight: normal; font-style: italic;">Requires version <span style="font-weight: bold;">2019.05</span></span>]</span></li></ul>
<dl><dt>2D formats</dt>
<dd></dd></dl>
<ul style="list-style-image:none"><li>DXF</li>
<li><a href="SVG_Import.html" title="OpenSCAD User Manual/SVG Import">SVG</a> <span style="font-weight: bold; font-style: normal;">[<span style="color: #A00000;">Note:</span> <span style="font-weight: normal; font-style: italic;">Requires version <span style="font-weight: bold;">2019.05</span></span>]</span></li></ul>
<dl><dt>Other</dt>
<dd>CSG can be imported using include&lt;&gt; or loaded like an SCAD file, PNG can be imported using surface()</dd></dl>
<h3>Parameters</h3>
<dl><dt>&lt;file&gt;</dt>
<dd>A string containing the path to file.:If the give path is not absolute, it is resolved relative to the importing script. Note that when using <code>include&lt;&gt;</code> with a script that uses <code>import()</code>, this is relative to the script doing the <code>include&lt;&gt;</code>.</dd>
<dt>&lt;convexity&gt;</dt>
<dd>An Integer. The convexity parameter specifies the maximum number of front sides (back sides) a ray intersecting the object might penetrate. This parameter is needed only for correctly displaying the object in OpenCSG preview mode and has no effect on the polyhedron rendering. Optional.</dd>
<dt>&lt;layer&gt;</dt>
<dd>For DXF import only, specify a specific layer to import. Optional.</dd></dl>
<pre>import("example012.stl", convexity=3);
import("D:/Documents and Settings/User/My Documents/Gear.stl", convexity=3);
(Windows users must "escape" the backslashes by writing them doubled, or replace the backslashes with forward slashes.)
</pre>
<p>Read a layer of a 2D DXF file and create a 3D shape.
</p>
<pre>linear_extrude(height = 5, center = true, convexity = 10)
		import_dxf(file = "example009.dxf", layer = "plate");
</pre>
<h4>Convexity</h4>
<p><a class="image" href="./imgs/400px-Openscad_convexity.jpg"><img alt="Openscad convexity.jpg" data-file-height="924" data-file-width="1232" decoding="async" height="300" src="./imgs/400px-Openscad_convexity.jpg" width="400"/></a>
</p><p>This image shows a 2D shape with a convexity of 4, as the ray indicated in red crosses the 2D shape a maximum of 4 times. The convexity of a 3D shape would be determined in a similar way. Setting it to 10 should work fine for most cases.
</p>
<h4>Notes</h4>
<p>In the latest version of OpenSCAD, import() is now used for importing both 2D (DXF for extrusion) and 3D (STL) files.
</p><p>If you want to render the imported STL file later, you have to make sure that the STL file is "clean". This means that the mesh has to be manifold and should not contain holes nor self-intersections. If the STL is not clean, it might initially import and preview fine, but then as soon as you attempt to perform computational geometry on it by rendering a combination of it with something else, you might get warnings about it not being manifold, your imported stl might disappear from the output entirely, or you might get errors like:
</p>
<pre> CGAL error in CGAL_Build_PolySet: CGAL ERROR: assertion violation!
 Expr: check_protocoll == 0
 File: /home/don/openscad_deps/mxe/usr/i686-pc-mingw32/include/CGAL/Polyhedron_incremental_builder_3.h
 Line: 199
</pre>
<p>or
</p>
<pre> CGAL error in CGAL_Nef_polyhedron3(): CGAL ERROR: assertion violation!
 Expr: pe_prev-&gt;is_border() || !internal::Plane_constructor&lt;Plane&gt;::get_plane(pe_prev-&gt;facet(),pe_prev-&gt;facet()-&gt;plane()).is_degenerate()
 File: /home/don/openscad_deps/mxe/usr/i686-pc-mingw32/include/CGAL/Nef_3/polyhedron_3_to_nef_3.h
 Line: 253
</pre>
<p>In order to clean the STL file, you have the following options:
</p>
<ul style="list-style-image:none"><li>use <a class="external free" href="https://wiki.netfabb.com/Semi-Automatic_Repair_Options" rel="nofollow">http://wiki.netfabb.com/Semi-Automatic_Repair_Options</a> to repair the holes but not the self-intersections.</li>
<li>use netfabb basic. This free software doesn't have the option to close holes nor can it fix the self-intersections.</li>
<li>use MeshLab, This free software can fix all the issues.</li></ul>
<p>Using MeshLab, you can do:
</p>
<ul style="list-style-image:none"><li>Render - Show non Manif Edges</li>
<li>Render - Show non Manif Vertices</li>
<li>if found, use Filters - Selection - Select non Manifold Edges or Select non Manifold Vertices - Apply - Close. Then click button 'Delete the current set of selected vertices...' or check <a class="external free" href="https://www.youtube.com/watch?v=oDx0Tgy0UHo" rel="nofollow">http://www.youtube.com/watch?v=oDx0Tgy0UHo</a> for an instruction video. The screen should show "0 non manifold edges", "0 non manifold vertices"</li></ul>
<p><br/>
Next, you can click the icon 'Fill Hole', select all the holes and click Fill and then Accept. You might have to redo this action a few times.
</p><p>Use File - Export Mesh to save the STL.
</p><p><br/>
If Meshlab can't fill the last hole then Blender might help:
</p>
<ol><li>Start Blender</li>
<li>`X, 1` to remove the default object</li>
<li>File, Import, Stl</li>
<li>`Tab` to edit the mesh</li>
<li>`A` to de-select all vertices</li>
<li>`Alt+Ctrl+Shift+M` to select all non-manifold vertices</li>
<li>`MMB` to rotate, `Shift+MMB` to pan, `wheel` to zoom</li>
<li>`C` for "circle" select, `Esc` to finish</li>
<li>`Alt+M, 1` to merge or `Space` and search for "merge" as alternative</li>
<li>Merging vertices is a useful way of filling holes where the vertices are so closely packed that the slight change in geometry is unimportant compared to the precision of a typical 3D printer</li></ol>
<h2>import_dxf</h2>
<p>[<i><span style="font-weight: bold; color: #A00000;">Deprecated:</span> <b>import_dxf()</b> will be removed in future releases. Use <b>import()</b> instead.</i>]
</p><p>Read a DXF file and create a 3D shape.
</p>
<pre>linear_extrude(height = 5, center = true, convexity = 10)
		import_dxf(file = "example009.dxf", layer = "plate");
</pre>
<h2>import_stl</h2>
<p>[<i><span style="font-weight: bold; color: #A00000;">Deprecated:</span> <b>import_stl()</b> will be removed in future releases. Use <b>import()</b> instead.</i>]
</p><p>Imports an STL file for use in the current OpenSCAD model
</p>
<pre>import_stl("body.stl", convexity = 5);
</pre>
<h2>surface</h2>
<p><code>surface()</code> reads <a class="extiw" href="https://en.wikipedia.org/wiki/Heightmap" title="w:Heightmap">Heightmap</a> information from text or image files.
It can read <b>PNG</b> files.
</p>
<h3>Parameters</h3>
<dl><dt>file</dt>
<dd>String. The path to the file containing the heightmap data.</dd></dl>
<dl><dt>center</dt>
<dd>Boolean.  This determines the positioning of the generated object.  If true, object is centered in X- and Y-axis.  Otherwise, the object is placed in the positive quadrant.  Defaults to false.</dd></dl>
<dl><dt>invert</dt>
<dd>Boolean. Inverts how the color values of imported images are translated into height values. This has no effect when importing text data files. Defaults to false. <span style="font-weight: bold; font-style: normal;">[<span style="color: #A00000;">Note:</span> <span style="font-weight: normal; font-style: italic;">Requires version <span style="font-weight: bold;">2015.03</span></span>]</span></dd></dl>
<dl><dt>convexity</dt>
<dd>Integer. The convexity parameter specifies the maximum number of front sides (back sides) a ray intersecting the object might penetrate. This parameter is needed only for correct display of the object in OpenCSG preview mode and has no effect on the final rendering.</dd></dl>
<h3>Text file format</h3>
<p>The format for text based heightmaps is a matrix of numbers that represent the height for a specific point. Rows are mapped to the Y-axis, columns to the X axis.
The numbers must be separated by spaces or tabs. Empty lines and lines starting with a # character are ignored.
</p>
<h3>Images</h3>
<p><span style="font-weight: bold; font-style: normal;">[<span style="color: #A00000;">Note:</span> <span style="font-weight: normal; font-style: italic;">Requires version <span style="font-weight: bold;">2015.03</span></span>]</span>
</p><p>Currently only PNG images are supported. Alpha channel information of the image is ignored and the height for the pixel is determined by converting the color value to <a class="extiw" href="https://en.wikipedia.org/wiki/Grayscale" title="w:Grayscale">Grayscale</a> using the linear luminance for the sRGB color space (Y = 0.2126R + 0.7152G + 0.0722B). The gray scale values are scaled to be in the range 0 to 100.
</p>
<h3>Examples</h3>
<p><b>Example 1:</b>
</p>
<pre>//surface.scad
surface(file = "surface.dat", center = true, convexity = 5);
%translate([0,0,5])cube([10,10,10], center =true);
</pre>
<pre>#surface.dat
10 9 8 7 6 5 5 5 5 5 
9 8 7 6 6 4 3 2 1 0 
8 7 6 6 4 3 2 1 0 0
7 6 6 4 3 2 1 0 0 0
6 6 4 3 2 1 1 0 0 0
6 6 3 2 1 1 1 0 0 0
6 6 2 1 1 1 1 0 0 0
6 6 1 0 0 0 0 0 0 0
3 1 0 0 0 0 0 0 0 0
3 0 0 0 0 0 0 0 0 0
</pre>
<p>Result:
</p><p><a class="image" href="./imgs/Openscad_surface_example_x1.png"><img alt="Openscad surface example x1.png" data-file-height="495" data-file-width="521" decoding="async" height="495" src="./imgs/Openscad_surface_example_x1.png" width="521"/></a>
</p><p><b>Example 2</b>
</p>
<pre> // example010.dat generated using octave:
 // d = (sin(1:0.2:10)' * cos(1:0.2:10)) * 10;
 // save("example010.dat", "d");
 intersection() {
   surface(file = "example010.dat", center = true, convexity = 5);
   rotate(45, [0, 0, 1]) surface(file = "example010.dat", center = true, convexity = 5); 
 }
</pre>
<p><a class="image" href="./imgs/Openscad_surface_example_x2.png"><img alt="Openscad surface example x2.png" data-file-height="366" data-file-width="397" decoding="async" height="366" src="./imgs/Openscad_surface_example_x2.png" width="397"/></a>
</p><p><b>Example 3:</b>
</p><p><span style="font-weight: bold; font-style: normal;">[<span style="color: #A00000;">Note:</span> <span style="font-weight: normal; font-style: italic;">Requires version <span style="font-weight: bold;">2015.03</span></span>]</span>
</p>
<pre>// Example 3a
scale([1, 1, 0.1])
  surface(file = "smiley.png", center = true);
</pre>
<pre>// Example 3b
scale([1, 1, 0.1])
  surface(file = "smiley.png", center = true, invert = true);
</pre>
<link href="mw-data:TemplateStyles:r3721355/mw-parser-output/.tmulti" rel="mw-deduplicated-inline-style"/><div class="thumb tmulti tnone center"><div class="thumbinner" style="width:672px;max-width:672px"><div class="trow"><div class="tsingle" style="width:222px;max-width:222px"><div class="thumbimage"><a class="image" href="./imgs/220px-OpenSCAD_surface_example_input_image.png"><img alt="Input image" data-file-height="300" data-file-width="400" decoding="async" height="165" src="./imgs/220px-OpenSCAD_surface_example_input_image.png" width="220"/></a></div><div class="thumbcaption">Input image</div></div><div class="tsingle" style="width:222px;max-width:222px"><div class="thumbimage"><a class="image" href="./imgs/220px-OpenSCAD_surface_example.png"><img alt="Surface output" data-file-height="600" data-file-width="800" decoding="async" height="165" src="./imgs/220px-OpenSCAD_surface_example.png" width="220"/></a></div><div class="thumbcaption">Example 3a: surface(invert = false)</div></div><div class="tsingle" style="width:222px;max-width:222px"><div class="thumbimage"><a class="image" href="./imgs/220px-OpenSCAD_surface_example__28inverted_29.png"><img alt="Surface output inverted" data-file-height="600" data-file-width="800" decoding="async" height="165" src="./imgs/220px-OpenSCAD_surface_example__28inverted_29.png" width="220"/></a></div><div class="thumbcaption">Example 3b: surface(invert = true)</div></div></div><div class="trow" style="display:flex"><div class="thumbcaption">Example 3: Using surface() with a PNG image as heightmap input.</div></div></div></div>




</div><footer class="mw-body" style="font-size:13px;color:darkgray;text-align:center;margin-bottom:-1px">
	From the WikiBooks article <a href="https://en.wikibooks.org/wiki/OpenSCAD_User_Manual/The_OpenSCAD_Language#render" style="color:black">The OpenSCAD Language</a> 
	(provided under <a href="https://creativecommons.org/licenses/by-sa/3.0/" style="color:black">
	CC-BY-SA-3.0</a>)</footer></body></html>