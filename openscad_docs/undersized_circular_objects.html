<html><head><title>undersized circular objects</title><link href="./styles/style.css" rel="stylesheet"/></head><body class="mw-body" style="height:auto"><h1 class="firstHeading" id="firstHeading">undersized circular objects</h1><div id="bodyContent"><p>Using cylinder() with difference() to place holes in objects results in undersized holes. This is because circular paths are approximated with polygons inscribed within in a circle. The points of the polygon are on the circle, but straight lines between are inside.
This is discussed in some detail at <a class="external free" href="http://hydraraptor.blogspot.com.au/2011/02/polyholes.html" rel="nofollow">http://hydraraptor.blogspot.com.au/2011/02/polyholes.html</a>
</p><p>While the standard cylinder() and circle() generate inner (inscribed) polygons, here are modules to produce outer (circumscribed) and mid ( 1/2 way between) polygons.
</p>
<div aria-labelledby="mw-toc-heading" class="toc" id="toc" role="navigation"><div class="toctitle" dir="ltr" lang="en"><h2 id="mw-toc-heading">Contents</h2></div>
<ul style="list-style-image:none">
<li><a href="#cylinder"><span class="tocnumber">1</span> cylinder</a></li>
<li><a href="#cone"><span class="tocnumber">2</span> cone</a></li>
<li><a href="#circle"><span class="tocnumber">3</span> circle</a></li>
</ul>
</div>

<h2>cylinder</h2>
<pre> module cylinder_outer(height,radius,fn){
   fudge = 1/cos(180/fn);
   cylinder(h=height,r=radius*fudge,$fn=fn);}
</pre>
<pre> module cylinder_mid(height,radius,fn){
   fudge = (1+1/cos(180/fn))/2;
   cylinder(h=height,r=radius*fudge,$fn=fn);}
</pre>
<div class="floatleft"><a class="image" href="./imgs/300px-OpenSCAD_Cylinder_outer_mid.jpg" title="Example of outer and mid cylinder"><img alt="Example of outer and mid cylinder" data-file-height="760" data-file-width="978" decoding="async" height="233" src="./imgs/300px-OpenSCAD_Cylinder_outer_mid.jpg" width="300"/></a></div>
<div class="center"><div class="floatnone"><a class="image" href="./imgs/400px-OpenSCAD_Cylinder_outer_mid_part.jpg" title="partial view"><img alt="partial view" data-file-height="337" data-file-width="612" decoding="async" height="220" src="./imgs/400px-OpenSCAD_Cylinder_outer_mid_part.jpg" width="400"/></a></div></div>
<pre> //example script to show differences
 cylinder_outer(5,100,6);
 %cylinder_mid(5.5,100,6);
 cylinder(6,r=100,$fn=6);        // standard
 #cylinder(5.75,r=100,$fn=60);   // reference
</pre>
<pre> //CSG tree for this example
 group() {
   group() {
     cylinder($fn = 6, $fa = 12, $fs = 2, h = 5, r1 = 115.47, r2 = 115.47, center = false);
   }
Â % group() {
     cylinder($fn = 6, $fa = 12, $fs = 2, h = 5.5, r1 = 107.735, r2 = 107.735, center = false);
   }
   cylinder($fn = 6, $fa = 12, $fs = 2, h = 6, r1 = 100, r2 = 100, center = false);
 # cylinder($fn = 60, $fa = 12, $fs = 2, h = 5.75, r1 = 100, r2 = 100, center = false);
 }
</pre>
<h2>cone</h2>
<p>For cylinders with different top and bottom radii
</p>
<pre> module cone_outer(height,radius1,radius2,fn){
   fudge = 1/cos(180/fn);
   cylinder(h=height,r1=radius1*fudge,r2=radius2*fudge,$fn=fn);}
</pre>
<pre> module cone_mid(height,radius1,radius2,fn){
   fudge = (1+1/cos(180/fn))/2;
   cylinder(h=height,r1=radius1*fudge,r2=radius2*fudge,$fn=fn);}
</pre>
<pre> cone_outer(5 ,10 ,5 ,6);
 cone_mid(5 ,10 ,5 ,6);
</pre>
<h2>circle</h2>
<p>And lastly not to forget the 2D world
</p>
<pre>   module circle_outer(radius,fn){
     fudge = 1/cos(180/fn);
     circle(r=radius*fudge,$fn=fn);}
</pre>
<pre>   module circle_mid(radius,fn){
     fudge = (1+1/cos(180/fn))/2;
     circle(r=radius*fudge,$fn=fn);}
</pre>
<pre> circle_outer(20,6);
 circle_mid(20,6);
</pre>




</div><footer class="mw-body" style="font-size:13px;color:darkgray;text-align:center;margin-bottom:-1px">
	From the WikiBooks article <a href="https://en.wikibooks.org/wiki/OpenSCAD_User_Manual/undersized_circular_objects" style="color:black">undersized circular objects</a> 
	(provided under <a href="https://creativecommons.org/licenses/by-sa/3.0/" style="color:black">
	CC-BY-SA-3.0</a>)</footer></body></html>